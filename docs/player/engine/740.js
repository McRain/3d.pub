"use strict";(self.webpackChunk_reneos_3d_player_engine=self.webpackChunk_reneos_3d_player_engine||[]).push([[740],{740:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var i=o(922),s=o(314),n=o(404);const{Tween:a,Group:d,Easing:c}=window.TWEEN;let r=0,h=0,l=window.innerWidth/2,m=window.innerHeight/2;const p=new d;class u extends s.default{constructor(e){super(e),this.isCameraRoot=!0,this.camera=new i.ubm(e.fov||45,window.innerWidth/window.innerHeight,e.near||.01,e.far||300),this.camera.name="Main",this.add(this.camera),this.camera.position.set(0,0,1),n.A.Canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this._look=new i.Pq0(0,0,-2),this.activate()}async moveFocus(e){const t=this._look.clone(),o=new window.TWEEN.Tween(t).to(e,1e3).easing(c.Quadratic.InOut).delay(0).onUpdate((()=>{this._look.copy(t)})).onComplete((()=>{p.remove(o)}));p.add(o),o.start()}async moveCam(e){const t=this.position.clone(),o=new a(t).to(e,1e3).easing(c.Quadratic.InOut).delay(0).onUpdate((()=>{this.position.copy(t)})).onComplete((async()=>{p.remove(o)}));p.add(o),o.start()}setTo({focus:e,camera:t},o){if(e){const{offset:t,position:s,paths:n}=e;let a=new i.Pq0;if(n){let e=o.slide;for(let t=0;t<n.length;t++)e=e.childrens.find((e=>e.uid===n[t]));e.model.getWorldPosition(a)}else a.set(s.x,s.y,s.z);a.add(t||{x:0,y:0,z:0}),this.moveFocus(a)}if(t){const{position:e}=t;this.moveCam(e)}}onMouseMove(e){r=.001*(e.clientX-l),h=.001*(e.clientY-m)}update(e){p.update(e),this.camera.position.x+=.01*(r-this.camera.position.x),this.camera.position.y+=.01*(-h-this.camera.position.y),this.camera.lookAt(this._look)}activate(...e){n.A.SetCamera(this.camera),n.A.AddToUpdate(this.update.bind(this))}}const w=u}}]);