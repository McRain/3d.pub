(()=>{"use strict";var __webpack_modules__={93:(e,t)=>{function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},o.apply(this,arguments)}t._extends=o,t._object_without_properties_loose=function(e,t){if(null==e)return{};var o,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(s[o]=e[o]);return s}},361:(e,t,o)=>{var n=o(93),s=o(421),r=o(874);const a="[ Federation Runtime ]",i=s.createLogger(a);function l(e,t){e||c(t)}function c(e){if(e instanceof Error)throw e.message=`${a}: ${e.message}`,e;throw new Error(`${a}: ${e}`)}function d(e){e instanceof Error?(e.message=`${a}: ${e.message}`,i.warn(e)):i.warn(e)}function p(e,t){return-1===e.findIndex((e=>e===t))&&e.push(t),e}function m(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function u(e){return void 0!==e.entry}function h(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function f(e){return e&&"object"==typeof e}const v=Object.prototype.toString;function y(e){return Array.isArray(e)?e:[e]}function g(e){const t={url:"",type:"global",globalName:""};return s.isBrowserEnv()||s.isReactNativeEnv()?"remoteEntry"in e?{url:e.remoteEntry,type:e.remoteEntryType,globalName:e.globalName}:t:"ssrRemoteEntry"in e?{url:e.ssrRemoteEntry||t.url,type:e.ssrRemoteEntryType||t.type,globalName:e.globalName}:t}const E="object"==typeof globalThis?globalThis:window,b=(()=>{try{return document.defaultView}catch(e){return E}})(),k=b;function _(e,t,o){Object.defineProperty(e,t,{value:o,configurable:!1,writable:!0})}function w(e,t){return Object.hasOwnProperty.call(e,t)}w(E,"__GLOBAL_LOADING_REMOTE_ENTRY__")||_(E,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const S=E.__GLOBAL_LOADING_REMOTE_ENTRY__;function N(e){var t,o,n,s,r,a;w(e,"__VMOK__")&&!w(e,"__FEDERATION__")&&_(e,"__FEDERATION__",e.__VMOK__),w(e,"__FEDERATION__")||(_(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),_(e,"__VMOK__",e.__FEDERATION__)),null!=(t=e.__FEDERATION__).__GLOBAL_PLUGIN__||(t.__GLOBAL_PLUGIN__=[]),null!=(o=e.__FEDERATION__).__INSTANCES__||(o.__INSTANCES__=[]),null!=(n=e.__FEDERATION__).moduleInfo||(n.moduleInfo={}),null!=(s=e.__FEDERATION__).__SHARE__||(s.__SHARE__={}),null!=(r=e.__FEDERATION__).__MANIFEST_LOADING__||(r.__MANIFEST_LOADING__={}),null!=(a=e.__FEDERATION__).__PRELOADED_MAP__||(a.__PRELOADED_MAP__=new Map)}function x(){E.__FEDERATION__.__GLOBAL_PLUGIN__=[],E.__FEDERATION__.__INSTANCES__=[],E.__FEDERATION__.moduleInfo={},E.__FEDERATION__.__SHARE__={},E.__FEDERATION__.__MANIFEST_LOADING__={},Object.keys(S).forEach((e=>{delete S[e]}))}function B(e){E.__FEDERATION__.__INSTANCES__.push(e)}function C(){return E.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function I(e,t=s.isDebugMode()){t&&(E.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,E.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.11.4")}function $(e,t){if("string"==typeof t){if(e[t])return{value:e[t],key:t};{const o=Object.keys(e);for(const n of o){const[o,s]=n.split(":"),r=`${o}:${t}`,a=e[r];if(a)return{value:a,key:r}}return{value:void 0,key:t}}}throw new Error("key must be string")}N(E),N(b);const V=()=>b.__FEDERATION__.moduleInfo,A=(e,t)=>{const o=$(t,m(e)).value;if(o&&!o.version&&"version"in e&&e.version&&(o.version=e.version),o)return o;if("version"in e&&e.version){const{version:t}=e,o=m(n._object_without_properties_loose(e,["version"])),s=$(b.__FEDERATION__.moduleInfo,o).value;if((null==s?void 0:s.version)===t)return s}},T=e=>A(e,b.__FEDERATION__.moduleInfo),M=(e,t)=>{const o=m(e);return b.__FEDERATION__.moduleInfo[o]=t,b.__FEDERATION__.moduleInfo},R=e=>(b.__FEDERATION__.moduleInfo=n._extends({},b.__FEDERATION__.moduleInfo,e),()=>{const t=Object.keys(e);for(const e of t)delete b.__FEDERATION__.moduleInfo[e]}),D=(e,t)=>{const o=t||`__FEDERATION_${e}:custom__`;return{remoteEntryKey:o,entryExports:E[o]}},O=e=>{const{__GLOBAL_PLUGIN__:t}=b.__FEDERATION__;e.forEach((e=>{-1===t.findIndex((t=>t.name===e.name))?t.push(e):d(`The plugin ${e.name} has been registered.`)}))},P=()=>b.__FEDERATION__.__GLOBAL_PLUGIN__,L=e=>E.__FEDERATION__.__PRELOADED_MAP__.get(e),F=e=>E.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),j="default",U="global",H="[0-9A-Za-z-]+",q=`(?:\\+(${H}(?:\\.${H})*))`,z="0|[1-9]\\d*",G="[0-9]+",W="\\d*[a-zA-Z-][a-zA-Z0-9-]*",X=`(?:${G}|${W})`,Y=`(?:${z}|${W})`,K=`(?:-(${Y}(?:\\.${Y})*))`,J=`${z}|x|X|\\*`,Z=`[v=\\s]*(${J})(?:\\.(${J})(?:\\.(${J})(?:${K})?${q}?)?)?`,Q=`^\\s*(${Z})\\s+-\\s+(${Z})\\s*$`,ee="((?:<|>)?=?)",te=`(\\s*)${ee}\\s*([v=\\s]*(${G})\\.(${G})\\.(${G})(?:-?(${X}(?:\\.${X})*))?${q}?|${Z})`,oe="(?:~>?)",ne=`(\\s*)${oe}\\s+`,se="(?:\\^)",re=`(\\s*)${se}\\s+`,ae=`^${se}${Z}$`,ie=`^${oe}${Z}$`,le=`^${ee}\\s*${Z}$`,ce=`^${ee}\\s*(v?(${z})\\.(${z})\\.(${z})${K}?${q}?)$|^$`;function de(e){return new RegExp(e)}function pe(e){return!e||"x"===e.toLowerCase()||"*"===e}function me(...e){return t=>e.reduce(((e,t)=>t(e)),t)}function ue(e){return e.match(de(ce))}function he(e,t,o,n){const s=`${e}.${t}.${o}`;return n?`${s}-${n}`:s}function fe(e){return e.replace(de(Q),((e,t,o,n,s,r,a,i,l,c,d,p)=>`${t=pe(o)?"":pe(n)?`>=${o}.0.0`:pe(s)?`>=${o}.${n}.0`:`>=${t}`} ${i=pe(l)?"":pe(c)?`<${Number(l)+1}.0.0-0`:pe(d)?`<${l}.${Number(c)+1}.0-0`:p?`<=${l}.${c}.${d}-${p}`:`<=${i}`}`.trim()))}function ve(e){return e.replace(de(te),"$1$2$3")}function ye(e){return e.replace(de(ne),"$1~")}function ge(e){return e.replace(de(re),"$1^")}function Ee(e){return e.trim().split(/\s+/).map((e=>e.replace(de(ae),((e,t,o,n,s)=>pe(t)?"":pe(o)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:pe(n)?"0"===t?`>=${t}.${o}.0 <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.0 <${Number(t)+1}.0.0-0`:s?"0"===t?"0"===o?`>=${t}.${o}.${n}-${s} <${t}.${o}.${Number(n)+1}-0`:`>=${t}.${o}.${n}-${s} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n}-${s} <${Number(t)+1}.0.0-0`:"0"===t?"0"===o?`>=${t}.${o}.${n} <${t}.${o}.${Number(n)+1}-0`:`>=${t}.${o}.${n} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n} <${Number(t)+1}.0.0-0`)))).join(" ")}function be(e){return e.trim().split(/\s+/).map((e=>e.replace(de(ie),((e,t,o,n,s)=>pe(t)?"":pe(o)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:pe(n)?`>=${t}.${o}.0 <${t}.${Number(o)+1}.0-0`:s?`>=${t}.${o}.${n}-${s} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n} <${t}.${Number(o)+1}.0-0`)))).join(" ")}function ke(e){return e.split(/\s+/).map((e=>e.trim().replace(de(le),((e,t,o,n,s,r)=>{const a=pe(o),i=a||pe(n),l=i||pe(s);return"="===t&&l&&(t=""),r="",a?">"===t||"<"===t?"<0.0.0-0":"*":t&&l?(i&&(n=0),s=0,">"===t?(t=">=",i?(o=Number(o)+1,n=0,s=0):(n=Number(n)+1,s=0)):"<="===t&&(t="<",i?o=Number(o)+1:n=Number(n)+1),"<"===t&&(r="-0"),`${t+o}.${n}.${s}${r}`):i?`>=${o}.0.0${r} <${Number(o)+1}.0.0-0`:l?`>=${o}.${n}.0${r} <${o}.${Number(n)+1}.0-0`:e})))).join(" ")}function _e(e){return e.trim().replace(de("(<|>)?=?\\s*\\*"),"")}function we(e,t){return(e=Number(e)||e)>(t=Number(t)||t)?1:e===t?0:-1}function Se(e,t){return we(e.major,t.major)||we(e.minor,t.minor)||we(e.patch,t.patch)||function(e,t){const{preRelease:o}=e,{preRelease:n}=t;if(void 0===o&&Boolean(n))return 1;if(Boolean(o)&&void 0===n)return-1;if(void 0===o&&void 0===n)return 0;for(let e=0,t=o.length;e<=t;e++){const t=o[e],s=n[e];if(t!==s)return void 0===t&&void 0===s?0:t?s?we(t,s):-1:1}return 0}(e,t)}function Ne(e,t){return e.version===t.version}function xe(e,t){switch(e.operator){case"":case"=":return Ne(e,t);case">":return Se(e,t)<0;case">=":return Ne(e,t)||Se(e,t)<0;case"<":return Se(e,t)>0;case"<=":return Ne(e,t)||Se(e,t)>0;case void 0:return!0;default:return!1}}function Be(e,t){if(!e)return!1;const o=function(e){return me(fe,ve,ye,ge)(e.trim()).split(/\s+/).join(" ")}(t),n=o.split(" ").map((e=>function(e){return me(Ee,be,ke,_e)(e)}(e))).join(" "),s=n.split(/\s+/).map((e=>e.trim().replace(de("^\\s*>=\\s*0.0.0\\s*$"),""))),r=ue(e);if(!r)return!1;const[,a,,i,l,c,d]=r,p={operator:a,version:he(i,l,c,d),major:i,minor:l,patch:c,preRelease:null==d?void 0:d.split(".")};for(const e of s){const t=ue(e);if(!t)return!1;const[,o,,n,s,r,a]=t;if(!xe({operator:o,version:he(n,s,r,a),major:n,minor:s,patch:r,preRelease:null==a?void 0:a.split(".")},p))return!1}return!0}function Ce(e,t){const o=t.shared||{},s=t.name,r=Object.keys(o).reduce(((e,r)=>{const a=y(o[r]);return e[r]=e[r]||[],a.forEach((o=>{e[r].push(function(e,t,o,s){let r;var a,i,l;return r="get"in e?e.get:"lib"in e?()=>Promise.resolve(e.lib):()=>Promise.resolve((()=>{throw new Error(`Can not get shared '${o}'!`)})),n._extends({deps:[],useIn:[],from:t,loading:null},e,{shareConfig:n._extends({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:r,loaded:!(!(null==e?void 0:e.loaded)&&!("lib"in e))||void 0,version:null!=(a=e.version)?a:"0",scope:Array.isArray(e.scope)?e.scope:[null!=(i=e.scope)?i:"default"],strategy:(null!=(l=e.strategy)?l:s)||"version-first"})}(o,s,r,t.shareStrategy))})),e}),{}),a=n._extends({},e.shared);return Object.keys(r).forEach((e=>{a[e]?r[e].forEach((t=>{a[e].find((e=>e.version===t.version))||a[e].push(t)})):a[e]=r[e]})),{shared:a,shareInfos:r}}function Ie(e,t){const o=e=>{if(!Number.isNaN(Number(e))){const t=e.split(".");let o=e;for(let e=0;e<3-t.length;e++)o+=".0";return o}return e};return!!Be(o(e),`<=${o(t)}`)}const $e=(e,t)=>{const o=t||function(e,t){return Ie(e,t)};return Object.keys(e).reduce(((e,t)=>e?o(e,t)||"0"===e?t:e:t),0)},Ve=e=>Boolean(e.loaded)||"function"==typeof e.lib;function Ae(e,t,o){const n=e[t][o];return $e(e[t][o],(function(e,t){return!Ve(n[e])&&Ie(e,t)}))}function Te(e,t,o){const n=e[t][o];return $e(e[t][o],(function(e,t){const o=e=>Ve(e)||(e=>Boolean(e.loading))(e);return o(n[t])?!o(n[e])||Boolean(Ie(e,t)):!o(n[e])&&Ie(e,t)}))}function Me(e){return"loaded-first"===e?Te:Ae}function Re(e,t,o,n){if(!e)return;const{shareConfig:s,scope:r=j,strategy:a}=o,i=Array.isArray(r)?r:[r];for(const r of i)if(s&&e[r]&&e[r][t]){const{requiredVersion:i}=s,l=Me(a)(e,r,t),p=()=>{if(s.singleton){if("string"==typeof i&&!Be(l,i)){const n=`Version ${l} from ${l&&e[r][t][l].from} of shared singleton module ${t} does not satisfy the requirement of ${o.from} which needs ${i})`;s.strictVersion?c(n):d(n)}return e[r][t][l]}if(!1===i||"*"===i)return e[r][t][l];if(Be(l,i))return e[r][t][l];for(const[o,n]of Object.entries(e[r][t]))if(Be(o,i))return n},m={shareScopeMap:e,scope:r,pkgName:t,version:l,GlobalFederation:k.__FEDERATION__,resolver:p};return(n.emit(m)||m).resolver()}}function De(){return k.__FEDERATION__.__SHARE__}function Oe(e){const{pkgName:t,extraOptions:o,shareInfos:n}=e;var s;const r=null!=(s=null==o?void 0:o.resolver)?s:e=>{if(!e)return;const t={};e.forEach((e=>{t[e.version]=e}));const o=$e(t,(function(e,o){return!Ve(t[e])&&Ie(e,o)}));return t[o]};return Object.assign({},r(n[t]),null==o?void 0:o.customShareInfo)}var Pe={global:{Global:k,nativeGlobal:b,resetFederationGlobalInfo:x,setGlobalFederationInstance:B,getGlobalFederationConstructor:C,setGlobalFederationConstructor:I,getInfoWithoutType:$,getGlobalSnapshot:V,getTargetSnapshotInfoByModuleInfo:A,getGlobalSnapshotInfoByModuleInfo:T,setGlobalSnapshotInfoByModuleInfo:M,addGlobalSnapshot:R,getRemoteEntryExports:D,registerGlobalPlugins:O,getGlobalHostPlugins:P,getPreloaded:L,setPreloaded:F},share:{getRegisteredShare:Re,getGlobalShareScope:De}};function Le(e,t){for(const o of e){const e=t.startsWith(o.name);let n=t.replace(o.name,"");if(e){if(n.startsWith("/"))return n=`.${n}`,{pkgNameOrAlias:o.name,expose:n,remote:o};if(""===n)return{pkgNameOrAlias:o.name,expose:".",remote:o}}const s=o.alias&&t.startsWith(o.alias);let r=o.alias&&t.replace(o.alias,"");if(o.alias&&s){if(r&&r.startsWith("/"))return r=`.${r}`,{pkgNameOrAlias:o.alias,expose:r,remote:o};if(""===r)return{pkgNameOrAlias:o.alias,expose:".",remote:o}}}}function Fe(e){const{entry:t,name:o}=e;return s.composeKeyWithSeparator(o,t)}async function je({origin:e,remoteEntryExports:t,remoteInfo:o}){const n=Fe(o);if(t)return t;if(!S[n]){const a=e.remoteHandler.hooks.lifecycle.loadEntry,i=e.loaderHook;S[n]=a.emit({loaderHook:i,remoteInfo:o,remoteEntryExports:t}).then((e=>e||(s.isBrowserEnv()?async function({remoteInfo:e,remoteEntryExports:t,loaderHook:o}){const{entry:n,entryGlobalName:a,name:i,type:c}=e;switch(c){case"esm":case"module":return async function({entry:e,remoteEntryExports:t}){return new Promise(((o,n)=>{try{t?o(t):"undefined"!=typeof FEDERATION_ALLOW_NEW_FUNCTION?new Function("callbacks",`import("${e}").then(callbacks[0]).catch(callbacks[1])`)([o,n]):import(e).then(o).catch(n)}catch(e){n(e)}}))}({entry:n,remoteEntryExports:t});case"system":return async function({entry:e,remoteEntryExports:t}){return new Promise(((o,n)=>{try{t?o(t):new Function("callbacks",`System.import("${e}").then(callbacks[0]).catch(callbacks[1])`)([o,n])}catch(e){n(e)}}))}({entry:n,remoteEntryExports:t});default:return async function({name:e,globalName:t,entry:o,loaderHook:n}){const{entryExports:a}=D(e,t);return a||s.loadScript(o,{attrs:{},createScriptHook:(e,t)=>{const o=n.lifecycle.createScript.emit({url:e,attrs:t});if(o)return o instanceof HTMLScriptElement||"script"in o||"timeout"in o?o:void 0}}).then((()=>{const{remoteEntryKey:n,entryExports:s}=D(e,t);return l(s,r.getShortErrorMsg(r.RUNTIME_001,r.runtimeDescMap,{remoteName:e,remoteEntryUrl:o,remoteEntryKey:n})),s})).catch((t=>{throw l(void 0,r.getShortErrorMsg(r.RUNTIME_008,r.runtimeDescMap,{remoteName:e,resourceUrl:o})),t}))}({entry:n,globalName:a,name:i,loaderHook:o})}}({remoteInfo:o,remoteEntryExports:t,loaderHook:i}):async function({remoteInfo:e,loaderHook:t}){const{entry:o,entryGlobalName:n,name:a,type:i}=e,{entryExports:c}=D(a,n);return c||s.loadScriptNode(o,{attrs:{name:a,globalName:n,type:i},loaderHook:{createScriptHook:(e,o={})=>{const n=t.lifecycle.createScript.emit({url:e,attrs:o});if(n)return"url"in n?n:void 0}}}).then((()=>{const{remoteEntryKey:e,entryExports:t}=D(a,n);return l(t,r.getShortErrorMsg(r.RUNTIME_001,r.runtimeDescMap,{remoteName:a,remoteEntryUrl:o,remoteEntryKey:e})),t})).catch((e=>{throw e}))}({remoteInfo:o,loaderHook:i}))))}return S[n]}function Ue(e){return n._extends({},e,{entry:"entry"in e?e.entry:"",type:e.type||U,entryGlobalName:e.entryGlobalName||e.name,shareScope:e.shareScope||j})}let He=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let e;try{e=await je({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports})}catch(t){const o=Fe(this.remoteInfo);e=await this.host.loaderHook.lifecycle.loadEntryError.emit({getRemoteEntry:je,origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,globalLoading:S,uniqueKey:o})}return l(e,`remoteEntryExports is undefined \n ${s.safeToString(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,t,o,s){const{loadFactory:a=!0}=o||{loadFactory:!0},i=await this.getEntry();if(!this.inited){const t=this.host.shareScopeMap,o=this.remoteInfo.shareScope||"default";t[o]||(t[o]={});const a=t[o],l=[],d={version:this.remoteInfo.version||""};Object.defineProperty(d,"shareScopeMap",{value:t,enumerable:!1});const p=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:a,remoteEntryInitOptions:d,initScope:l,remoteInfo:this.remoteInfo,origin:this.host});void 0===(null==i?void 0:i.init)&&c(r.getShortErrorMsg(r.RUNTIME_002,r.runtimeDescMap,{remoteName:name,remoteEntryUrl:this.remoteInfo.entry,remoteEntryKey:this.remoteInfo.entryGlobalName})),await i.init(p.shareScope,p.initScope,p.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(n._extends({},p,{id:e,remoteSnapshot:s,remoteEntryExports:i}))}let d;this.lib=i,this.inited=!0,d=await this.host.loaderHook.lifecycle.getModuleFactory.emit({remoteEntryExports:i,expose:t,moduleInfo:this.remoteInfo}),d||(d=await i.get(t)),l(d,`${m(this.remoteInfo)} remote don't export ${t}.`);const p=((e,t)=>{let o;return o=e.endsWith("/")?e.slice(0,-1):e,t.startsWith(".")&&(t=t.slice(1)),o+=t,o})(this.remoteInfo.name,t),u=this.wraperFactory(d,p);return a?await u():u}wraperFactory(e,t){function o(e,t){e&&"object"==typeof e&&Object.isExtensible(e)&&!Object.getOwnPropertyDescriptor(e,Symbol.for("mf_module_id"))&&Object.defineProperty(e,Symbol.for("mf_module_id"),{value:t,enumerable:!1})}return e instanceof Promise?async()=>{const n=await e();return o(n,t),n}:()=>{const n=e();return o(n,t),n}}constructor({remoteInfo:e,host:t}){this.inited=!1,this.lib=void 0,this.remoteInfo=e,this.host=t}};class qe{on(e){"function"==typeof e&&this.listeners.add(e)}once(e){const t=this;this.on((function o(...n){return t.remove(o),e.apply(null,n)}))}emit(...e){let t;return this.listeners.size>0&&this.listeners.forEach((o=>{t=o(...e)})),t}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new Set,e&&(this.type=e)}}class ze extends qe{emit(...e){let t;const o=Array.from(this.listeners);if(o.length>0){let n=0;const s=t=>!1!==t&&(n<o.length?Promise.resolve(o[n++].apply(null,e)).then(s):t);t=s()}return Promise.resolve(t)}}function Ge(e,t){if(!f(t))return!1;if(e!==t)for(const o in e)if(!(o in t))return!1;return!0}class We extends qe{emit(e){f(e)||c(`The data for the "${this.type}" hook should be an object.`);for(const t of this.listeners)try{const o=t(e);if(!Ge(e,o)){this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}e=o}catch(e){d(e),this.onerror(e)}return e}constructor(e){super(),this.onerror=c,this.type=e}}class Xe extends qe{emit(e){f(e)||c(`The response data for the "${this.type}" hook must be an object.`);const t=Array.from(this.listeners);if(t.length>0){let o=0;const n=t=>(d(t),this.onerror(t),e),s=r=>{if(Ge(e,r)){if(e=r,o<t.length)try{return Promise.resolve(t[o++](e)).then(s,n)}catch(e){return n(e)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return Promise.resolve(s(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=c,this.type=e}}class Ye{applyPlugin(e){var t;l((t=e,"[object Object]"===v.call(t)),"Plugin configuration is invalid.");const o=e.name;l(o,"A name must be provided by the plugin."),this.registerPlugins[o]||(this.registerPlugins[o]=e,Object.keys(this.lifecycle).forEach((t=>{const o=e[t];o&&this.lifecycle[t].on(o)})))}removePlugin(e){l(e,"A name is required.");const t=this.registerPlugins[e];l(t,`The plugin "${e}" is not registered.`),Object.keys(t).forEach((e=>{"name"!==e&&this.lifecycle[e].remove(t[e])}))}inherit({lifecycle:e,registerPlugins:t}){Object.keys(e).forEach((t=>{l(!this.lifecycle[t],`The hook "${t}" has a conflict and cannot be inherited.`),this.lifecycle[t]=e[t]})),Object.keys(t).forEach((e=>{l(!this.registerPlugins[e],`The plugin "${e}" has a conflict and cannot be inherited.`),this.applyPlugin(t[e])}))}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}}function Ke(e){return n._extends({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},e)}function Je(e,t,o,n=!0){const{cssAssets:r,jsAssetsWithoutEntry:a,entryAssets:i}=o;if(t.options.inBrowser){if(i.forEach((o=>{const{moduleInfo:n}=o,s=t.moduleCache.get(e.name);je(s?{origin:t,remoteInfo:n,remoteEntryExports:s.remoteEntryExports}:{origin:t,remoteInfo:n,remoteEntryExports:void 0})})),n){const e={rel:"preload",as:"style"};r.forEach((o=>{const{link:n,needAttach:r}=s.createLink({url:o,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n}});r&&document.head.appendChild(n)}))}else{const e={rel:"stylesheet",type:"text/css"};r.forEach((o=>{const{link:n,needAttach:r}=s.createLink({url:o,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n},needDeleteLink:!1});r&&document.head.appendChild(n)}))}if(n){const e={rel:"preload",as:"script"};a.forEach((o=>{const{link:n,needAttach:r}=s.createLink({url:o,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n}});r&&document.head.appendChild(n)}))}else{const o={fetchpriority:"high",type:"module"===(null==e?void 0:e.type)?"module":"text/javascript"};a.forEach((e=>{const{script:n,needAttach:r}=s.createScript({url:e,cb:()=>{},attrs:o,createScriptHook:(e,o)=>{const n=t.loaderHook.lifecycle.createScript.emit({url:e,attrs:o});if(n instanceof HTMLScriptElement)return n},needDeleteScript:!0});r&&document.head.appendChild(n)}))}}}function Ze(e,t){const o=g(t);o.url||c(`The attribute remoteEntry of ${e.name} must not be undefined.`);let n=s.getResourceUrl(t,o.url);s.isBrowserEnv()||n.startsWith("http")||(n=`https:${n}`),e.type=o.type,e.entryGlobalName=o.globalName,e.entry=n,e.version=t.version,e.buildVersion=t.buildVersion}function Qe(e){const t=e.split(":");return 1===t.length?{name:t[0],version:void 0}:2===t.length?{name:t[0],version:t[1]}:{name:t[1],version:t[2]}}function et(e,t,o,n,r={},a){const i=m(t),{value:l}=$(e,i),c=a||l;if(c&&!s.isManifestProvider(c)&&(o(c,t,n),c.remotesInfo)){const t=Object.keys(c.remotesInfo);for(const n of t){if(r[n])continue;r[n]=!0;const t=Qe(n),s=c.remotesInfo[n];et(e,{name:t.name,version:s.matchedVersion},o,!1,r,void 0)}}}const tt=(e,t)=>document.querySelector(`${e}[${"link"===e?"href":"src"}="${t}"]`);function ot(e,t,o,n,r){const a=[],i=[],l=[],c=new Set,d=new Set,{options:p}=e,{preloadConfig:m}=t,{depsRemote:u}=m;if(et(n,o,((t,o,n)=>{let r;if(n)r=m;else if(Array.isArray(u)){const e=u.find((e=>e.nameOrAlias===o.name||e.nameOrAlias===o.alias));if(!e)return;r=Ke(e)}else{if(!0!==u)return;r=m}const c=s.getResourceUrl(t,g(t).url);c&&l.push({name:o.name,moduleInfo:{name:o.name,entry:c,type:"remoteEntryType"in t?t.remoteEntryType:"global",entryGlobalName:"globalName"in t?t.globalName:o.name,shareScope:"",version:"version"in t?t.version:void 0},url:c});let d="modules"in t?t.modules:[];const p=(h=r.exposes)?h.map((e=>"."===e?e:e.startsWith("./")?e.replace("./",""):e)):[];var h,f;function v(e){const o=e.map((e=>s.getResourceUrl(t,e)));return r.filter?o.filter(r.filter):o}if(p.length&&"modules"in t&&(d=null==t||null==(f=t.modules)?void 0:f.reduce(((e,t)=>(-1!==(null==p?void 0:p.indexOf(t.moduleName))&&e.push(t),e)),[])),d){const n=d.length;for(let s=0;s<n;s++){const n=d[s],l=`${o.name}/${n.moduleName}`;e.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:"."===n.moduleName?o.name:l,name:o.name,remoteSnapshot:t,preloadConfig:r,remote:o,origin:e}),L(l)||("all"===r.resourceCategory?(a.push(...v(n.assets.css.async)),a.push(...v(n.assets.css.sync)),i.push(...v(n.assets.js.async)),i.push(...v(n.assets.js.sync))):(r.resourceCategory="sync")&&(a.push(...v(n.assets.css.sync)),i.push(...v(n.assets.js.sync))),F(l))}}}),!0,{},r),r.shared){const t=(t,o)=>{const n=Re(e.shareScopeMap,o.sharedName,t,e.sharedHandler.hooks.lifecycle.resolveShare);n&&"function"==typeof n.lib&&(o.assets.js.sync.forEach((e=>{c.add(e)})),o.assets.css.sync.forEach((e=>{d.add(e)})))};r.shared.forEach((e=>{var o;const n=null==(o=p.shared)?void 0:o[e.sharedName];if(!n)return;const s=e.version?n.find((t=>t.version===e.version)):n;s&&y(s).forEach((o=>{t(o,e)}))}))}const h=i.filter((e=>!c.has(e)&&!tt("script",e)));return{cssAssets:a.filter((e=>!d.has(e)&&!tt("link",e))),jsAssetsWithoutEntry:h,entryAssets:l.filter((e=>!tt("script",e.url)))}}function nt(e,t){const o=T({name:t.options.name,version:t.options.version}),n=o&&"remotesInfo"in o&&o.remotesInfo&&$(o.remotesInfo,e.name).value;return n&&n.matchedVersion?{hostGlobalSnapshot:o,globalSnapshot:V(),remoteSnapshot:T({name:e.name,version:n.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:V(),remoteSnapshot:T({name:e.name,version:"version"in e?e.version:void 0})}}class st{async loadSnapshot(e){const{options:t}=this.HostInstance,{hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:s}=this.getGlobalRemoteInfo(e),{remoteSnapshot:r,globalSnapshot:a}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:s});return{remoteSnapshot:r,globalSnapshot:a}}async loadRemoteSnapshotInfo(e){const{options:t}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:t,moduleInfo:e});let o=T({name:this.HostInstance.options.name,version:this.HostInstance.options.version});o||(o={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},R({[this.HostInstance.options.name]:o})),o&&"remotesInfo"in o&&!$(o.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(o.remotesInfo=n._extends({},null==o?void 0:o.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));const{hostGlobalSnapshot:a,remoteSnapshot:i,globalSnapshot:l}=this.getGlobalRemoteInfo(e),{remoteSnapshot:d,globalSnapshot:p}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:a,remoteSnapshot:i,globalSnapshot:l});let m,h;if(d)if(s.isManifestProvider(d)){const t=s.isBrowserEnv()?d.remoteEntry:d.ssrRemoteEntry||d.remoteEntry||"",o=await this.getManifestJson(t,e,{});m=o,h=M(n._extends({},e,{entry:t}),o)}else{const{remoteSnapshot:t}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:d,from:"global"});m=t,h=p}else if(u(e)){const t=await this.getManifestJson(e.entry,e,{}),o=M(e,t),{remoteSnapshot:n}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:t,from:"global"});m=n,h=o}else c(r.getShortErrorMsg(r.RUNTIME_007,r.runtimeDescMap,{hostName:e.name,hostVersion:e.version,globalSnapshot:JSON.stringify(p)}));return await this.hooks.lifecycle.afterLoadSnapshot.emit({options:t,moduleInfo:e,remoteSnapshot:m}),{remoteSnapshot:m,globalSnapshot:h}}getGlobalRemoteInfo(e){return nt(e,this.HostInstance)}async getManifestJson(e,t,o){const n=async()=>{let o=this.manifestCache.get(e);if(o)return o;try{let t=await this.loaderHook.lifecycle.fetch.emit(e,{});t&&t instanceof Response||(t=await fetch(e,{})),o=await t.json()}catch(n){o=await this.HostInstance.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:e,error:n,from:"runtime",lifecycle:"afterResolve",origin:this.HostInstance}),o||(delete this.manifestLoading[e],c(r.getShortErrorMsg(r.RUNTIME_003,r.runtimeDescMap,{manifestUrl:e,moduleName:t.name,hostName:this.HostInstance.options.name},`${n}`)))}return l(o.metaData&&o.exposes&&o.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,o),o};return this.manifestLoading[e]||(this.manifestLoading[e]=(async()=>{const o=await n(),r=s.generateSnapshotFromManifest(o,{version:e}),{remoteSnapshot:a}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:t,manifestJson:o,remoteSnapshot:r,manifestUrl:e,from:"manifest"});return a})().then((e=>e))),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new Ye({beforeLoadRemoteSnapshot:new ze("beforeLoadRemoteSnapshot"),loadSnapshot:new Xe("loadGlobalSnapshot"),loadRemoteSnapshot:new Xe("loadRemoteSnapshot"),afterLoadSnapshot:new Xe("afterLoadSnapshot")}),this.manifestLoading=k.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}class rt{registerShared(e,t){const{shareInfos:o,shared:n}=Ce(e,t);return Object.keys(o).forEach((e=>{o[e].forEach((o=>{!Re(this.shareScopeMap,e,o,this.hooks.lifecycle.resolveShare)&&o&&o.lib&&this.setShared({pkgName:e,lib:o.lib,get:o.get,loaded:!0,shared:o,from:t.name})}))})),{shareInfos:o,shared:n}}async loadShare(e,t){const{host:o}=this,n=Oe({pkgName:e,extraOptions:t,shareInfos:o.options.shared});(null==n?void 0:n.scope)&&await Promise.all(n.scope.map((async e=>{await Promise.all(this.initializeSharing(e,{strategy:n.strategy}))})));const s=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:n,shared:o.options.shared,origin:o}),{shareInfo:r}=s;l(r,`Cannot find ${e} Share in the ${o.options.name}. Please ensure that the ${e} Share parameters have been injected`);const a=Re(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare),i=e=>{e.useIn||(e.useIn=[]),p(e.useIn,o.options.name)};if(a&&a.lib)return i(a),a.lib;if(a&&a.loading&&!a.loaded){const e=await a.loading;return a.loaded=!0,a.lib||(a.lib=e),i(a),e}if(a){const t=(async()=>{const t=await a.get();r.lib=t,r.loaded=!0,i(r);const o=Re(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare);return o&&(o.lib=t,o.loaded=!0),t})();return this.setShared({pkgName:e,loaded:!1,shared:a,from:o.options.name,lib:null,loading:t}),t}{if(null==t?void 0:t.customShareInfo)return!1;const n=(async()=>{const t=await r.get();r.lib=t,r.loaded=!0,i(r);const o=Re(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare);return o&&(o.lib=t,o.loaded=!0),t})();return this.setShared({pkgName:e,loaded:!1,shared:r,from:o.options.name,lib:null,loading:n}),n}}initializeSharing(e=j,t){const{host:o}=this,n=null==t?void 0:t.from,s=null==t?void 0:t.strategy;let r=null==t?void 0:t.initScope;const a=[];if("build"!==n){const{initTokens:t}=this;r||(r=[]);let o=t[e];if(o||(o=t[e]={from:this.host.name}),r.indexOf(o)>=0)return a;r.push(o)}const i=this.shareScopeMap,l=o.options.name;i[e]||(i[e]={});const c=i[e];return Object.keys(o.options.shared).forEach((t=>{o.options.shared[t].forEach((o=>{o.scope.includes(e)&&((e,t)=>{var o;const{version:n,eager:s}=t;c[e]=c[e]||{};const r=c[e],a=r[n],i=Boolean(a&&(a.eager||(null==(o=a.shareConfig)?void 0:o.eager)));(!a||"loaded-first"!==a.strategy&&!a.loaded&&(Boolean(!s)!==!i?s:l>a.from))&&(r[n]=t)})(t,o)}))})),"version-first"!==o.options.shareStrategy&&"version-first"!==s||o.options.remotes.forEach((t=>{t.shareScope===e&&a.push((async t=>{const{module:n}=await o.remoteHandler.getRemoteModuleAndOptions({id:t});if(n.getEntry){let a;try{a=await n.getEntry()}catch(e){a=await o.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:t,error:e,from:"runtime",lifecycle:"beforeLoadShare",origin:o})}n.inited||(await(s=a,s&&s.init&&s.init(i[e],r)),n.inited=!0)}var s})(t.name))})),a}loadShareSync(e,t){const{host:o}=this,n=Oe({pkgName:e,extraOptions:t,shareInfos:o.options.shared});(null==n?void 0:n.scope)&&n.scope.forEach((e=>{this.initializeSharing(e,{strategy:n.strategy})}));const s=Re(this.shareScopeMap,e,n,this.hooks.lifecycle.resolveShare),a=e=>{e.useIn||(e.useIn=[]),p(e.useIn,o.options.name)};if(s){if("function"==typeof s.lib)return a(s),s.loaded||(s.loaded=!0,s.from===o.options.name&&(n.loaded=!0)),s.lib;if("function"==typeof s.get){const t=s.get();if(!(t instanceof Promise))return a(s),this.setShared({pkgName:e,loaded:!0,from:o.options.name,lib:t,shared:s}),t}}if(n.lib)return n.loaded||(n.loaded=!0),n.lib;if(n.get){const s=n.get();if(s instanceof Promise){const n="build"===(null==t?void 0:t.from)?r.RUNTIME_005:r.RUNTIME_006;throw new Error(r.getShortErrorMsg(n,r.runtimeDescMap,{hostName:o.options.name,sharedPkgName:e}))}return n.lib=s,this.setShared({pkgName:e,loaded:!0,from:o.options.name,lib:n.lib,shared:n}),n.lib}throw new Error(r.getShortErrorMsg(r.RUNTIME_006,r.runtimeDescMap,{hostName:o.options.name,sharedPkgName:e}))}initShareScopeMap(e,t,o={}){const{host:n}=this;this.shareScopeMap[e]=t,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:t,options:n.options,origin:n,scopeName:e,hostShareScopeMap:o.hostShareScopeMap})}setShared({pkgName:e,shared:t,from:o,lib:s,loading:r,loaded:a,get:i}){const{version:l,scope:c="default"}=t,d=n._object_without_properties_loose(t,["version","scope"]);(Array.isArray(c)?c:[c]).forEach((t=>{if(this.shareScopeMap[t]||(this.shareScopeMap[t]={}),this.shareScopeMap[t][e]||(this.shareScopeMap[t][e]={}),!this.shareScopeMap[t][e][l])return this.shareScopeMap[t][e][l]=n._extends({version:l,scope:["default"]},d,{lib:s,loaded:a,loading:r}),void(i&&(this.shareScopeMap[t][e][l].get=i));const o=this.shareScopeMap[t][e][l];r&&!o.loading&&(o.loading=r)}))}_setGlobalShareScopeMap(e){const t=De(),o=e.id||e.name;o&&!t[o]&&(t[o]=this.shareScopeMap)}constructor(e){this.hooks=new Ye({afterResolve:new Xe("afterResolve"),beforeLoadShare:new Xe("beforeLoadShare"),loadShare:new ze,resolveShare:new We("resolveShare"),initContainerShareScopeMap:new We("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(e.options)}}class at{formatAndRegisterRemote(e,t){return(t.remotes||[]).reduce(((e,t)=>(this.registerRemote(t,e,{force:!1}),e)),e.remotes)}setIdToRemoteMap(e,t){const{remote:o,expose:n}=t,{name:s,alias:r}=o;if(this.idToRemoteMap[e]={name:o.name,expose:n},r&&e.startsWith(s)){const t=e.replace(s,r);this.idToRemoteMap[t]={name:o.name,expose:n}}else if(r&&e.startsWith(r)){const t=e.replace(r,s);this.idToRemoteMap[t]={name:o.name,expose:n}}}async loadRemote(e,t){const{host:o}=this;try{const{loadFactory:n=!0}=t||{loadFactory:!0},{module:s,moduleOptions:r,remoteMatchInfo:a}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:i,remote:l,expose:c,id:d,remoteSnapshot:p}=a,m=await s.get(d,c,t,p),u=await this.hooks.lifecycle.onLoad.emit({id:d,pkgNameOrAlias:i,expose:c,exposeModule:n?m:void 0,exposeModuleFactory:n?void 0:m,remote:l,options:r,moduleInstance:s,origin:o});return this.setIdToRemoteMap(e,a),"function"==typeof u?u:m}catch(n){const{from:s="runtime"}=t||{from:"runtime"},r=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:n,from:s,lifecycle:"onLoad",origin:o});if(!r)throw n;return r}}async preloadRemote(e){const{host:t}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:t.options,origin:t});const o=(n=t.options.remotes,e.map((e=>{const t=function(e,t){for(const o of e){if(t===o.name)return o;if(o.alias&&t===o.alias)return o}}(n,e.nameOrAlias);return l(t,`Unable to preload ${e.nameOrAlias} as it is not included in ${!t&&s.safeToString({remoteInfo:t,remotes:n})}`),{remote:t,preloadConfig:Ke(e)}})));var n;await Promise.all(o.map((async e=>{const{remote:o}=e,n=Ue(o),{globalSnapshot:s,remoteSnapshot:r}=await t.snapshotHandler.loadRemoteSnapshotInfo(o),a=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:t,preloadOptions:e,remote:o,remoteInfo:n,globalSnapshot:s,remoteSnapshot:r});a&&Je(n,t,a)})))}registerRemotes(e,t){const{host:o}=this;e.forEach((e=>{this.registerRemote(e,o.options.remotes,{force:null==t?void 0:t.force})}))}async getRemoteModuleAndOptions(e){const{host:t}=this,{id:o}=e;let s;try{s=await this.hooks.lifecycle.beforeRequest.emit({id:o,options:t.options,origin:t})}catch(e){if(s=await this.hooks.lifecycle.errorLoadRemote.emit({id:o,options:t.options,origin:t,from:"runtime",error:e,lifecycle:"beforeRequest"}),!s)throw e}const{id:a}=s,i=Le(t.options.remotes,a);l(i,r.getShortErrorMsg(r.RUNTIME_004,r.runtimeDescMap,{hostName:t.options.name,requestId:a}));const{remote:c}=i,d=Ue(c),p=await t.sharedHandler.hooks.lifecycle.afterResolve.emit(n._extends({id:a},i,{options:t.options,origin:t,remoteInfo:d})),{remote:m,expose:u}=p;l(m&&u,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${a}.`);let h=t.moduleCache.get(m.name);const f={host:t,remoteInfo:d};return h||(h=new He(f),t.moduleCache.set(m.name,h)),{module:h,moduleOptions:f,remoteMatchInfo:p}}registerRemote(e,t,o){const{host:n}=this,r=()=>{if(e.alias){const o=t.find((t=>{var o;return e.alias&&(t.name.startsWith(e.alias)||(null==(o=t.alias)?void 0:o.startsWith(e.alias)))}));l(!o,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${o&&o.name} name or alias`)}"entry"in e&&s.isBrowserEnv()&&!e.entry.startsWith("http")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=j),e.type||(e.type=U)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:e,origin:n});const a=t.find((t=>t.name===e.name));if(a){const i=[`The remote "${e.name}" is already registered.`,"Please note that overriding it may cause unexpected errors."];(null==o?void 0:o.force)&&(this.removeRemote(a),r(),t.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n}),s.warn(i.join(" ")))}else r(),t.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n})}removeRemote(e){try{const{host:o}=this,{name:n}=e,r=o.options.remotes.findIndex((e=>e.name===n));-1!==r&&o.options.remotes.splice(r,1);const a=o.moduleCache.get(e.name);if(a){const n=a.remoteInfo,r=n.entryGlobalName;var t;E[r]&&((null==(t=Object.getOwnPropertyDescriptor(E,r))?void 0:t.configurable)?delete E[r]:E[r]=void 0);const i=Fe(a.remoteInfo);S[i]&&delete S[i],o.snapshotHandler.manifestCache.delete(n.entry);let l=n.buildVersion?s.composeKeyWithSeparator(n.name,n.buildVersion):n.name;const c=E.__FEDERATION__.__INSTANCES__.findIndex((e=>n.buildVersion?e.options.id===l:e.name===l));if(-1!==c){const e=E.__FEDERATION__.__INSTANCES__[c];l=e.options.id||l;const t=De();let o=!0;const s=[];Object.keys(t).forEach((e=>{const r=t[e];r&&Object.keys(r).forEach((t=>{const a=r[t];a&&Object.keys(a).forEach((r=>{const i=a[r];i&&Object.keys(i).forEach((a=>{const l=i[a];l&&"object"==typeof l&&l.from===n.name&&(l.loaded||l.loading?(l.useIn=l.useIn.filter((e=>e!==n.name)),l.useIn.length?o=!1:s.push([e,t,r,a])):s.push([e,t,r,a]))}))}))}))})),o&&(e.shareScopeMap={},delete t[l]),s.forEach((([e,o,n,s])=>{var r,a,i;null==(i=t[e])||null==(a=i[o])||null==(r=a[n])||delete r[s]})),E.__FEDERATION__.__INSTANCES__.splice(c,1)}const{hostGlobalSnapshot:d}=nt(e,o);if(d){const t=d&&"remotesInfo"in d&&d.remotesInfo&&$(d.remotesInfo,e.name).key;t&&(delete d.remotesInfo[t],Boolean(k.__FEDERATION__.__MANIFEST_LOADING__[t])&&delete k.__FEDERATION__.__MANIFEST_LOADING__[t])}o.moduleCache.delete(e.name)}}catch(e){i.log("removeRemote fail: ",e)}}constructor(e){this.hooks=new Ye({beforeRegisterRemote:new We("beforeRegisterRemote"),registerRemote:new We("registerRemote"),beforeRequest:new Xe("beforeRequest"),onLoad:new ze("onLoad"),handlePreloadModule:new qe("handlePreloadModule"),errorLoadRemote:new ze("errorLoadRemote"),beforePreloadRemote:new ze("beforePreloadRemote"),generatePreloadAssets:new ze("generatePreloadAssets"),afterPreloadRemote:new ze,loadEntry:new ze}),this.host=e,this.idToRemoteMap={}}}var it=Object.freeze({__proto__:null});Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(t,"loadScriptNode",{enumerable:!0,get:function(){return s.loadScriptNode}}),t.CurrentGlobal=E,t.FederationHost=class{initOptions(e){this.registerPlugins(e.plugins);const t=this.formatOptions(this.options,e);return this.options=t,t}async loadShare(e,t){return this.sharedHandler.loadShare(e,t)}loadShareSync(e,t){return this.sharedHandler.loadShareSync(e,t)}initializeSharing(e=j,t){return this.sharedHandler.initializeSharing(e,t)}initRawContainer(e,t,o){const n=Ue({name:e,entry:t}),s=new He({host:this,remoteInfo:n});return s.remoteEntryExports=o,this.moduleCache.set(e,s),s}async loadRemote(e,t){return this.remoteHandler.loadRemote(e,t)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,t,o={}){this.sharedHandler.initShareScopeMap(e,t,o)}formatOptions(e,t){const{shared:o}=Ce(e,t),{userOptions:s,options:r}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:t,options:e,shareInfo:o}),a=this.remoteHandler.formatAndRegisterRemote(r,s),{shared:i}=this.sharedHandler.registerShared(r,s),l=[...r.plugins];s.plugins&&s.plugins.forEach((e=>{l.includes(e)||l.push(e)}));const c=n._extends({},e,t,{plugins:l,remotes:a,shared:i});return this.hooks.lifecycle.init.emit({origin:this,options:c}),c}registerPlugins(e){const t=function(e,t){const o=P();return o.length>0&&o.forEach((t=>{(null==e?void 0:e.find((e=>e.name!==t.name)))&&e.push(t)})),e&&e.length>0&&e.forEach((e=>{t.forEach((t=>{t.applyPlugin(e)}))})),e}(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook,this.bridgeHook]);this.options.plugins=this.options.plugins.reduce(((e,t)=>t?(e&&!e.find((e=>e.name===t.name))&&e.push(t),e):e),t||[])}registerRemotes(e,t){return this.remoteHandler.registerRemotes(e,t)}constructor(e){this.hooks=new Ye({beforeInit:new We("beforeInit"),init:new qe,beforeInitContainer:new Xe("beforeInitContainer"),initContainer:new Xe("initContainer")}),this.version="0.11.4",this.moduleCache=new Map,this.loaderHook=new Ye({getModuleInfo:new qe,createScript:new qe,createLink:new qe,fetch:new ze,loadEntryError:new ze,getModuleFactory:new ze}),this.bridgeHook=new Ye({beforeBridgeRender:new qe,afterBridgeRender:new qe,beforeBridgeDestroy:new qe,afterBridgeDestroy:new qe});const t={id:"3d.editor:0.0.1",name:e.name,plugins:[{name:"snapshot-plugin",async afterResolve(e){const{remote:t,pkgNameOrAlias:o,expose:s,origin:r,remoteInfo:a}=e;if(!u(t)||!h(t)){const{remoteSnapshot:i,globalSnapshot:l}=await r.snapshotHandler.loadRemoteSnapshotInfo(t);Ze(a,i);const c={remote:t,preloadConfig:{nameOrAlias:o,exposes:[s],resourceCategory:"sync",share:!1,depsRemote:!1}},d=await r.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:r,preloadOptions:c,remoteInfo:a,remote:t,remoteSnapshot:i,globalSnapshot:l});return d&&Je(a,r,d,!1),n._extends({},e,{remoteSnapshot:i})}return e}},{name:"generate-preload-assets-plugin",async generatePreloadAssets(e){const{origin:t,preloadOptions:o,remoteInfo:n,remote:r,globalSnapshot:a,remoteSnapshot:i}=e;return s.isBrowserEnv()?u(r)&&h(r)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:r.name,url:r.entry,moduleInfo:{name:n.name,entry:r.entry,type:n.type||"global",entryGlobalName:"",shareScope:""}}]}:(Ze(n,i),ot(t,o,n,a,i)):{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[]}}}],remotes:[],shared:{},inBrowser:s.isBrowserEnv()};this.name=e.name,this.options=t,this.snapshotHandler=new st(this),this.sharedHandler=new rt(this),this.remoteHandler=new at(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...t.plugins,...e.plugins||[]]),this.options=this.formatOptions(t,e)}},t.Global=k,t.Module=He,t.addGlobalSnapshot=R,t.assert=l,t.getGlobalFederationConstructor=C,t.getGlobalSnapshot=V,t.getInfoWithoutType=$,t.getRegisteredShare=Re,t.getRemoteEntry=je,t.getRemoteInfo=Ue,t.helpers=Pe,t.isStaticResourcesEqual=function(e,t){const o=/^(https?:)?\/\//i;return e.replace(o,"").replace(/\/$/,"")===t.replace(o,"").replace(/\/$/,"")},t.matchRemoteWithNameAndExpose=Le,t.registerGlobalPlugins=O,t.resetFederationGlobalInfo=x,t.safeWrapper=async function(e,t){try{return await e()}catch(e){return void(!t&&d(e))}},t.satisfy=Be,t.setGlobalFederationConstructor=I,t.setGlobalFederationInstance=B,t.types=it},409:(e,t)=>{function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},o.apply(this,arguments)}t._extends=o},421:(__unused_webpack_module,exports,__webpack_require__)=>{var polyfills=__webpack_require__(409);const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation",MFPrefetchCommon={identifier:"MFDataPrefetch",globalKey:"__PREFETCH__",library:"mf-data-prefetch",exportsKey:"__PREFETCH_EXPORTS__",fileName:"bootstrap.js"};var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return"undefined"!=typeof window&&void 0!==window.document}function isReactNativeEnv(){var e;return"undefined"!=typeof navigator&&"ReactNative"===(null==(e=navigator)?void 0:e.product)}function isBrowserDebug(){try{if(isBrowserEnv()&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch(e){return!1}return!1}function isDebugMode(){return"undefined"!=typeof process&&process.env&&process.env.FEDERATION_DEBUG?Boolean(process.env.FEDERATION_DEBUG):!("undefined"==typeof FEDERATION_DEBUG||!Boolean(FEDERATION_DEBUG))||isBrowserDebug()}const getProcessEnv=function(){return"undefined"!=typeof process&&process.env?process.env:{}},LOG_CATEGORY="[ Federation Runtime ]",parseEntry=(e,t,o=SEPARATOR)=>{const n=e.split(o),s="development"===getProcessEnv().NODE_ENV&&t,r=e=>e.startsWith("http")||e.includes(MANIFEST_EXT);if(n.length>=2){let[t,...a]=n;e.startsWith(o)&&(t=n.slice(0,2).join(o),a=[s||n.slice(2).join(o)]);let i=s||a.join(o);return r(i)?{name:t,entry:i}:{name:t,version:i||"*"}}if(1===n.length){const[e]=n;return s&&r(s)?{name:e,entry:s}:{name:e,version:s||"*"}}throw`Invalid entry value: ${e}`},composeKeyWithSeparator=function(...e){return e.length?e.reduce(((e,t)=>t?e?`${e}${SEPARATOR}${t}`:t:e),""):""},encodeName=function(e,t="",o=!1){try{const n=o?".js":"";return`${t}${e.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${n}`}catch(e){throw e}},decodeName=function(e,t,o){try{let n=e;if(t){if(!n.startsWith(t))return n;n=n.replace(new RegExp(t,"g"),"")}return n=n.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),o&&(n=n.replace(".js","")),n}catch(e){throw e}},generateExposeFilename=(e,t)=>{if(!e)return"";let o=e;return"."===o&&(o="default_export"),o.startsWith("./")&&(o=o.replace("./","")),encodeName(o,"__federation_expose_",t)},generateShareFilename=(e,t)=>e?encodeName(e,"__federation_shared_",t):"",getResourceUrl=(e,t)=>{if("getPublicPath"in e){let o;return o=e.getPublicPath.startsWith("function")?new Function("return "+e.getPublicPath)()():new Function(e.getPublicPath)(),`${o}${t}`}return"publicPath"in e?isBrowserEnv()||isReactNativeEnv()||!("ssrPublicPath"in e)?`${e.publicPath}${t}`:`${e.ssrPublicPath}${t}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,t),"")},assert=(e,t)=>{e||error(t)},error=e=>{throw new Error(`${LOG_CATEGORY}: ${e}`)},warn=e=>{console.warn(`${LOG_CATEGORY}: ${e}`)};function safeToString(e){try{return JSON.stringify(e,null,2)}catch(e){return""}}const VERSION_PATTERN_REGEXP=/^([\d^=v<>~]|[*xX]$)/;function isRequiredVersion(e){return VERSION_PATTERN_REGEXP.test(e)}const simpleJoinRemoteEntry=(e,t)=>{if(!e)return t;const o=(e=>{if("."===e)return"";if(e.startsWith("./"))return e.replace("./","");if(e.startsWith("/")){const t=e.slice(1);return t.endsWith("/")?t.slice(0,-1):t}return e})(e);return o?o.endsWith("/")?`${o}${t}`:`${o}/${t}`:t};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,t={}){var o,n;const{remotes:s={},overrides:r={},version:a}=t;let i;const l=()=>"publicPath"in e.metaData?"auto"===e.metaData.publicPath&&a?inferAutoPublicPath(a):e.metaData.publicPath:e.metaData.getPublicPath,c=Object.keys(r);let d={};var p;Object.keys(s).length||(d=(null==(p=e.remotes)?void 0:p.reduce(((e,t)=>{let o;const n=t.federationContainerName;return o=c.includes(n)?r[n]:"version"in t?t.version:t.entry,e[n]={matchedVersion:o},e}),{}))||{}),Object.keys(s).forEach((e=>d[e]={matchedVersion:c.includes(e)?r[e]:s[e]}));const{remoteEntry:{path:m,name:u,type:h},types:f,buildInfo:{buildVersion:v},globalName:y,ssrRemoteEntry:g}=e.metaData,{exposes:E}=e;let b={version:a||"",buildVersion:v,globalName:y,remoteEntry:simpleJoinRemoteEntry(m,u),remoteEntryType:h,remoteTypes:simpleJoinRemoteEntry(f.path,f.name),remoteTypesZip:f.zip||"",remoteTypesAPI:f.api||"",remotesInfo:d,shared:null==e?void 0:e.shared.map((e=>({assets:e.assets,sharedName:e.name,version:e.version}))),modules:null==E?void 0:E.map((e=>({moduleName:e.name,modulePath:e.path,assets:e.assets})))};if(null==(o=e.metaData)?void 0:o.prefetchInterface){const t=e.metaData.prefetchInterface;b=polyfills._extends({},b,{prefetchInterface:t})}if(null==(n=e.metaData)?void 0:n.prefetchEntry){const{path:t,name:o,type:n}=e.metaData.prefetchEntry;b=polyfills._extends({},b,{prefetchEntry:simpleJoinRemoteEntry(t,o),prefetchEntryType:n})}if(i="publicPath"in e.metaData?polyfills._extends({},b,{publicPath:l(),ssrPublicPath:e.metaData.ssrPublicPath}):polyfills._extends({},b,{getPublicPath:l()}),g){const e=simpleJoinRemoteEntry(g.path,g.name);i.ssrRemoteEntry=e,i.ssrRemoteEntryType=g.type||"commonjs-module"}return i}function isManifestProvider(e){return!(!("remoteEntry"in e)||!e.remoteEntry.includes(MANIFEST_EXT))}const PREFIX="[ Module Federation ]";let Logger=class{setPrefix(e){this.prefix=e}log(...e){console.log(this.prefix,...e)}warn(...e){console.log(this.prefix,...e)}error(...e){console.log(this.prefix,...e)}success(...e){console.log(this.prefix,...e)}info(...e){console.log(this.prefix,...e)}ready(...e){console.log(this.prefix,...e)}debug(...e){isDebugMode()&&console.log(this.prefix,...e)}constructor(e){this.prefix=e}};function createLogger(e){return new Logger(e)}const logger=createLogger(PREFIX);async function safeWrapper(e,t){try{return await e()}catch(e){return void(!t&&warn(e))}}function isStaticResourcesEqual(e,t){const o=/^(https?:)?\/\//i;return e.replace(o,"").replace(/\/$/,"")===t.replace(o,"").replace(/\/$/,"")}function createScript(e){let t,o=null,n=!0,s=2e4;const r=document.getElementsByTagName("script");for(let t=0;t<r.length;t++){const s=r[t],a=s.getAttribute("src");if(a&&isStaticResourcesEqual(a,e.url)){o=s,n=!1;break}}if(!o){const t=e.attrs;let n;o=document.createElement("script"),o.type="module"===(null==t?void 0:t.type)?"module":"text/javascript",e.createScriptHook&&(n=e.createScriptHook(e.url,e.attrs),n instanceof HTMLScriptElement?o=n:"object"==typeof n&&("script"in n&&n.script&&(o=n.script),"timeout"in n&&n.timeout&&(s=n.timeout))),o.src||(o.src=e.url),t&&!n&&Object.keys(t).forEach((e=>{o&&("async"===e||"defer"===e?o[e]=t[e]:o.getAttribute(e)||o.setAttribute(e,t[e]))}))}const a=async(n,s)=>{clearTimeout(t);const r=()=>{"error"===(null==s?void 0:s.type)?(null==e?void 0:e.onErrorCallback)&&(null==e||e.onErrorCallback(s)):(null==e?void 0:e.cb)&&(null==e||e.cb())};if(o&&(o.onerror=null,o.onload=null,safeWrapper((()=>{const{needDeleteScript:t=!0}=e;t&&(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o)})),n&&"function"==typeof n)){const e=n(s);if(e instanceof Promise){const t=await e;return r(),t}return r(),e}r()};return o.onerror=a.bind(null,o.onerror),o.onload=a.bind(null,o.onload),t=setTimeout((()=>{a(null,new Error(`Remote script "${e.url}" time-outed.`))}),s),{script:o,needAttach:n}}function createLink(e){let t=null,o=!0;const n=document.getElementsByTagName("link");for(let s=0;s<n.length;s++){const r=n[s],a=r.getAttribute("href"),i=r.getAttribute("rel");if(a&&isStaticResourcesEqual(a,e.url)&&i===e.attrs.rel){t=r,o=!1;break}}if(!t){let o;t=document.createElement("link"),t.setAttribute("href",e.url);const n=e.attrs;e.createLinkHook&&(o=e.createLinkHook(e.url,n),o instanceof HTMLLinkElement&&(t=o)),n&&!o&&Object.keys(n).forEach((e=>{t&&!t.getAttribute(e)&&t.setAttribute(e,n[e])}))}const s=(o,n)=>{const s=()=>{"error"===(null==n?void 0:n.type)?(null==e?void 0:e.onErrorCallback)&&(null==e||e.onErrorCallback(n)):(null==e?void 0:e.cb)&&(null==e||e.cb())};if(t&&(t.onerror=null,t.onload=null,safeWrapper((()=>{const{needDeleteLink:o=!0}=e;o&&(null==t?void 0:t.parentNode)&&t.parentNode.removeChild(t)})),o)){const e=o(n);return s(),e}s()};return t.onerror=s.bind(null,t.onerror),t.onload=s.bind(null,t.onload),{link:t,needAttach:o}}function loadScript(e,t){const{attrs:o={},createScriptHook:n}=t;return new Promise(((t,s)=>{const{script:r,needAttach:a}=createScript({url:e,cb:t,onErrorCallback:s,attrs:polyfills._extends({fetchpriority:"high"},o),createScriptHook:n,needDeleteScript:!0});a&&document.head.appendChild(r)}))}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then((e=>e)).catch((t=>{throw console.error(`Error importing module ${e}:`,t),t}))}const loadNodeFetch=async()=>{const e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,t,o)=>{const n=await((e,t)=>o.lifecycle.fetch.emit(e,t))(e,t||{});return n&&n instanceof Response?n:("undefined"==typeof fetch?await loadNodeFetch():fetch)(e,t||{})};function createScriptNode(url,cb,attrs,loaderHook){if(null==loaderHook?void 0:loaderHook.createScriptHook){const e=loaderHook.createScriptHook(url);e&&"object"==typeof e&&"url"in e&&(url=e.url)}let urlObj;try{urlObj=new URL(url)}catch(e){return console.error("Error constructing URL:",e),void cb(new Error(`Invalid URL: ${e}`))}const getFetch=async()=>(null==loaderHook?void 0:loaderHook.fetch)?(e,t)=>lazyLoaderHookFetch(e,t,loaderHook):"undefined"==typeof fetch?loadNodeFetch():fetch,handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}\n})`,{filename,importModuleDynamically:null!=(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=null==(_vm_constants=vm.constants)?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const e=exportedInterface[attrs.globalName]||exportedInterface;return void cb(void 0,e)}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}};getFetch().then((async e=>{if("esm"===(null==attrs?void 0:attrs.type)||"module"===(null==attrs?void 0:attrs.type))return loadModule(urlObj.href,{fetch:e,vm:await importNodeModule("vm")}).then((async e=>{await e.evaluate(),cb(void 0,e.namespace)})).catch((e=>{cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}));handleScriptFetch(e,urlObj)})).catch((e=>{cb(e)}))}function loadScriptNode(e,t){return new Promise(((o,n)=>{createScriptNode(e,((e,s)=>{if(e)n(e);else{var r,a;const e=(null==t||null==(r=t.attrs)?void 0:r.globalName)||`__FEDERATION_${null==t||null==(a=t.attrs)?void 0:a.name}:custom__`,n=globalThis[e]=s;o(n)}}),t.attrs,t.loaderHook)}))}async function loadModule(e,t){const{fetch:o,vm:n}=t,s=await o(e),r=await s.text(),a=new n.SourceTextModule(r,{importModuleDynamically:async(o,n)=>loadModule(new URL(o,e).href,t)});return await a.link((async o=>{const n=new URL(o,e).href;return await loadModule(n,t)})),a}function normalizeOptions(e,t,o){return function(n){if(!1===n)return!1;if(void 0===n)return!!e&&t;if(!0===n)return t;if(n&&"object"==typeof n)return polyfills._extends({},t,n);throw new Error(`Unexpected type for \`${o}\`, expect boolean/undefined/object, got: ${typeof n}`)}}exports.BROWSER_LOG_KEY=BROWSER_LOG_KEY,exports.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE,exports.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX,exports.EncodedNameTransformMap=EncodedNameTransformMap,exports.FederationModuleManifest=FederationModuleManifest,exports.MANIFEST_EXT=MANIFEST_EXT,exports.MFModuleType=MFModuleType,exports.MFPrefetchCommon=MFPrefetchCommon,exports.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER,exports.ManifestFileName=ManifestFileName,exports.NameTransformMap=NameTransformMap,exports.NameTransformSymbol=NameTransformSymbol,exports.SEPARATOR=SEPARATOR,exports.StatsFileName=StatsFileName,exports.TEMP_DIR=TEMP_DIR,exports.assert=assert,exports.composeKeyWithSeparator=composeKeyWithSeparator,exports.containerPlugin=ContainerPlugin,exports.containerReferencePlugin=ContainerReferencePlugin,exports.createLink=createLink,exports.createLogger=createLogger,exports.createScript=createScript,exports.createScriptNode=createScriptNode,exports.decodeName=decodeName,exports.encodeName=encodeName,exports.error=error,exports.generateExposeFilename=generateExposeFilename,exports.generateShareFilename=generateShareFilename,exports.generateSnapshotFromManifest=generateSnapshotFromManifest,exports.getProcessEnv=getProcessEnv,exports.getResourceUrl=getResourceUrl,exports.inferAutoPublicPath=inferAutoPublicPath,exports.isBrowserEnv=isBrowserEnv,exports.isDebugMode=isDebugMode,exports.isManifestProvider=isManifestProvider,exports.isReactNativeEnv=isReactNativeEnv,exports.isRequiredVersion=isRequiredVersion,exports.isStaticResourcesEqual=isStaticResourcesEqual,exports.loadScript=loadScript,exports.loadScriptNode=loadScriptNode,exports.logger=logger,exports.moduleFederationPlugin=ModuleFederationPlugin,exports.normalizeOptions=normalizeOptions,exports.parseEntry=parseEntry,exports.safeToString=safeToString,exports.safeWrapper=safeWrapper,exports.sharePlugin=SharePlugin,exports.simpleJoinRemoteEntry=simpleJoinRemoteEntry,exports.warn=warn},448:(e,t)=>{t.FEDERATION_SUPPORTED_TYPES=["script"]},683:(e,t,o)=>{var n=o(361);t.getGlobalFederationInstance=function(e,t){return n.CurrentGlobal.__FEDERATION__.__INSTANCES__.find((o=>"3d.editor:0.0.1"===o.options.id||o.options.name===e&&!o.options.version&&!t||!(o.options.name!==e||!t||o.options.version!==t)))}},762:(e,t,o)=>{var n=o(870);if(!o.federation.runtime){var s=o.federation;for(var r in o.federation={},n)o.federation[r]=n[r];for(var r in s)o.federation[r]=s[r]}o.federation.instance||(o.federation.instance=o.federation.runtime.init(o.federation.initOptions),o.federation.attachShareScopeMap&&o.federation.attachShareScopeMap(o),o.federation.installInitialConsumes&&o.federation.installInitialConsumes(),!o.federation.isMFRemote&&o.federation.prefetch&&o.federation.prefetch())},853:(e,t,o)=>{var n={};o.r(n),o.d(n,{ActionsLib:()=>St,AssetEdit:()=>Kr,BoolEdit:()=>Ns,CustomInput:()=>Yn,EditColor:()=>ur,EulerBlock:()=>sr,ExpandedButton:()=>on,ExtMenu:()=>zn,FloatInput:()=>Os,FloatValue:()=>js,Icon:()=>an,Importer:()=>aa,Int:()=>Is,ItemsLib:()=>xr,Label:()=>vr,LabelEdit:()=>cr,Modal:()=>hn,ModuleEdit:()=>Dr,PopupList:()=>yn,Selectable:()=>vs,SimpleButton:()=>kn,SlideBlock:()=>ns,SlideScroller:()=>jn,Spinner:()=>Cn,Toast:()=>Rn,Toasts:()=>Vn,ToggleButton:()=>Nn,TreeLi:()=>cs,V3:()=>Ws,V3block:()=>Zs,params:()=>Ts,queryform:()=>ts,vlist:()=>_s});var s={};o.r(s),o.d(s,{actions:()=>Va,app:()=>Qa,assets:()=>Ma,elements:()=>La,engine:()=>Ca,events:()=>ei,inspector:()=>ni,modal:()=>Ea,modules:()=>wa,selection:()=>Da,slides:()=>Ha,toasts:()=>va});var r=o(655);const a={class:"app-container canvas-container"},i={id:"editorcanvas",ref:"editorcanvas"},l={id:"playcanvas",ref:"playcanvas"},c={class:"absoluteClass",style:{"pointer-events":"none"},ref:"uiroot"},d={class:"container"},p=["onClick"],m={key:0},u={class:"element"},h=["innerHTML"],f=["onClick"],v={key:0},y={class:"panel-container"},g={class:"panel"},E={class:"header"},b={class:"content"},k={class:"footer"},_={methods:{closeModal(){this.$app.project.assets[1].url="gltf|assets/hex.glb"}},props:{header:{type:Object,default:{label:""}},footer:{type:Object,default:{}}},data:()=>({visible:{heirarhy:!0}})};var w=o(262);const S=(0,w.A)(_,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",y,[(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",E,[(0,r.renderSlot)(e.$slots,"header")]),(0,r.createElementVNode)("div",b,[(0,r.renderSlot)(e.$slots,"default")]),(0,r.createElementVNode)("div",k,[(0,r.renderSlot)(e.$slots,"footer")])])])}]]),N={class:"slide-scroller",ref:"scroller"},x=["onClick"],B={class:"title"},C={class:"overflow"},I={props:{slides:{type:Array,required:!0},slide:{type:Object}},data:()=>({newslideform:!1,slideData:{name:{label:"Имя",value:""}},translateX:0}),mounted(){this.centerSelectedImage()},watch:{slide(){this.centerSelectedImage()}},methods:{addSlide(){this.$app.modal.open({header:{value:"Новый слайд",handler:()=>{this.$app.modal.close(),this.newslideform=!1}},content:{},footer:{handler:()=>{this.$app.modal.close(),this.newslideform=!1,this.$app.slides.createSlide({name:this.slideData.name.value})}}}),this.newslideform=!0},selectSlide(e){this.$app.slides.goto(e.uid)},centerSelectedImage(){this.$nextTick((()=>{const e=this.$refs.scroller.offsetWidth,t=this.$refs.scroller.querySelector(".slide-item.selected");if(t){const o=t.offsetWidth,n=t.offsetLeft;this.translateX=-(n-e/2+o/2)}}))}}},$=(0,w.A)(I,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveComponent)("queryform"),c=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",N,[(0,r.createElementVNode)("div",{class:"slide-container",style:(0,r.normalizeStyle)({transform:`translateX(${s.translateX}px)`})},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.slides,((e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:(0,r.normalizeClass)(["slide-item",{selected:e===o.slide}]),onClick:t=>a.selectSlide(e)},[(0,r.createElementVNode)("div",B,(0,r.toDisplayString)(e.name),1),t[2]||(t[2]=(0,r.createElementVNode)("img",{src:"contents/cardbg.png",alt:"Image"},null,-1))],10,x)))),128)),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"slide-item",onClick:t[0]||(t[0]=e=>a.addSlide())},[t[3]||(t[3]=(0,r.createElementVNode)("img",{src:"contents/cardbg.png",alt:"Image"},null,-1)),(0,r.createElementVNode)("div",C,[(0,r.createVNode)(i,{value:"plus",size:"1em"})])])),[[c,"Add slide"]])],4),s.newslideform?((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{key:0,to:".modal-content"},[(0,r.createVNode)(l,{"onUpdate:values":t[1]||(t[1]=e=>s.slideData=e),values:s.slideData},null,8,["values"])])):(0,r.createCommentVNode)("v-if",!0)],512)}],["__scopeId","data-v-66185c6e"]]),V={class:"panel-container"},A={class:"panel"},T={key:0,class:"content"},M={class:"elements"},R={data:()=>({visible:!1})},D=(0,w.A)(R,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",V,[(0,r.createElementVNode)("div",A,[(0,r.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>s.visible=!s.visible),class:"header"},"Hierarhy"),s.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",T,[(0,r.createElementVNode)("div",M,[(0,r.renderSlot)(e.$slots,"default",{},void 0,!0)])])):(0,r.createCommentVNode)("v-if",!0)])])}],["__scopeId","data-v-e71891a0"]]),O={key:0,class:"element"},P={class:"blockcontent"},L={key:1,class:"label"},F={name:"NameEditor",props:{selected:{type:Object},label:{type:String}},methods:{onChangeName(e){this.selected.name=e}}},j=(0,w.A)(F,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("LabelEdit");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(i,{label:o.label,"onUpdate:value":t[0]||(t[0]=e=>a.onChangeName(e)),value:o.selected.name||o.selected.model?.name||o.selected.uid},null,8,["label","value"])])}]]),U={style:{display:"grid","grid-template-columns":"96px 1fr"}},H=["value"],q={key:1},z={name:"ModelTypes",data:()=>({types:["model","camera","chart3d"]}),props:{selected:{type:Object}}},G=(0,w.A)(z,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",U,[t[1]||(t[1]=(0,r.createElementVNode)("div",null,"Тип:",-1)),s.types.includes(o.selected.type)?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("select",{key:0,class:"typeslist","onUpdate:modelValue":t[0]||(t[0]=e=>o.selected.type=e)},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s.types,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{value:e},(0,r.toDisplayString)(e),9,H)))),256))],512)),[[r.vModelSelect,o.selected.type]]):((0,r.openBlock)(),(0,r.createElementBlock)("div",q,(0,r.toDisplayString)(o.selected.type),1))])}]]),W={class:"transform-container"},X={class:"label"},Y={key:0,class:"transforms"},K={key:1},J={key:3},Z={key:5};var Q=o(125),ee=o(24),te=o(0);function oe(e){return 180*e/Math.PI}function ne(e){return e*Math.PI/180}let se,re,ae;class ie{static FocusTo(e){se.target.copy(e.isObject3D?e.position:e)}static MoveTo(e,t){const o={position:new Q.Vector3,time:1e3,...e,control:!1},n={position:new Q.Vector3,time:1e3,...t,control:!1};se.enabled=!1;const s=Workspace.Camera.position.clone(),r=se.target.clone();o.control=o.time>n.time,n.control=n.time>=o.time;const a=new Tween(s).to(o.position,o.time).easing(Easing.Quadratic.InOut).onUpdate((()=>{Workspace.Camera.position.copy(s),Workspace.Camera.updateProjectionMatrix(),se.update()})).onComplete((()=>{o.control&&(se.enabled=!0),tweengroup.remove(a)})).start(),i=new Tween(r).to(n.position,n.time).easing(Easing.Quadratic.InOut).onUpdate((()=>{se.target.copy(r),se.getPolarAngle()>se.maxPolarAngle&&se.target.setY(center.y+Math.cos(se.maxPolarAngle)*distance)})).onComplete((()=>{n.control&&(se.enabled=!0),tweengroup.remove(i)})).start();tweengroup.add(a,i)}static SetState(e){se.enabled=e}static Init({canvas:e},t,o){ae=t,se=new ee.N(t,e),se.enabled=!0,se.enableDamping=!0,se.dampingFactor=.25,se.screenSpacePanning=!1,se.minDistance=.01,se.maxDistance=500,re=new te.ZU(t,e),re.addEventListener("dragging-changed",(e=>{se.enabled=!e.value}));const n=re.getHelper();o.add(n),re.getRaycaster().layers.set(1),n.traverse((e=>{e.layers.set(1)})),window.addEventListener("keydown",(e=>{switch(se.enabled=!e.ctrlKey,e.code){case"KeyQ":re.setSpace("local"===re.space?"world":"local");break;case"Shift":re.setTranslationSnap(1),re.setRotationSnap(Q.MathUtils.degToRad(15)),re.setScaleSnap(.25);break;case"KeyW":re.setMode("translate");break;case"KeyE":re.setMode("rotate");break;case"KeyR":re.setMode("scale");break;case"KeyF":re.object&&function(e){if(!e.object)return void console.warn("Нет выбранного объекта в TransformControls!");const t=e.object,o=new Q.Box3;t.traverse((e=>{o.expandByObject(e)}));const n=new Q.Sphere;o.getBoundingSphere(n),ie.FitTo(n)}(re);break;case"KeyC":case"KeyV":break;case"+":case"=":re.setSize(re.size+.1);break;case"-":case"_":re.setSize(Math.max(re.size-.1,.1));break;case"KeyX":re.showX=!re.showX;break;case"KeyY":re.showY=!re.showY;break;case"KeyZ":re.showZ=!re.showZ;break;case" ":re.enabled=!re.enabled;break;case"Escape":re.reset()}})),window.addEventListener("keyup",(e=>{se.enabled=!e.ctrlKey,"Shift"===e.key&&(re.setTranslationSnap(null),re.setRotationSnap(null),re.setScaleSnap(null))}))}static get Transformer(){return re}static Select(e){e?re.attach(e):re.detach()}static Update(e){se.update(e)}static FitTo({center:e,radius:t}){const o=ne(ae.fov),n=t/Math.sin(o/2),s=(new Q.Vector3).subVectors(ae.position,e).normalize(),r=e.clone().add(s.multiplyScalar(n));ae.position.clone(),se.enabled=!1,se.target.clone(),function(e,t,o=1){const n=o,s=ae.position.clone(),r=se.target.clone(),a=Date.now();!function o(){const i=(Date.now()-a)/(1e3*n);if(i>=1)return ae.position.copy(e),se.target.copy(t),void se.update();ae.position.lerpVectors(s,e,i),se.target.lerpVectors(r,t,i),se.update(),requestAnimationFrame(o)}()}(r,e,.5)}}const le=ie,ce={data:()=>({expanded:!0}),props:{selected:{type:Object,default:null}},computed:{model(){return this.selected.model},values(){return this.selected.data},state(){return this.selected.state}},watch:{selected:{handler(e,t){t&&this.restoreModelTransform(t),this.applyModelTransform(e)}}},beforeUnmount(){this.selected&&(this.restoreModelTransform(this.selected),le.Transformer.removeEventListener("objectChange",this.onTransformerEvent))},mounted(){le.Transformer.addEventListener("objectChange",this.onTransformerEvent),this.applyModelTransform(this.selected)},methods:{restoreModelTransform(e){e.state&&e.isState&&e.state.activate()},applyModelTransform(e){e.data.position&&e.model.position.copy(e.data.position),e.data.rotation&&e.model.rotation.setFromVector3(e.data.rotation,"XYZ"),e.data.scale&&e.model.scale.copy(e.data.scale)},assignFromModel(e){this.selected.data[e]=this.selected.model[e].clone(),this.selected[e]=this.selected.data[e].clone()},onTransformerEvent(e){const t=le.Transformer.object;switch(le.Transformer.mode){case"translate":this.selected.data.position||this.assignFromModel("position"),this.selected.position.copy(t.model.position),this.selected.data.position=this.selected.position.clone();break;case"rotate":this.selected.data.rotation||this.assignFromModel("rotation"),this.selected.rotation.copy(t.model.rotation),this.selected.data.rotation={x:this.selected.rotation.x,y:this.selected.rotation.y,z:this.selected.rotation.z};break;case"scale":this.selected.scale||this.assignFromModel("scale"),this.selected.scale.copy(t.model.scale),this.selected.data.scale=this.selected.scale.clone()}this.$emit("modify")},async onChangeTransform(e,t){switch(e){case"position":this.selected.data.position||this.assignFromModel("position"),this.selected.position.copy(t),this.selected.data.position=this.selected.position.clone(),this.selected.model.position.copy(t);break;case"rotation":this.selected.rotation||(this.selected.rotation=new Q.Euler),this.selected.rotation.setFromVector3(t),this.selected.model.rotation.copy(this.selected.rotation);break;case"scale":this.selected.scale||(this.selected.scale=new Q.Vector3),this.selected.scale.copy(t),this.selected.model.scale.copy(this.selected.scale)}this.$emit("modify")}}},de=(0,w.A)(ce,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveComponent)("V3block"),c=(0,r.resolveComponent)("EulerBlock"),d=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",W,[(0,r.createElementVNode)("div",X,[(0,r.createElementVNode)("div",{class:"title",onClick:t[0]||(t[0]=e=>s.expanded=!s.expanded)},(0,r.toDisplayString)(s.expanded?"▼":"▶")+" Трансформ:",1),(0,r.createCommentVNode)("v-if",!0)]),s.expanded?((0,r.openBlock)(),(0,r.createElementBlock)("div",Y,[o.selected.position?((0,r.openBlock)(),(0,r.createBlock)(l,{key:0,"onUpdate:values":t[4]||(t[4]=e=>a.onChangeTransform("position",e)),label:"Position",step:.1,values:o.selected.position,decimals:4},{tools:(0,r.withCtx)((()=>[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:"square",onClick:t[3]||(t[3]=t=>e.removeTransform("position"))},[(0,r.createVNode)(i,{value:"bin",size:"1em"})])),[[d,"Удалить позицию"]])])),_:1},8,["values"])):((0,r.openBlock)(),(0,r.createElementBlock)("div",K,[(0,r.createElementVNode)("button",{class:"copybutton",onClick:t[5]||(t[5]=e=>a.assignFromModel("position"))},"Копировать позицию модели")])),o.selected.rotation?((0,r.openBlock)(),(0,r.createBlock)(c,{key:2,"onUpdate:values":t[7]||(t[7]=e=>a.onChangeTransform("rotation",e)),label:"Rotation",step:1,decimals:0,values:o.selected.rotation},{tools:(0,r.withCtx)((()=>[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:"square",onClick:t[6]||(t[6]=t=>e.removeTransform("rotation"))},[(0,r.createVNode)(i,{value:"bin",size:"1em"})])),[[d,"Удалить вращение"]])])),_:1},8,["values"])):((0,r.openBlock)(),(0,r.createElementBlock)("div",J,[(0,r.createElementVNode)("button",{class:"copybutton",onClick:t[8]||(t[8]=e=>a.assignFromModel("rotation"))},"Копировать вращение модели")])),o.selected.scale?((0,r.openBlock)(),(0,r.createBlock)(l,{key:4,"onUpdate:values":t[10]||(t[10]=e=>a.onChangeTransform("scale",e)),label:"Scale",step:.01,values:o.selected.scale},{tools:(0,r.withCtx)((()=>[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:"square",onClick:t[9]||(t[9]=t=>e.removeTransform("scale"))},[(0,r.createVNode)(i,{value:"bin",size:"1em"})])),[[d,"Удалить размер"]])])),_:1},8,["values"])):((0,r.openBlock)(),(0,r.createElementBlock)("div",Z,[(0,r.createElementVNode)("button",{class:"copybutton",onClick:t[11]||(t[11]=e=>a.assignFromModel("scale"))},"Копировать размер модели")]))])):(0,r.createCommentVNode)("v-if",!0)])])}]]),pe={style:{display:"flex","flex-direction":"column"}},me={style:{display:"flex","justify-content":"center","margin-top":"10px"}},ue={class:"assetblock"},he={key:0,class:"short"},fe={class:"short-text"},ve={key:0,class:"assetcontent"},ye={class:"assetrow"},ge={class:"assetrow"},Ee={name:"AssetView",props:{asset:{type:Object},label:{type:String}},mounted(){},data:()=>({view:!0}),computed:{src(){return this.$app.assets.list.find((e=>e.uid===this.asset.uid))},types(){return this.$app.assets.types}}},be=(0,w.A)(Ee,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",ue,[(0,r.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>s.view=!s.view),class:"title"},[(0,r.createCommentVNode)(' <div class="label">{{ label }}</div> '),s.view?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",he,[(0,r.createTextVNode)((0,r.toDisplayString)(a.src.uid)+" : "+(0,r.toDisplayString)(a.src.type)+" : ",1),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",fe,[(0,r.createTextVNode)((0,r.toDisplayString)(a.src.url),1)])),[[l,a.src.url]])]))]),s.view?((0,r.openBlock)(),(0,r.createElementBlock)("div",ve,[(0,r.createElementVNode)("div",ye,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(a.src.type)+" : "+(0,r.toDisplayString)(a.src.name||a.src.uid),1),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("button",{onClick:t[1]||(t[1]=t=>e.$emit("remove",o.asset.uid))},[(0,r.createVNode)(i,{value:"bin",size:"1em"})])])]),(0,r.createCommentVNode)(' <div class="assetrow">\r\n                <div>URL:</div>\r\n                <div class="rowcontent">\r\n                    <LabelEdit :value="src.url"></LabelEdit>\r\n                </div>\r\n            </div> '),(0,r.createCommentVNode)(' <div class="assetrow" v-for="(param, key) in src.parameters">\r\n            <div>{{ key }}</div><div>{{ param }}</div>\r\n        </div> '),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.asset.parameters,((e,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",ge,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o),1),t[2]||(t[2]=(0,r.createElementVNode)("div",{class:"cell"},[(0,r.createCommentVNode)(' <LabelEdit @update:value="asset.parameters[key] = $event; $emit(\'changed\')" :value="param">\r\n                    </LabelEdit> ')],-1))])))),256))])):(0,r.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-40f78f3e"]]),ke={name:"AssetsView",data:()=>({selectedAsset:null,assetsData:{offtypes:["hdr"]}}),props:{selected:{type:Object}},methods:{removeAsset(e){this.$app.elements.removeElementAsset(this.selected.path,e)},saveProp(){this.$app.toasts.add({message:"Параметр ресурса в элементе изменен"}),this.$app.engine.getManager().UpdateElement(this.selected.path,{assets:this.selected.assets})},selectAsset(){this.$app.assets.selectAsset([],(e=>{this.selected.assets||(this.selected.assets=[]),this.selected.assets.push({uid:e.uid});const t=this.$app.engine.getManager("AssetsManager").GetAsset(e.uid);this.selected.model.setAsset(t),this.selected.model.data.assets||(this.selected.model.data.assets=[]),this.selected.model.data.assets.push({uid:t.uid}),this.$app.elements.save(this.selected)}))}},computed:{list(){return this.selected.data?.assets||this.selected.assets||[]}},components:{AssetView:be}},_e=(0,w.A)(ke,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("AssetView"),l=(0,r.resolveComponent)("icon"),c=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",pe,[t[1]||(t[1]=(0,r.createElementVNode)("div",null,"Ресурсы",-1)),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.list,((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(i,{asset:e,key:t,onRemove:a.removeAsset,onChanged:a.saveProp},null,8,["asset","onRemove","onChanged"])))),128)),(0,r.createElementVNode)("div",me,[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:"button normal",onClick:t[0]||(t[0]=(...e)=>a.selectAsset&&a.selectAsset(...e))},[(0,r.createVNode)(l,{value:"stack",size:"0.75em"})])),[[c,"Ресурсы"]])])])}]]),we=_e,Se={class:"assetblock"},Ne={class:"assetcontent"},xe={class:"assetrow"},Be={class:"label"},Ce={style:{display:"block"}},Ie={class:"overleyicon"},$e={name:"AssetView",props:{asset:{type:Object}},data:()=>({}),methods:{showLib(){this.$app.assets.selectAsset(["gltf","texture"],(e=>{this.$emit("setasset",e)}))}}},Ve=(0,w.A)($e,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Ce,[(0,r.createElementVNode)("div",Ie,[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",{onClick:t[0]||(t[0]=(...e)=>a.showLib&&a.showLib(...e)),class:"text"},[(0,r.createTextVNode)((0,r.toDisplayString)(o.asset.name||o.asset.uid),1)])),[[i,o.asset.url]])])])}],["__scopeId","data-v-154a55dc"]]),Ae={texture:"image",gltf:"cube",hdr:"cloud"},Te={hdr:"assethdr"},Me={name:"AssetView",props:{selected:{type:Object},label:{type:String},property:{type:Object}},mounted(){},data:()=>({view:!0}),methods:{onAssetChange(e){this.selected[this.property.prop]=e.uid,this.$app.engine.getManager("AssetsManager").UpdateAsset(this.selected,this.property.prop,(()=>{}))},getTypeIcon:e=>Ae[e]},computed:{val(){return this.selected[this.property.prop]},asset(){return this.$app.assets.list.find((e=>e.uid===this.val))},cmp(){return Te[this.asset.type]}},components:{assethdr:Ve}},Re=(0,w.A)(Me,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Se,[(0,r.createElementVNode)("div",Ne,[(0,r.createElementVNode)("div",xe,[(0,r.createElementVNode)("div",Be,(0,r.toDisplayString)(o.label),1),((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(a.cmp),{onSetasset:a.onAssetChange,asset:a.asset},null,40,["onSetasset","asset"]))])])])}],["__scopeId","data-v-b983c3a0"]]),De={class:"container"},Oe={class:"info"},Pe={class:"row"},Le={class:"rowvalue"},Fe={class:"row"},je={class:"rowvalue"},Ue=["value"],He={class:"rowline"},qe=["value"],ze=["value"],Ge=["value"],We=["value"],Xe=["value"],Ye={name:"Assets",data:()=>({current:null}),props:{callback:{type:Function},property:{type:Object}},computed:{list(){return this.$app.project.assets},types:()=>["float","bool","color","string","asset","vector2","vector3","vector4","quaternion"]},methods:{checkType:e=>typeof e,selectAsset(e){this.current=e,this.callback(this.current)}}},Ke=(0,w.A)(Ye,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("LabelEdit");return(0,r.openBlock)(),(0,r.createElementBlock)("div",De,[(0,r.createElementVNode)("div",Oe,[(0,r.createElementVNode)("div",Pe,[t[7]||(t[7]=(0,r.createElementVNode)("div",{class:"rowlabel"},"Свойство",-1)),(0,r.createElementVNode)("div",Le,[(0,r.createVNode)(i,{style:{width:"100%"},"onUpdate:value":t[0]||(t[0]=e=>o.property.name=e),value:o.property.name},null,8,["value"])])]),(0,r.createElementVNode)("div",Fe,[t[8]||(t[8]=(0,r.createElementVNode)("div",{class:"rowlabel"},"Тип",-1)),(0,r.createElementVNode)("div",je,[(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"typeslist","onUpdate:modelValue":t[1]||(t[1]=e=>o.property.type=e)},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.types,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{value:e},(0,r.toDisplayString)(e),9,Ue)))),256))],512),[[r.vModelSelect,o.property.type]])])]),(0,r.createElementVNode)("div",He,["bool"===o.property.type?((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:0,type:"checkbox",value:o.property.value,"onUpdate:value":t[2]||(t[2]=e=>o.property.value=e)},null,40,qe)):(0,r.createCommentVNode)("v-if",!0),"number"===o.property.type?((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:1,type:"number",value:o.property.value,"onUpdate:value":t[3]||(t[3]=e=>o.property.value=e)},null,40,ze)):(0,r.createCommentVNode)("v-if",!0),"string"===o.property.type?((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:2,type:"text",value:o.property.value,"onUpdate:value":t[4]||(t[4]=e=>o.property.value=e)},null,40,Ge)):(0,r.createCommentVNode)("v-if",!0),"color"===o.property.type?((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:3,type:"color",value:o.property.value,"onUpdate:value":t[5]||(t[5]=e=>o.property.value=e)},null,40,We)):(0,r.createCommentVNode)("v-if",!0),"image"===o.property.type?((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:4,type:"image",value:o.property.value,"onUpdate:value":t[6]||(t[6]=e=>o.property.value=e)},null,40,Xe)):(0,r.createCommentVNode)("v-if",!0)])])])}],["__scopeId","data-v-f1f0f914"]]),Je={class:"scenetools"},Ze={key:0,class:"sceneassets"},Qe={data:()=>({asset:{uid:"hdrscene"},view:!0}),name:"SceneTools"},et=(0,w.A)(Qe,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Je,[(0,r.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>s.view=!s.view)},"Параметры сцены:"),s.view?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ze,[(0,r.createCommentVNode)(' <AssetView label="Окружение" :asset="asset"> </AssetView> ')])):(0,r.createCommentVNode)("v-if",!0)])}]]),tt={class:"blocks-container"},ot={class:"blockslabel"},nt={key:1,class:"blocks"},st={class:"blocklabel"},rt={class:"blocktitle"},at=["onClick"],it={class:"textwrap w100 tcenter"},lt={class:"textwrap w100 tcenter"},ct={class:"actionview"},dt={class:"actionrow"},pt={key:0},mt={key:0,class:"buttons"},ut={class:"actionform"},ht={props:{value:{type:Object,default:{uid:""}},isState:{type:Boolean,default:!1}},data:()=>({expanded:!1,editform:null,played:!1}),computed:{action(){return this.$app.actions.list[this.value.uid]}},methods:{remove(){},play(e){this.$refs[`action${this.action.type}`].play()},reset(){this.$refs[`action${this.action.type}`].reset()},showEditForm(e){this.$app.modal.open({header:{value:`Редактировать ${this.value.uid} эффект`,handler:()=>{this.$app.modal.close(),this.editform=null}},content:{},footer:{}}),this.editform=e.type}}},ft=(0,w.A)(ht,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",ct,[(0,r.createElementVNode)("div",dt,[(0,r.createElementVNode)("div",{class:"label",onClick:t[0]||(t[0]=e=>s.expanded=!s.expanded)},[(0,r.createTextVNode)((0,r.toDisplayString)(s.expanded?"▼":"▶")+" "+(0,r.toDisplayString)(o.value.uid)+" ",1),o.isState?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("span",pt,t[1]||(t[1]=[(0,r.createTextVNode)("(S)")]))),[[i,"На состоянии"]]):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(' <div style="overflow: hidden; text-overflow: ellipsis;">{{ action.type }}</div> '),(0,r.createCommentVNode)(' <div style="overflow: hidden; text-overflow: ellipsis;">{{ value.uid }} </div> '),s.expanded?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",mt,[(0,r.createCommentVNode)(' <button @click="play">\r\n                        <icon :value="played ? \'stop2\' : \'play3\'" size="1.2em"></icon>\r\n                    </button>\r\n                    <button @click="reset">\r\n                        <icon value="undo" size="1em"></icon>\r\n                    </button>\r\n                    <button @click="remove">\r\n                        <icon value="bin" size="1em"></icon>\r\n                    </button> ')]))]),(0,r.withDirectives)((0,r.createElementVNode)("div",ut,[(0,r.createCommentVNode)(' <component @play="played=$event" :ref="`action${action.type}`" :actionuid="value.uid" :is="action.type"> '),(0,r.createCommentVNode)(' <div class="line">\r\n                    <button @click="play" style="padding: 5px;aspect-ratio: 1/1;">\r\n                        <icon :value="played ? \'stop2\' : \'play3\'" size="1.5em"></icon>\r\n                    </button>\r\n                    <button @click="reset" style="padding: 5px;aspect-ratio: 1/1;">\r\n                        <icon value="undo" size="1.5em"></icon>\r\n                    </button>\r\n                    <button @click="remove" style="padding: 5px;aspect-ratio: 1/1;">\r\n                        <icon value="bin" size="1.5em"></icon>\r\n                    </button>\r\n                </div> '),(0,r.createCommentVNode)(" </component> ")],512),[[r.vShow,s.expanded]]),s.editform?((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{key:0,to:".modal-content"},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(s.editform),{actionuid:o.value.uid},null,8,["actionuid"]))])):(0,r.createCommentVNode)("v-if",!0)])}]]),vt=["onMouseover","onClick"],yt={props:["items","menuX","menuY"],data:()=>({isActive:!1,highlightedIndex:null}),methods:{highlight(e){this.highlightedIndex=e},deactivate(){this.highlightedIndex=null,this.$emit("select",null)},selectItem(e){this.$emit("select",e)}}},gt=(0,w.A)(yt,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"menu",onMouseleave:t[0]||(t[0]=(...e)=>a.deactivate&&a.deactivate(...e)),style:(0,r.normalizeStyle)({top:o.menuY-3+"px",left:o.menuX+"px"})},[(0,r.createElementVNode)("ul",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.items,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t,onMouseover:e=>a.highlight(t),onClick:t=>a.selectItem(e),class:(0,r.normalizeClass)({highlighted:s.highlightedIndex===t})},(0,r.toDisplayString)(e),43,vt)))),128))])],36)}],["__scopeId","data-v-02225f92"]]),Et={class:"textwrap w100 tcenter"},bt={class:"textwrap w100 tcenter"},kt={key:0,style:{"min-width":"256px",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},_t={tweens:"move-up"},wt={name:"ActionsLib",props:{selected:{type:Object},regbusy:!1,register:{type:Array}},data:()=>({current:null}),computed:{actions(){return this.$app.actions}},emits:["selectItem"],methods:{onAssetEdit(e,t){this.current[e],this.current[e]=t},getTypeIcon:e=>_t[e],checkType:e=>typeof e,select(e){this.current=e,this.$emit("selectItem",e)},endEdit(){this.$refs.assetEditor.end()}}},St=(0,w.A)(wt,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("spinner"),l=(0,r.resolveComponent)("queryform"),c=(0,r.resolveComponent)("Selectable"),d=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{to:".modal-content"},[(0,r.createVNode)(c,{onSelectItem:a.select,list:a.actions.library,selected:o.selected},(0,r.createSlots)({item:(0,r.withCtx)((({item:e})=>[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",Et,[(0,r.createTextVNode)((0,r.toDisplayString)(e.component),1)])),[[d,e.component]]),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",bt,[(0,r.createTextVNode)((0,r.toDisplayString)(e.type),1)])),[[d,e.type]])])),_:2},[o.register?{name:"selected",fn:(0,r.withCtx)((({item:e})=>[o.regbusy?((0,r.openBlock)(),(0,r.createElementBlock)("div",kt,[(0,r.createVNode)(i)])):((0,r.openBlock)(),(0,r.createBlock)(l,{key:1,values:o.register},null,8,["values"]))])),key:"0"}:void 0]),1032,["onSelectItem","list","selected"])])}]]),Nt={tweens:"move-up"},xt={name:"EventsList",props:{selected:{type:Object}},computed:{eventTypes(){return this.$app.events.types},actions(){return this.$app.actions}},mounted(){},methods:{getActionsHooks(){return this.selected.actions?[...new Set(this.selected.actions.map((e=>e.hook)))]:[]},getActionsByHook(e){return this.selected.actions.filter((t=>t.hook===e))},getActionRowStyle(e){return this.selectdAction===e?{color:"#eeee80e3"}:{}},onActionSelect(e){this.selectdAction||this.actsButtons.unshift({label:"Выбрать",handler:()=>{this.addAction(this.selectdAction),this.actListShow=!1,this.$app.modal.close()}}),this.selectdAction=e},getTypeIcon:e=>Nt[e],onActionsTypeSelect(e){this.selectedActionType=e,this.actLibShow=!1},onSelectEvent(e){e&&this.openActionsList(e),this.listshow=!1},addAction(e){this.selected.addAction({hook:this.eventType,uid:e.uid})},openActionLib(e){this.actsButtons.length=0,this.actsButtons.push({label:"Регистрация",class:"primary normal",handler:()=>{this.regActType=[{id:"name",label:"Имя модуля",value:"modules"},{id:"entry",label:"Ссылка",value:"/modules/mod.mf.js"},{id:"ui",label:"Компонент UI",value:"TweenScaleUI"},{id:"action",label:"Скрипт",value:"TweenScale"}],this.actsButtons.unshift({label:"Добавить модуль",class:"secondary normal",handler:async()=>{this.actsButtons.shift(),this.regbusy=!0,await this.$app.actions.registerActionComponent(this.regActType),this.regActType=null,this.regbusy=!1}})}},{label:"Назад",class:"secondary normal",handler:()=>{this.actLibShow=!1,e()}}),this.$app.modal.open({header:{value:"Список доступных типов обработчиков",handler:()=>{this.$app.modal.close(),this.actLibShow=!1,e()}},content:{},footer:{buttons:this.actsButtons}}),this.actLibShow=!0},openActionsList(e){this.eventType=e,this.selected.actions[e]||(this.selected.actions[e]=[]),this.selectdAction=null,this.actsButtons.length=0,this.actsButtons.push({label:"Закрыть",class:"secondary normal",handler:()=>{this.$app.modal.close(),this.actListShow=!1}}),this.$app.modal.open({header:{value:"Список используемых в проекте обработчиков",handler:()=>{this.$app.modal.close(),this.actListShow=!1}},content:{},footer:{buttons:this.actsButtons}}),this.actListShow=!0},addEvent(e){this.selected.actions||(this.selected.actions=[]),this.events.length=0,this.events.push(...["create.on","enable.on","disable.on","mouse.over","mouse.out"].filter((e=>!this.getActionsHooks().includes(e)))),this.menuX=e.clientX,this.menuY=e.clientY,this.listshow=!0}},data:()=>({actLibShow:!1,actListShow:!1,actsButtons:[],regActType:null,selectedActionType:null,regbusy:!1,selectdAction:null,eventType:"",listshow:!1,show:!0,events:[],menuX:0,menuY:0}),components:{Action:ft,EventsListPopup:gt,ActionsLib:St}},Bt=(0,w.A)(xt,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveComponent)("EventsListPopup"),c=(0,r.resolveComponent)("Action"),d=(0,r.resolveComponent)("Selectable"),p=(0,r.resolveComponent)("ActionsLib"),m=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",tt,[(0,r.createElementVNode)("div",ot,[(0,r.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>s.show=!s.show)},"События : "),(0,r.createElementVNode)("button",{onClick:t[1]||(t[1]=(...e)=>a.addEvent&&a.addEvent(...e))},[(0,r.createVNode)(i,{value:"plus",size:"0.9em"})])]),s.listshow?((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{key:0,to:"body"},[(0,r.createVNode)(l,{menuX:s.menuX,menuY:s.menuY,items:s.events,onSelect:a.onSelectEvent},null,8,["menuX","menuY","items","onSelect"])])):(0,r.createCommentVNode)("v-if",!0),s.show?((0,r.openBlock)(),(0,r.createElementBlock)("div",nt,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.getActionsHooks(),((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"block"},[(0,r.createElementVNode)("div",st,[(0,r.createElementVNode)("div",rt,(0,r.toDisplayString)(e),1),(0,r.createElementVNode)("button",{onClick:t=>a.openActionsList(e)},[(0,r.createVNode)(i,{value:"plus",size:"0.9em"})],8,at)]),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.selected.model.actions.filter((t=>t.hook===e)),((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(c,{value:e,key:t},null,8,["value"])))),128)),o.selected.isState?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(o.selected.stateActions.filter((t=>t.hook===e)),((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(c,{isState:!0,value:e,key:t},null,8,["value"])))),128)):(0,r.createCommentVNode)("v-if",!0)])))),128))])):(0,r.createCommentVNode)("v-if",!0),s.actListShow?((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{key:2,to:".modal-content"},[(0,r.createCommentVNode)(' <vlist :list="actions.values" :selected="selectdAction" @selectItem="onActionSelect">\r\n                <template #item="{ item }">\r\n                    <div v-tooltip="item.uid" :style="getActionRowStyle(item)">\r\n                        {{ item.uid }}\r\n                    </div>\r\n                    <div v-tooltip="item.type" :style="getActionRowStyle(item)">\r\n                        {{ item.type }}\r\n                    </div>\r\n                </template>\r\n</vlist> '),(0,r.createVNode)(d,{list:a.actions.values,selected:s.selectdAction,onSelectItem:a.onActionSelect},(0,r.createSlots)({item:(0,r.withCtx)((({item:e})=>[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",it,[(0,r.createTextVNode)((0,r.toDisplayString)(e.uid),1)])),[[m,e.uid]]),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",lt,[(0,r.createTextVNode)((0,r.toDisplayString)(e.type),1)])),[[m,e.type]])])),_:2},[s.selectdAction?{name:"selected",fn:(0,r.withCtx)((({item:e})=>[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.type),{actionuid:e.uid},null,8,["actionuid"]))])),key:"0"}:void 0]),1032,["list","selected","onSelectItem"])])):(0,r.createCommentVNode)("v-if",!0),s.actLibShow?((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{key:3,to:".modal-content"},[(0,r.createVNode)(p,{onSelectItem:a.onActionsTypeSelect,regbusy:s.regbusy,selected:s.regActType},null,8,["onSelectItem","regbusy","selected"])])):(0,r.createCommentVNode)("v-if",!0)])}]]),Ct=Bt;let It;const $t={data:()=>({showTransform:!0,showAssets:!0,visible:!1,assetsChanged:!1}),methods:{onComponentUpdate(e,t){t.onupdate?t.onupdate(this.selected,e,t,It):(this.selected.data?this.selected[t.prop]=this.selected.data[t.prop]=e:this.selected[t.prop]=e,It(this.selected,e,t))},onComponentChange(){It(this.selected)},addProperty(){let e=(0,r.reactive)({type:Number,name:"value"});const t=(0,r.reactive)({property:e,callback:function(e){}});this.$app.modal.open({header:{value:"Добавить свойство",handler:()=>{this.$app.modal.close()}},content:{component:(0,r.markRaw)(Ke),props:t}})}},computed:{selected(){return this.$app.selection.selected},selectedUID(){return this.$app.selection.uid},blocks(){return[{label:"Наименование",component:"LabelEdit",prop:"name"},{label:"Тип",component:"Label",prop:"type"},...this.$app.inspector.getTypesBlock(this.selected.model?.type||this.selected.type)]}},watch:{selected(e){e?e.isElement?It=this.$app.elements.save:e.isAsset?It=this.$app.assets.save:e.isState&&(It=this.$app.slides.saveState):It=null},"selected.assets.$.parameters":{handler(e,t){t&&e&&(this.assetsChanged=!0)},deep:!0}},components:{NameEdit:j,modeltypes:G,transformedit:de,assetsview:we,ViewPanel:S,SceneTools:et,EventsList:Ct,asset:Re}},Vt=(0,w.A)($t,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("SceneTools"),l=(0,r.resolveComponent)("ViewPanel");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createVNode)(l,{class:"inspector",header:{label:"Инспектор"}},{footer:(0,r.withCtx)((()=>[(0,r.createVNode)(i)])),default:(0,r.withCtx)((()=>[a.selectedUID?((0,r.openBlock)(),(0,r.createElementBlock)("div",O,[(0,r.createCommentVNode)(" <div>{{ selected.paths.join('->') }}</div> "),(0,r.renderSlot)(e.$slots,"default",{},(()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.blocks,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"inspectorblock"},[(0,r.createElementVNode)("div",P,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.component),{class:"blockcomponent",label:e.label,selected:a.selected,value:a.selected[e.prop],property:e,"onUpdate:value":t=>a.onComponentUpdate(t,e),onModify:t=>a.onComponentChange(t,e)},null,40,["label","selected","value","property","onUpdate:value","onModify"]))])])))),128))]))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",L," Выберите элемент или состояние "))])),_:3}),(0,r.createCommentVNode)(' <div class="panel-container">\r\n        <div class="panel">\r\n            <div class="header">Inspector</div>\r\n            <div class="content">\r\n                \r\n            </div>\r\n            <div class="footer">\r\n\r\n            </div>\r\n        </div>\r\n    </div> ')],2112)}]]),At={class:"hierarhy-view"},Tt={class:"title"},Mt={class:"treeicon"},Rt={class:"treecontainer"},Dt={class:"roottree"},Ot={class:"tree-node"},Pt={class:"tree-node-content"},Lt={class:"selector"},Ft=["checked"],jt={key:0,class:"prepender"},Ut=["title"],Ht={key:1,class:"appender"},qt={key:0,class:"children"},zt={key:1};function Gt(e,t){for(let o=0;o<e.length;o++)e[o].isSelected=t,e[o].children&&Gt(e[o].children,t)}const Wt={name:"TreeNode",props:{node:{type:Object,required:!0},selector:{type:Boolean,default:!0},index:{type:Number},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"childrens"}},data:()=>({expanded:{},childloaded:{},isLoading:!1,selectChangeEvent:(0,r.inject)("selectChangeEvent",null),clickNodeEvent:(0,r.inject)("clickNodeEvent",null)}),methods:{async toggleExpand(){this.node[this.childsFiled]&&0!==this.node[this.childsFiled].length&&(this.expanded[this.node.uid]=!this.expanded[this.node.uid],this.expanded[this.node.uid]&&!this.childloaded[this.node.uid]&&await this.loadChildren(),this.$emit("updateExpanded",this.node))},async loadChildren(){this.childloaded[this.node.uid]=!0},onChildSelectChange(e){},onCheckboxChange(e){e.isSelected=!e.isSelected,e[this.childsFiled]?.length&&Gt(e[this.childsFiled],e.isSelected),this.selectChangeEvent(this.node),this.$emit("changeSelection",this.node)},selectNode(e){this.clickNodeEvent(this.node)}}},Xt={components:{TreeNode:(0,w.A)(Wt,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("TreeNode",!0);return(0,r.openBlock)(),(0,r.createElementBlock)("li",Ot,[(0,r.createElementVNode)("div",Pt,[(0,r.createElementVNode)("span",{class:"collapser",onClick:t[0]||(t[0]=(...e)=>a.toggleExpand&&a.toggleExpand(...e))},[o.node[o.childsFiled]?.length?(0,r.renderSlot)(e.$slots,"icon",{key:0,node:o.node},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(s.expanded[o.node.uid]?"▼":"▶"),1)]),!0):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("span",Lt,[o.selector?(0,r.renderSlot)(e.$slots,"checkbox",{key:0},(()=>[(0,r.createElementVNode)("input",{ref:"checkedInput",type:"checkbox",onChange:t[1]||(t[1]=e=>a.onCheckboxChange(o.node)),checked:o.node.isSelected},null,40,Ft)]),!0):(0,r.createCommentVNode)("v-if",!0)]),e.$slots.prepend?((0,r.openBlock)(),(0,r.createElementBlock)("span",jt,[(0,r.renderSlot)(e.$slots,"prepend",{node:o.node},void 0,!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("span",{class:"labeler",title:o.node.uid,onClick:t[2]||(t[2]=(...e)=>a.selectNode&&a.selectNode(...e))},[(0,r.renderSlot)(e.$slots,"label",{node:o.node},(()=>[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(o.node.uid)+"|",1)]),!0)],8,Ut),e.$slots.append?((0,r.openBlock)(),(0,r.createElementBlock)("span",Ht,[(0,r.renderSlot)(e.$slots,"append",{node:o.node,index:o.index},void 0,!0)])):(0,r.createCommentVNode)("v-if",!0)]),s.expanded[o.node.uid]&&Array.isArray(o.node[o.childsFiled])&&o.node[o.childsFiled].length?((0,r.openBlock)(),(0,r.createElementBlock)("ul",qt,[s.childloaded[o.node.uid]?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(o.node[o.childsFiled],(t=>((0,r.openBlock)(),(0,r.createBlock)(i,{onChangeSelection:a.onChildSelectChange,selector:o.selector,focused:t.focused,key:t.uid,node:t},(0,r.createSlots)({_:2},[(0,r.renderList)(e.$slots,((t,o)=>({name:o,fn:(0,r.withCtx)((t=>[(0,r.renderSlot)(e.$slots,o,(0,r.mergeProps)({ref_for:!0},t),void 0,!0)]))})))]),1032,["onChangeSelection","selector","focused","node"])))),128)):((0,r.openBlock)(),(0,r.createElementBlock)("div",zt," load... "))])):(0,r.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-261e9d42"]])},props:{tree:{type:Array,required:!0},selector:{type:Boolean,default:!0},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"children"}},setup(e,{slots:t,emit:o}){(0,r.provide)("clickNodeEvent",(e=>{o("clickNode",e)})),(0,r.provide)("selectChangeEvent",(e=>{o("changeSelect",e)}))},methods:{onUpdateExpanded(e){const t=this.findNodeByUid(this.tree,e.uid);t&&(t.expanded=e.expanded),this.$emit("updateExpanded",e)},findNodeByUid(e,t){for(let o of e){if(o.uid===t)return o;if(o.children){let e=this.findNodeByUid(o.children,t);if(e)return e}}return null}}},Yt=(0,w.A)(Xt,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("TreeNode");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Rt,[(0,r.createElementVNode)("ul",Dt,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.tree,((t,n)=>((0,r.openBlock)(),(0,r.createBlock)(i,{key:t.uid,selector:o.selector,node:t,index:n,focused:o.focused,childsFiled:o.childsFiled,onUpdateExpanded:a.onUpdateExpanded},(0,r.createSlots)({_:2},[(0,r.renderList)(e.$slots,((t,o)=>({name:o,fn:(0,r.withCtx)((t=>[(0,r.renderSlot)(e.$slots,o,(0,r.mergeProps)({ref_for:!0},t),void 0,!0)]))})))]),1032,["selector","node","index","focused","childsFiled","onUpdateExpanded"])))),128))])])}],["__scopeId","data-v-4c9e3d2a"]]),Kt={name:"TreeAssets",props:{title:""},data:()=>({filtersView:!1,filterRect:{},focused:[],editform:!1,editedAsset:{},newAsset:!1,viewlib:!1,libButtons:{add:!0,save:!1}}),computed:{tree(){return this.$app.assets.assetsTree},assets(){return this.$app.assets},selected(){return this.$app.selection.selected}},methods:{onAddClick(){this.$refs.assetsLib.addNew(),this.libButtons.save=!0,this.libButtons.add=!1},onAssetChange(e){},onSaveClick(){this.assets.updateAsset(this.current)},openLib(){(0,r.reactive)({save:!1}),this.$app.modal.open({header:{value:"Ресурсы",handler:()=>{this.$app.modal.close(),this.viewlib=!1}},content:{},footer:{buttons:[]}}),this.viewlib=!0},onEdit(e,t){this.editedAsset[e]=t},editAsset(e){this.editedAsset=e?{...e,progress:0}:{uid:null,type:"gltf",name:"Новый ресурс",url:"https://",parameters:{},progress:0},this.$app.assets.editAsset(this.editedAsset)},onUpdateExpanded(e){},onNodeClick(e){this.$app.selection.select(e.isgroup?null:e)},onChangeSelection(){},remove(e){this.assets.removeAsset(e)}},components:{TreeView:Yt}},Jt=(0,w.A)(Kt,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveComponent)("TreeView"),c=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",At,[(0,r.createElementVNode)("div",Tt,[(0,r.createTextVNode)((0,r.toDisplayString)(o.title)+": ",1),(0,r.createElementVNode)("button",{class:"square",onClick:t[0]||(t[0]=e=>a.editAsset())},[(0,r.createVNode)(i,{value:"plus",size:"0.9em"})]),(0,r.createCommentVNode)(' <button class="square" @click="openLib()">\n        <icon value="books" size="0.9em"></icon>\n      </button> ')]),(0,r.createVNode)(l,{childsFiled:"children",tree:a.tree,onClickNode:a.onNodeClick,onChangeSelect:a.onChangeSelection,onUpdateExpanded:a.onUpdateExpanded},{append:(0,r.withCtx)((({node:e,index:t})=>[(0,r.createElementVNode)("div",Mt,[(0,r.createCommentVNode)(' <icon v-if="!node.isgroup" value="target" v-tooltip="\'Find\'" size="1em" @click="$emit(\'target\', node)"></icon> '),(0,r.createCommentVNode)(' <icon v-if="!node.isgroup" value="pencil" v-tooltip="\'Редактировать\'" size="1em" @click="editAsset(node)">\n          </icon> '),e.isgroup?(0,r.createCommentVNode)("v-if",!0):(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(i,{key:0,value:"bin",size:"1em",onClick:t=>a.remove(e)},null,8,["onClick"])),[[c,"Удалить"]])])])),label:(0,r.withCtx)((({node:o})=>[(0,r.createCommentVNode)(' <div @click="onSelectedNode" :class="{ \'focusedtree\': selected === node }"  class="label"\n          v-tooltip="`${node.url || node.type}`"> {{ node.name || node.uid }}</div> '),(0,r.createElementVNode)("div",{onClick:t[1]||(t[1]=(...t)=>e.onSelectedNode&&e.onSelectedNode(...t)),class:(0,r.normalizeClass)([{focusedtree:a.selected===o},"label"])},(0,r.toDisplayString)(o.name||o.uid),3)])),_:1},8,["tree","onClickNode","onChangeSelect","onUpdateExpanded"])])}],["__scopeId","data-v-cfd9d79a"]]),Zt={class:"hierarhy-view"},Qt={class:"treeicon"},eo={class:"container"},to={class:"block"},oo={class:"content"},no={class:"sub-content"},so={class:"subtitle"},ro={class:"subtitle"},ao=["value"],io={props:{callback:{type:Function},value:{type:Object,default:()=>({name:"",type:"model",parent:null})}},methods:{checkType(){return this.value.parent||"block"===this.value.type?this.value.parent&&"block"===this.value.type?(this.$app.toasts.add({message:"Тип block можно добавить только в корневой список. Не выбирайте элемент при добавлении."}),void this.$emit("update:value",{...this.value,type:"model"})):void 0:(this.$app.toasts.add({message:"В корневой список можно добавить только block тип"}),void this.$emit("update:value",{...this.value,type:"block"}))}},computed:{el:{get(){return this.value||{name:"",type:""}},set(e){this.$emit("update:value",e)}},types(){return this.$app.elements.types}}},lo=(0,w.A)(io,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",eo,[(0,r.createElementVNode)("div",to,[(0,r.createElementVNode)("div",oo,[(0,r.createElementVNode)("div",no,[(0,r.createElementVNode)("div",so,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>a.el.name=e)},null,512),[[r.vModelText,a.el.name]])]),(0,r.createElementVNode)("div",ro,[(0,r.withDirectives)((0,r.createElementVNode)("select",{onChange:t[1]||(t[1]=(...e)=>a.checkType&&a.checkType(...e)),class:"typeslist","onUpdate:modelValue":t[2]||(t[2]=e=>a.el.type=e)},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.types,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{value:e},(0,r.toDisplayString)(e),9,ao)))),256))],544),[[r.vModelSelect,a.el.type]])])])])])])}],["__scopeId","data-v-37404c2f"]]),co={class:"container"},po={props:{values:{type:Object,require:!0}}},mo=(0,w.A)(po,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",co,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.values.text),1)])}],["__scopeId","data-v-2cc2e0b7"]]),uo={name:"TreeElement",props:{title:""},mounted(){},data:()=>({filtersView:!1,filterRect:{},requestRemove:!1,removeData:{text:""},newElementData:{},addElementView:!1}),computed:{selected(){return this.$app.selection.selected},selection(){return this.$app.selection},tree(){return this.$app.elements.list}},methods:{isInSlide:e=>e.state?.isState,insertToSlide(e){e.state?this.$app.toasts.add({message:"Блок уже добавлен в выбраный слайд"}):this.$app.slides.addState(this.$app.slides.actived.uid,e.paths)},deleteElement(e){this.removeData.text=`Удалить ${e.name} (${e.uid}) ?`,this.$app.modal.open({header:{value:"Удалить элемент",handler:()=>{this.$app.modal.close(),this.requestRemove=!1}},content:{},footer:{buttons:[{label:"Удалить",class:"secondary",handler:async()=>{this.$app.modal.close(),this.requestRemove=!1,this.$app.elements.remove(e),this.$app.toasts.add({message:`Элемент ${e.name} удален`})}},{label:"Отмена",class:"primary",handler:async()=>{this.$app.modal.close(),this.requestRemove=!1}}]}}),this.requestRemove=!0},onUpdateExpanded(e){},onNodeClick(e){this.$app.selection.select(e)},onChangeSelection(){},addElement(){let e;this.newElementData.name="Новый элемент",this.newElementData.uid=`Element${Date.now()}`,this.selected?.isElement?(this.newElementData.type=this.selected?"model":"block",e=this.selected,this.newElementData.paths=[...this.selected.paths]):(this.newElementData.type="block",this.newElementData.paths=[],this.newElementData.children=[]),this.newElementData.paths.push(this.newElementData.uid),this.newElementData.path=this.newElementData.paths.join("."),this.newElementData.visible=!0,this.$app.modal.open({header:{value:`Добавить элемент ${this.selected?.isElement?"в "+this.selected.name||0:" в сцену"}`,handler:()=>{this.$app.modal.close(),this.addElementView=!1}},content:{},footer:{buttons:[{label:"Добавить",class:"secondary",handler:async()=>{this.$app.elements.create(this.newElementData,e),this.$app.modal.close(),this.addElementView=!1}},{label:"Отмена",class:"primary",handler:async()=>{this.$app.modal.close(),this.addElementView=!1}}]}}),this.addElementView=!0}},components:{TreeView:Yt,ConfirmModal:mo,ElementAdd:lo}},ho=(0,w.A)(uo,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveComponent)("TreeView"),c=(0,r.resolveComponent)("ConfirmModal"),d=(0,r.resolveComponent)("ElementAdd"),p=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Zt,[(0,r.createElementVNode)("div",null,[(0,r.createTextVNode)((0,r.toDisplayString)(o.title)+": ",1),(0,r.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>a.addElement&&a.addElement(...e))},[(0,r.createVNode)(i,{value:"plus",size:"0.75em"})])]),(0,r.createVNode)(l,{tree:a.tree,onClickNode:a.onNodeClick,onChangeSelect:a.onChangeSelection,childsFiled:"children",onUpdateExpanded:a.onUpdateExpanded},{append:(0,r.withCtx)((({node:e,index:t})=>[(0,r.createElementVNode)("div",Qt,[(0,r.createCommentVNode)(' <icon value="target" v-tooltip="\'Фокус\'" size="1em" @click="$emit(\'target\', node)"></icon>'),(0,r.createCommentVNode)(" <icon v-tooltip=\"'Видимость'\" :value=\"node.show ? 'eye' : 'eye-blocked'\" size=\"1em\"\n            @click=\"node.visible = !node.visible\" :color=\"node.visible ? '#8ec58e' : '#8ec58e80'\">\n          </icon> "),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.visible)+" ",1),e.isBlock?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createBlock)(i,{key:0,value:"dice",size:"1em",onClick:t=>a.insertToSlide(e),color:a.isInSlide(e)?"#8ec58e":"#8ec58e80"},null,8,["onClick","color"])),[[p,"Добавить в слайд"]]):(0,r.createCommentVNode)("v-if",!0),(0,r.withDirectives)((0,r.createVNode)(i,{onClick:t=>a.deleteElement(e),value:"bin",size:"1em"},null,8,["onClick"]),[[p,"Удалить"]]),(0,r.createCommentVNode)(' <icon v-if="index === 0" size="100%" value="bin"></icon> ')])])),label:(0,r.withCtx)((({node:e})=>[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)([{focusedtree:a.selected===e},"label"])},(0,r.toDisplayString)(e.name||e.uid),3)])),_:1},8,["tree","onClickNode","onChangeSelect","onUpdateExpanded"]),s.requestRemove?((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{key:0,to:".modal-content"},[(0,r.createVNode)(c,{values:s.removeData},null,8,["values"])])):(0,r.createCommentVNode)("v-if",!0),s.addElementView?((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{key:1,to:".modal-content"},[(0,r.createVNode)(d,{value:s.newElementData,"onUpdate:value":t[1]||(t[1]=e=>s.newElementData=e)},null,8,["value"])])):(0,r.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-32771746"]]),fo={class:"hierarhy-view"},vo={class:"treeicon"},yo={name:"Hierarhy",props:{title:""},data:()=>({filtersView:!1,filterRect:{}}),computed:{selected(){return this.$app.selection.selected},slide(){return this.$app.slides.actived||{children:[]}}},methods:{removeState(e){this.$app.slides.removeState(e.path,this.$app.slides.actived.uid)},onNodeClick(e){this.$app.selection.select(e)},onChangeSelection(){},onUpdateExpanded(){},assState(){"block"===this.$app.selection.element?.type||this.$app.toasts.add({message:"Только типы block можно добавлять в состояния"})}},components:{TreeView:Yt}},go=(0,w.A)(yo,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveComponent)("TreeView"),c=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",fo,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.title)+":"+(0,r.toDisplayString)(a.slide.name),1),(0,r.createVNode)(l,{tree:a.slide.children,onClickNode:a.onNodeClick,onChangeSelect:a.onChangeSelection,onUpdateExpanded:a.onUpdateExpanded},{checkbox:(0,r.withCtx)((()=>t[0]||(t[0]=[(0,r.createElementVNode)("span",null,[(0,r.createElementVNode)("input",{type:"checkbox"})],-1)]))),append:(0,r.withCtx)((({node:e,index:t})=>[(0,r.createCommentVNode)(' <div class="filters" v-if="index === 0">\n                    <button v-tooltip="\'Change filters\'"  @click="viewFilters" class="filterbutton">\n                        <icon v-for="v in target.filters" :value="v.props.value" :color="v.props.color" size="1em"></icon>\n                    </button>\n                    <PopupList v-if="filtersView" :rect="filterRect" :values="target.filters" @callback="filtersView = false"></PopupList>\n                </div> '),(0,r.createElementVNode)("div",vo,[(0,r.createCommentVNode)(' <icon value="target" v-tooltip="\'Fit\'" size="1em" @click="$emit(\'target\', node)"></icon>\n          <icon v-tooltip="\'Visible\'" :value="node.isVisible ? \'eye\' : \'eye-blocked\'" size="1em"\n            @click="$emit(\'visible\', node)">\n          </icon> '),(0,r.withDirectives)((0,r.createVNode)(i,{onClick:t=>a.removeState(e),value:"bin",size:"1em"},null,8,["onClick"]),[[c,"Удалить элемент из слайда"]])])])),label:(0,r.withCtx)((({node:e})=>[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)([{focusedtree:a.selected===e},"label"])},(0,r.toDisplayString)(e.name||e.model.name||e.uid),3)])),_:1},8,["tree","onClickNode","onChangeSelect","onUpdateExpanded"])])}],["__scopeId","data-v-15bd43d8"]]),Eo={name:"UI",props:{element:null},data(){return{project:{blocks:[{component:"AssetsTree",data:{title:"Ресурсы"},onSelect:this.onSelectAsset},{component:"ElementsTree",data:{title:"Элементы"},onSelect:this.onSelectElement},{component:"StatesTree",data:{title:"Состояния"},onSelect:this.onSelectSlides}],header:{buttons:this.$app.app.header.buttons},footer:{buttons:this.$app.app.footer.buttons}},name:"",selectedSlide:null,selectedNodes:[]}},methods:{onButtonClick(e){e.handler&&e.handler()},onSelectAsset(e){},onSelectedNodesUpdate(){},camChange(e){const t=e.target.value,o=this.cameras.find((e=>e.uid===t));o&&"function"==typeof o.handler?o.handler():console.warn(`No handler found for camera with UID: ${t}`)},handleSlideSelected(e){this.selectedSlide=e,this.$emit("switchslide",e)},activateInMenu(e,t){if(!t)return this.menu.actived[e]=null,void("main"===e&&(this.menu.ext.length=0));this.menu.actived[e]=t.id,"main"===e&&(this.menu.ext.length=0,this.menu.ext.push(...t.ext||[]))}},computed:{slide(){return this.$app.slides.actived},selected(){return this.$app.selection.element},slides(){return this.$app.slides.list},cameras(){return this.$app.app.cameras},leftpanel(){return this.$app.app.leftpanel},rightpanel(){return this.$app.app.rightpanel},options(){return this.$app.options},menu(){return this.$app.menu},app(){return this.$app.app},tools:()=>toolse,models(){return this.$app.models},ready(){return this.$app.engine.ready},toasts(){return this.$app.toasts},modal(){return this.$app.modal},translations(){return this.$app.translations}},components:{ViewPanel:S,Sliders:$,HierarhyUI:D,InspectorUI:Vt,AssetsTree:Jt,ElementsTree:ho,StatesTree:go}},bo=(0,w.A)(Eo,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("InspectorUI"),l=(0,r.resolveComponent)("icon"),c=(0,r.resolveComponent)("ViewPanel"),y=(0,r.resolveComponent)("Sliders"),g=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createVNode)(i,{selected:a.selected,class:"inspector"},null,8,["selected"]),a.app.ready?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,class:"project",header:s.project.header,footer:s.project.footer},{header:(0,r.withCtx)((()=>[s.project.footer.buttons?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(s.project.header.buttons,(e=>(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:(0,r.normalizeClass)(e.class),onClick:t=>a.onButtonClick(e)},[e.label?((0,r.openBlock)(),(0,r.createElementBlock)("span",m,(0,r.toDisplayString)(e.label||"Close"),1)):(0,r.createCommentVNode)("v-if",!0),e.icon?((0,r.openBlock)(),(0,r.createBlock)(l,{key:1,value:e.icon,size:"1.5em"},null,8,["value"])):(0,r.createCommentVNode)("v-if",!0)],10,p)),[[g,e.tooltip]]))),256)):(0,r.createCommentVNode)("v-if",!0)])),footer:(0,r.withCtx)((()=>[s.project.footer.buttons?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(s.project.footer.buttons,(e=>(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:(0,r.normalizeClass)(e.class),onClick:t=>a.onButtonClick(e)},[e.label?((0,r.openBlock)(),(0,r.createElementBlock)("span",v,(0,r.toDisplayString)(e.label||"Close"),1)):(0,r.createCommentVNode)("v-if",!0),e.icon?((0,r.openBlock)(),(0,r.createBlock)(l,{key:1,value:e.icon,size:"1.5em"},null,8,["value"])):(0,r.createCommentVNode)("v-if",!0)],10,f)),[[g,e.tooltip]]))),256)):(0,r.createCommentVNode)("v-if",!0)])),default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s.project.blocks,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",u,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.component||"div"),(0,r.mergeProps)({ref_for:!0},e.component?e.data:null,{onSelect:e.onSelect}),{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",{class:"content-value",innerHTML:e.value||""},null,8,h)])),_:2},1040,["onSelect"]))])))),256))])),_:1},8,["header","footer"])):(0,r.createCommentVNode)("v-if",!0),(0,r.createVNode)(y,{slides:a.slides,slide:a.slide,onSlideselect:a.handleSlideSelected,class:"sliders"},null,8,["slides","slide","onSlideselect"])])}],["__scopeId","data-v-3d408147"]]);var ko=o(64);const _o=new Q.Raycaster,wo=new class{constructor(){this._events={"*":[]}}subs(e,t,o){null==this._events[e]&&(this._events[e]=[]),this._events[e].push({handler:o,once:t})}on(e,t){this.subs(e,!1,t)}once(e,t){this.subs(e,!0,t)}off(e,t){const o=this._events[e];if(o){for(let e=o.length-1;e>=0;e--)o[e].handler===t&&o.splice(e,1);0===o.length&&delete this._events[e]}}clear(e){this._events[e]=[]}clearAll(){this._events={"*":[]}}emit(e,...t){const o=[];this._events[e]&&o.push(...this._events[e]),this._events["*"].length&&o.push(...this._events["*"].map((t=>({handler:t.handler.bind(this,e),once:t.once}))));for(let e=o.length-1;e>=0;e--){const n=o[e];n.handler.apply(null,t),n.once&&o.splice(e,1)}}addEventListener(e,t){this.on(e,t)}removeEventListener(e,t){this.off(e,t)}};let So,No,xo,Bo;const Co={x:0,y:0};let Io,$o=.03,Vo=.03,Ao=.01,To=.01,Mo=window.innerWidth/2,Ro=window.innerHeight/2;function Do(e){for(;e;){if(e.isElement)return e;e=e.parent}return null}function Oo(e){}function Po(e){Co.x=e.clientX,Co.y=e.clientY,Io=Date.now()}function Lo(e){if(Math.abs(Co.x-e.clientX)>10||Math.abs(Co.y-e.clientY)>10||Date.now()-Io>500)return;const t=new Q.Vector2,o=Bo.getBoundingClientRect(),n=e.clientX-o.left,s=e.clientY-o.top;t.x=n/Bo.clientWidth*2-1,t.y=-s/Bo.clientHeight*2+1,_o.setFromCamera(t,No);const r=_o.intersectObjects(So.children,!0);if(0!==r.length)for(let e=0;e<r.length;e++){const t=Do(r[e].object);if(t.visible)return void wo.emit("click",t)}else wo.emit("click",null)}const Fo=new Proxy(class{static get Control(){return Control}static Init(e,t,o,n,s){const r={camera:{range:{x:.01,y:.01},movespeed:{x:.03,y:.03}},...s};So=n,xo=o,No=t,Bo=e,$o=r.camera.movespeed.x,Vo=r.camera.movespeed.y,Ao=r.camera.range.x,To=r.camera.range.y,Mo=window.innerWidth/2,Ro=window.innerHeight/2,e.addEventListener("click",Lo.bind(null)),e.addEventListener("mousemove",Oo,!1),e.addEventListener("mousedown",Po,!1)}static Update(e){}static SetCamera(e){No=e}},{get:(e,t)=>t in e?e[t]:wo[t]}),jo=Fo,Uo=ko.default||ko;let Ho,qo,zo,Go;function Wo(e){qo.render(Ho,zo)}const Xo=class{static async Init(e){Go=e;const{THREE:t,ProjectManager:o}=await Uo.modules.load("engine","engine");Ho=o.Scene,qo=new t.WebGLRenderer({canvas:e,alpha:!0,powerPreference:"high-performance",antialias:!0,stencil:!1});const n=Go.clientWidth,s=Go.clientHeight;qo.setSize(n,s,!1),qo.setPixelRatio(window.devicePixelRatio);const r=new t.CameraHelper(o.Camera);r.layers.set(1),Ho.add(r),zo=new t.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.01,5e3),zo.uid="EditorCamera",Ho.add(zo),zo.position.set(5,3,20),qo.setAnimationLoop(Wo),zo.layers.enable(1),le.Init({canvas:Go},zo,o.Scene),le.FocusTo(o.Root),jo.Init(Go,zo,Ho,o.Root),jo.on("click",(e=>{Uo.selection.select(e)}))}},Yo={},Ko={data:()=>({selectedElement:null,elements:[]}),computed:{hierarhyAllow(){return this.$app.engine.instances.length>0},options(){return this.$app.options},app(){return this.$app.app},tools:()=>toolse,models(){return this.$app.models},ready(){return this.$app.engine.ready},toasts(){return this.$app.toasts},modal(){return this.$app.modal},translations(){return this.$app.translations}},methods:{onElementMount(e,t){Yo[t]&&(Yo[t](e),delete Yo[t])},addElement(e){return new Promise((t=>{this.elements.push({component:"UILabel",ref:e.path,data:{...e,visible:!1}}),Yo[e.path]=t}))},waitCanvasSize(e){const t=window.devicePixelRatio||1;e.forEach((e=>{e.width=e.clientWidth*t,e.height=e.clientHeight*t}))},slideSwitch(e){}},async mounted(){document.documentElement.setAttribute("data-theme","dark");const e=this.$refs.editorcanvas,t=this.$refs.playcanvas;this.waitCanvasSize([e,t]);const o=window.location.search,n=new URLSearchParams(o);window.THREE=Q,await this.$app.app.init(n.get("project")||"editor");const s=this.$app.engine.getManager();await s.Init(t),await s.Start(),await this.$app.app.load(),this.$app.engine.getManager("SlidesManager").GoTo(0),await Xo.Init(e),this.app.ready=!0},components:{UI:bo}},Jo=(0,w.A)(Ko,[["render",function(e,t,o,n,s,d){const p=(0,r.resolveComponent)("UI"),m=(0,r.resolveComponent)("Modal"),u=(0,r.resolveComponent)("Toasts");return(0,r.openBlock)(),(0,r.createElementBlock)("div",a,[(0,r.createElementVNode)("canvas",i,null,512),(0,r.createElementVNode)("canvas",l,null,512),(0,r.createVNode)(p,{onSwitchslide:d.slideSwitch,element:s.selectedElement},null,8,["onSwitchslide","element"]),(0,r.createElementVNode)("div",c,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s.elements,((e,t)=>((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.component),{onMounted:d.onElementMount,key:t,modelValue:e.data,"onUpdate:modelValue":t=>e.data=t},null,40,["onMounted","modelValue","onUpdate:modelValue"])))),128))],512),d.modal.isVisible?((0,r.openBlock)(),(0,r.createBlock)(m,{key:0})):(0,r.createCommentVNode)("v-if",!0),(0,r.createVNode)(u)])}]]),Zo={class:"overbutton"},Qo={class:"menulabel"},en={class:"btnicon"},tn={name:"ExpandedButton",props:{label:"",icon:"",color:"rgb(0,0,0)"}},on=(0,w.A)(tn,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon");return(0,r.openBlock)(),(0,r.createElementBlock)("button",Zo,[(0,r.createElementVNode)("div",Qo,(0,r.toDisplayString)(o.label),1),(0,r.createElementVNode)("div",en,[(0,r.createVNode)(i,{size:"100%",color:o.color,value:o.icon},null,8,["color","value"])])])}]]),nn=["fill","x","href"],sn=o.p+"assets/da739f090992f8b24ade.svg",rn={name:"Icon",props:{value:{type:String,default:()=>"icon-checkmark"},size:{type:String,default:()=>null},color:{type:String,default:()=>null},offset:{type:Number}},computed:{style(){return this.size?{width:`${this.size}`,height:`${this.size}`}:{width:"1em",height:"1em"}},val(){return`${sn}#p-${this.value.replace("p-","")}`}}},an=(0,w.A)(rn,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("svg",{preserveAspectRatio:"xMidYMid meet",class:"svgicon",style:(0,r.normalizeStyle)(a.style)},[(0,r.createElementVNode)("use",{class:"svguse",width:"100%",height:"100%",viewBox:"0 0 32 32",fill:o.color,x:o.offset,href:a.val},[(0,r.createElementVNode)("title",null,[(0,r.renderSlot)(e.$slots,"default",{},void 0,!0)])],8,nn)],4)}],["__scopeId","data-v-1165b5b0"]]),ln={class:"modal-header"},cn={class:"modal-content"},dn=["innerHTML"],pn={class:"modal-footer"},mn=["onClick"],un={computed:{modal(){return this.$app.modal},header(){return this.modal.header},content(){return this.modal.content},footer(){return this.modal.footer}},methods:{onSelf(){this.modal.values.closable&&this.modal.close()},onClick(e){"function"==typeof e&&e()},closeModal(e){"function"!=typeof e?this.modal.close():e()}}},hn=(0,w.A)(un,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"modal-overlay",onClick:t[3]||(t[3]=(0,r.withModifiers)(((...e)=>a.onSelf&&a.onSelf(...e)),["self"]))},[(0,r.createElementVNode)("div",{class:"modal",onClick:t[2]||(t[2]=(0,r.withModifiers)((()=>{}),["stop"]))},[(0,r.createElementVNode)("header",ln,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(a.header.component||"div"),(0,r.mergeProps)({class:"header"},a.header.component?a.header:null),{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(a.header.value),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:t[0]||(t[0]=e=>a.closeModal(a.header.handler))},"×")])),_:1},16))]),(0,r.createElementVNode)("main",cn,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(a.content.component||"div"),(0,r.mergeProps)({class:"content"},a.content.component?a.content.props:null,(0,r.toHandlers)(a.content.events||{})),(0,r.createSlots)({default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",{class:"content-value",innerHTML:a.content.value||""},null,8,dn)])),_:2},[(0,r.renderList)(a.content.slots,((e,t)=>({name:t,fn:(0,r.withCtx)((t=>[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.component),(0,r.mergeProps)(t,(0,r.toHandlers)(e.events||{})),null,16))]))})))]),1040))]),(0,r.createElementVNode)("footer",pn,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(a.footer.component||"div"),(0,r.mergeProps)({class:"footer"},a.footer.component?a.footer.props:null,{onClose:a.closeModal}),{default:(0,r.withCtx)((()=>[a.footer.buttons?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(a.footer.buttons,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:(0,r.normalizeClass)(e.class),onClick:t=>a.onClick(e.handler)},(0,r.toDisplayString)(e.label||"Close"),11,mn)))),256)):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:(0,r.normalizeClass)(a.footer.class),onClick:t[1]||(t[1]=e=>a.closeModal(a.footer.handler))},(0,r.toDisplayString)(a.footer.label||"Close"),3))])),_:1},16,["onClose"]))])])])}],["__scopeId","data-v-7f5c7346"]]),fn=["onClick"],vn={props:{values:{type:Array},rect:{type:Object},size:{type:Object,default:{width:200,height:100}}},data:()=>({popupStyle:{}}),methods:{togglePopup(e){const t=window.innerWidth;let o=this.rect.top+window.scrollY,n=this.rect.left+window.scrollX;n+this.size.width>t&&(n=this.rect.right-this.size.width+window.scrollX),this.popupStyle={position:"absolute",top:`${o}px`,left:`${n}px`,width:`${this.size.width}px`},this.isPopupVisible=!0},hidePopup(){this.$emit("callback")}}},yn=(0,w.A)(vn,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"popup",style:(0,r.normalizeStyle)(s.popupStyle)},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.values,((t,o)=>(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("p",{class:"element",key:o,onClick:o=>t.handler?t.handler(t):e.$emit("click",t)},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(t.component||"div"),(0,r.mergeProps)({ref_for:!0},t.props),{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(t.props),1)])),_:2},1040))],8,fn)),[[i,t.tooltip]]))),128)),(0,r.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>a.hidePopup&&a.hidePopup(...e))},"ОК")],4)}],["__scopeId","data-v-1591e2fe"]]),gn={key:0,class:"menulabel"},En={key:1,class:"btnicon"},bn={name:"SimpleButton",props:{label:{type:String},icon:{type:Object},tooltip:{type:String},handlers:{type:Object,required:!0}},methods:{onClick(){this.handlers?.click?this.handlers.click(this):this.$emit("click",this)}}},kn=(0,w.A)(bn,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveDirective)("tooltip");return(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:"small-btn simple",onClick:t[0]||(t[0]=(...e)=>a.onClick&&a.onClick(...e))},[o.label?((0,r.openBlock)(),(0,r.createElementBlock)("div",gn,(0,r.toDisplayString)(o.label),1)):(0,r.createCommentVNode)("v-if",!0),o.icon?((0,r.openBlock)(),(0,r.createElementBlock)("div",En,[(0,r.createVNode)(i,{size:o.icon.size||"100%",value:o.icon.value},null,8,["size","value"])])):(0,r.createCommentVNode)("v-if",!0)])),[[l,o.tooltip]])}],["__scopeId","data-v-7f0518be"]]),_n={key:0,class:"menulabel"},wn={key:1,class:"btnicon"},Sn={name:"ToggleButton",props:{id:{type:String,required:!0},label:{type:String},icon:{type:Object},group:{type:Object},handlers:{type:Object,required:!0},tooltip:{type:String}},computed:{isActive(){return this.group.activeId===this.id}},mounted(){this.handlers.activate&&this.handlers.activate(this)},beforeUnmount(){this.handlers.deactivate&&this.handlers.deactivate(this)},methods:{onClick(){this.handlers.click?this.handlers.click(this):this.$emit("click",this)}}},Nn=(0,w.A)(Sn,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveDirective)("tooltip");return(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:(0,r.normalizeClass)(["small-btn simple",{active:a.isActive}]),onClick:t[0]||(t[0]=(...e)=>a.onClick&&a.onClick(...e))},[o.label?((0,r.openBlock)(),(0,r.createElementBlock)("div",_n,(0,r.toDisplayString)(o.label),1)):(0,r.createCommentVNode)("v-if",!0),o.icon?((0,r.openBlock)(),(0,r.createElementBlock)("div",wn,[(0,r.createVNode)(i,{size:o.icon.size||"100%",value:o.icon.value},null,8,["size","value"])])):(0,r.createCommentVNode)("v-if",!0)],2)),[[l,o.tooltip]])}],["__scopeId","data-v-673fd16a"]]),xn={class:"spinner"},Bn={name:"Spinner"},Cn=(0,w.A)(Bn,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",xn)}],["__scopeId","data-v-4736cf19"]]),In={class:"toast-container"},$n={computed:{list(){return this.$app.toasts.list}},methods:{onClick(e){e.onclick&&e.onclick()}}},Vn=(0,w.A)($n,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",In,[(0,r.createVNode)(r.TransitionGroup,{name:"toast",tag:"div"},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.list,(t=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t.id,class:"toast"},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(t.component||"div"),(0,r.mergeProps)({class:"toastview",ref_for:!0},t.data,{onClick:e=>a.onClick(t)}),{default:(0,r.withCtx)((()=>[t.component?(0,r.createCommentVNode)("v-if",!0):(0,r.renderSlot)(e.$slots,"default",{key:0},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(t.data.message),1)]),!0)])),_:2},1040,["onClick"]))])))),128))])),_:3})])}],["__scopeId","data-v-3aed840a"]]),An={class:"alert"},Tn={class:"text"},Mn={name:"Label",props:{icon:{type:String,default:"notification"},message:{type:String,default:""},type:{type:String,default:"info"}}},Rn=(0,w.A)(Mn,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",An,[(0,r.createVNode)(i,{class:(0,r.normalizeClass)(`${o.type}icon`),size:"3em",value:o.icon},null,8,["class","value"]),(0,r.createElementVNode)("span",Tn,(0,r.toDisplayString)(o.message),1)])])}]]),Dn={class:"slide-scroller",ref:"scroller"},On=["onClick"],Pn=["src"],Ln={class:"title"},Fn={props:{slides:{type:Array,required:!0}},data:()=>({selectedIndex:0,translateX:0}),mounted(){this.centerSelectedImage()},watch:{selectedIndex(){this.centerSelectedImage()}},methods:{addSlide(){this.$emit("addslide")},selectImage(e){this.selectedIndex=e,this.$emit("slideselect",this.slides[e].uid)},centerSelectedImage(){this.$nextTick((()=>{const e=this.$refs.scroller.offsetWidth,t=this.$refs.scroller.querySelector(".slide-item.selected");if(t){const o=t.offsetWidth,n=t.offsetLeft;this.translateX=-(n-e/2+o/2)}}))}}},jn=(0,w.A)(Fn,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Dn,[(0,r.createElementVNode)("div",{class:"slide-container",style:(0,r.normalizeStyle)({transform:`translateX(${s.translateX}px)`})},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.slides,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:(0,r.normalizeClass)(["slide-item",{selected:s.selectedIndex===t}]),onClick:e=>a.selectImage(t)},[(0,r.createElementVNode)("img",{src:e.preview,alt:"Image"},null,8,Pn),(0,r.createElementVNode)("div",Ln,(0,r.toDisplayString)(e.uid),1)],10,On)))),128)),(0,r.createElementVNode)("div",{class:"slide-item",onClick:t[0]||(t[0]=e=>a.addSlide())},t[1]||(t[1]=[(0,r.createElementVNode)("img",{src:"cardbg",alt:"Image"},null,-1)]))],4)],512)}],["__scopeId","data-v-dafd9036"]]),Un={class:"menu-container"},Hn={key:0,class:"menublock"},qn={name:"ExtMenu",props:{list:{type:Array,default:[]},actived:{type:String}},computed:{menu(){return this.$app.menu}},methods:{onClick(e){const t=this.list.find((e=>e.id===this.actived));t&&(t.handlers?.disable?.(),t===e)?this.$emit("activate",null):(e.handler?.(e)||e.handlers?.enable?.(e)||this.$emit("click",e),this.$emit("activate",e))}}},zn=(0,w.A)(qn,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("ExpandedButton");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Un,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.list,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:(0,r.normalizeClass)([e.class,"menu-item"])},[e.hidden?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",Hn,[(0,r.createVNode)(i,{onClick:(0,r.withModifiers)((t=>a.onClick(e)),["stop"]),label:e.label,color:e.id&&o.actived===e.id?"#ffff00":null,icon:e.icon},null,8,["onClick","label","color","icon"])]))],2)))),128))])}]]),Gn={class:"input-wrapper"},Wn=["type","value","placeholder"],Xn={name:"MinimalInput",props:{type:{type:String,default:"text"},value:{type:[String,Number],default:""},placeholder:{type:String,default:""}},emits:["update:value"]},Yn=(0,w.A)(Xn,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Gn,[(0,r.createElementVNode)("input",{type:o.type,value:o.value,onInput:t[0]||(t[0]=t=>e.$emit("update:value",t.target.value)),placeholder:o.placeholder,class:"input-field"},null,40,Wn)])}],["__scopeId","data-v-2c548edc"]]),Kn={class:"container"},Jn={class:"label"},Zn={class:"value"},Qn=["onUpdate:modelValue"],es={props:{values:{type:Object,require:!0}},emits:["update:values"],computed:{}},ts=(0,w.A)(es,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Kn,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.values,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"block"},[(0,r.createElementVNode)("div",Jn,(0,r.toDisplayString)(e.label),1),(0,r.createElementVNode)("div",Zn,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t=>e.value=t},null,8,Qn),[[r.vModelText,e.value]])])])))),128))])}],["__scopeId","data-v-2b60153b"]]),os={name:"SliderBlock",props:{value:{type:Boolean,default:()=>!1},property:{type:String,default:"top"},shift:{type:Number,default:100},zero:{type:Number,default:0}},computed:{style(){return{[this.property]:this.value?`${this.shift}px`:`${this.zero}px`}}},mounted(){"right"===this.property||"left"===this.property?this.$el.style.width=this.shift-this.zero+"px":this.$el.style.height=this.shift-this.zero+"px"}},ns=(0,w.A)(os,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"slider",style:(0,r.normalizeStyle)(a.style)},[(0,r.renderSlot)(e.$slots,"default",{},void 0,!0),(0,r.createElementVNode)("div",{onClick:t[0]||(t[0]=t=>e.$emit("revert"))},[(0,r.renderSlot)(e.$slots,"button",{},void 0,!0)])],4)}],["__scopeId","data-v-b3fc2cec"]]),ss={key:0},rs={key:1},as={key:2,class:"child-list"},is={key:0},ls={name:"TreeLi",props:["value"],data:()=>({childshow:!1})},cs=(0,w.A)(ls,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("TreeLi",!0);return(0,r.openBlock)(),(0,r.createElementBlock)("li",null,[o.value.children?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",ss,t[1]||(t[1]=[(0,r.createElementVNode)("svg",{class:"edicon ics-spinner10"},[(0,r.createElementVNode)("use",{"xlink:href":"#ics-spinner10"})],-1)]))),o.value.children?((0,r.openBlock)(),(0,r.createElementBlock)("div",as,[(0,r.createElementVNode)("span",{onClick:t[0]||(t[0]=t=>e.childshow=!e.childshow)},[t[3]||(t[3]=(0,r.createElementVNode)("input",{type:"checkbox"},null,-1)),(0,r.createTextVNode)((0,r.toDisplayString)(o.value.name),1)]),e.childshow?((0,r.openBlock)(),(0,r.createElementBlock)("ul",is,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.value.children,((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(i,{key:t,value:e},null,8,["value"])))),128))])):(0,r.createCommentVNode)("v-if",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("span",rs,[t[2]||(t[2]=(0,r.createElementVNode)("input",{type:"checkbox"},null,-1)),(0,r.createTextVNode)((0,r.toDisplayString)(o.value.name),1)]))])}],["__scopeId","data-v-562df7a6"]]),ds={class:"selectable-container"},ps={class:"list"},ms={class:"grid"},us=["onClick"],hs={key:0,class:"info"},fs={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},vs=(0,w.A)(fs,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",ds,[(0,r.createElementVNode)("div",ps,[(0,r.createElementVNode)("div",ms,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.list,((t,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{onClick:e=>a.onItemSelect(t),class:"grid-element",key:o},[(0,r.renderSlot)(e.$slots,"item",{item:t})],8,us)))),128))])]),s.current?((0,r.openBlock)(),(0,r.createElementBlock)("div",hs,[(0,r.renderSlot)(e.$slots,"selected",{item:s.current})])):(0,r.createCommentVNode)("v-if",!0)])}]]),ys={class:"vlist-container"},gs={class:"list"},Es={class:"vlist"},bs=["onClick"],ks={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},_s=(0,w.A)(ks,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",ys,[(0,r.createElementVNode)("div",gs,[(0,r.createElementVNode)("div",Es,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.list,((t,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{onClick:e=>a.onItemSelect(t),class:"vlist-element",key:o},[(0,r.renderSlot)(e.$slots,"item",{item:t})],8,bs)))),128))])])])}]]),ws={style:{display:"flex","justify-content":"space-between"}},Ss={name:"BoolEdit",props:["value","label","selected"],computed:{val:{get(){return this.value},set(e){this.$emit("update:value",e)}}}},Ns=(0,w.A)(Ss,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",ws,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.label),1),(0,r.createElementVNode)("div",null,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>a.val=e)},null,512),[[r.vModelCheckbox,a.val]])])])}]]),xs={class:"input-float"},Bs=["value","step"],Cs={name:"input-float",props:["value","step","label"],methods:{onWheel(){},onChange(){}}},Is=(0,w.A)(Cs,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",xs,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(o.label),1),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("input",{value:o.value,type:"number",step:o.step,onInput:t[0]||(t[0]=t=>e.$emit("update:value",parseFloat(t.target.value)))},null,40,Bs)]),(0,r.createCommentVNode)('<input s  \r\n    v-bind:value="value"\r\n    type="number"\r\n    :step="step"\r\n    @mousewheel="onWheel"\r\n    @input="$emit(\'input\', parseFloat($event.target.value) || value)"\r\n  />')])}]]),$s=["onUpdate:modelValue"],Vs=["onUpdate:modelValue"],As={name:"NameEditor",data:()=>({properties:[{property:"envMap",value:null}]}),methods:{updateAsset(){for(let e=0;e<this.properties.length;e++){const t=this.properties[e];this.selected[t.property],this.$app.assets.updateAsset(this.selected,t.property,(()=>{}))}}},props:{selected:{type:Object}}},Ts=(0,w.A)(As,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s.properties,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t=>e.property=t},null,8,$s),[[r.vModelText,e.property]]),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t=>o.selected[e.property]=t},null,8,Vs),[[r.vModelText,o.selected[e.property]]])])))),256)),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("button",{class:"btn",onClick:t[0]||(t[0]=(...e)=>a.updateAsset&&a.updateAsset(...e))},"Update")])])}]]),Ms={class:"comma-number-input-wrapper"},Rs={class:"arrow-buttons"},Ds={name:"CommaNumberInput",props:{value:Number,step:{type:Number,default:1},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},decimals:{type:Number,default:2}},data:()=>({interval:null,separator:",",isPressed:!1,changeSpeed:100}),computed:{formattedValue:{get(){return this.value||0},set(e){this.$emit("changed",this.parseNumber(e))}}},mounted(){const e=(new Intl.NumberFormat).format(this.value);this.separator=e.charAt(1),this.$refs.input.addEventListener("wheel",this.onWheel,{passive:!1})},beforeDestroy(){this.$refs.input.removeEventListener("wheel",this.onWheel)},methods:{onFocus(){this.$nextTick((()=>{this.$refs.input.select()}))},parseNumber:e=>parseFloat(e.replace(",","."))||0,formatNumber(e){return parseFloat(e).toFixed(this.decimals).replace(".",",")},onInput(e){this.$emit("changed",this.parseNumber(e.target.value))},onWheel(e){e.preventDefault(),e.stopPropagation(),document.activeElement===this.$refs.input&&this.changeValue(e.deltaY>0?-this.step:this.step)},onKeyDown(e){"ArrowUp"===e.key?(this.changeValue(this.step),e.preventDefault()):"ArrowDown"===e.key&&(this.changeValue(-this.step),e.preventDefault())},changeValue(e){let t=(this.value||0)+e;t=Math.max(Math.min(t,this.max),this.min),this.$emit("changed",parseFloat(t.toFixed(this.decimals)))},startIncrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(this.step),setTimeout((()=>{this.isPressed&&(this.interval=setInterval((()=>this.changeValue(this.step)),50))}),400)},startDecrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(-this.step),setTimeout((()=>{this.isPressed&&(this.interval=setInterval((()=>this.changeValue(-this.step)),50))}),400)},stopChange(){this.isPressed=!1,clearInterval(this.interval)}}},Os=(0,w.A)(Ds,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",Ms,[(0,r.withDirectives)((0,r.createElementVNode)("input",{ref:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.formattedValue=e),onKeydown:t[1]||(t[1]=(...e)=>a.onKeyDown&&a.onKeyDown(...e)),onDblclick:t[2]||(t[2]=(...e)=>a.onFocus&&a.onFocus(...e)),class:"comma-number-input"},null,544),[[r.vModelText,a.formattedValue]]),(0,r.createElementVNode)("div",Rs,[(0,r.createElementVNode)("button",{onMousedown:t[3]||(t[3]=(...e)=>a.startIncrement&&a.startIncrement(...e)),onMouseup:t[4]||(t[4]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[5]||(t[5]=(...e)=>a.stopChange&&a.stopChange(...e))},"▲",32),(0,r.createElementVNode)("button",{onMousedown:t[6]||(t[6]=(...e)=>a.startDecrement&&a.startDecrement(...e)),onMouseup:t[7]||(t[7]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[8]||(t[8]=(...e)=>a.stopChange&&a.stopChange(...e))},"▼",32)])])}]]),Ps={style:{display:"grid","grid-template-columns":"96px 1fr"}},Ls={style:{"text-align":"center"}},Fs={props:{selected:{type:Object},values:{type:Object,default:{property:"intensity ",step:.01}},label:{type:String}},watch:{selected(){this.val=this.$app.project.readElementProp(this.selected.uid,this.values.property)}},data:()=>({val:0}),mounted(){this.val=this.$app.project.readElementProp(this.selected.uid,this.values.property)},methods:{updateValue(e){this.selected.properties||(this.selected.properties={}),this.selected.properties[this.values.property]||(this.selected.properties[this.values.property]=1),this.selected.properties[this.values.property]=e,this.$app.project.updateElementProps(this.selected.uid,{[this.values.property]:e}),this.val=this.$app.project.readElementProp(this.selected.uid,this.values.property)}}},js=(0,w.A)(Fs,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("FloatInput");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Ps,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.label),1),(0,r.createElementVNode)("div",Ls,[(0,r.createVNode)(i,{min:o.values.min||0,step:o.values.step||.01,value:s.val,onChanged:a.updateValue},null,8,["min","step","value","onChanged"])])])}]]),Us={style:{display:"flex",gap:"7px"}},Hs={style:{display:"flex",gap:"3px"}},qs={style:{display:"flex",gap:"3px"}},zs={style:{display:"flex",gap:"3px"}},Gs={props:{values:{type:Object,default:new Q.Vector3},decimals:{type:Number,default:4},step:{type:Number,default:1}},methods:{updateValue(e,t){"number"==typeof t&&(this.values[e]=t,this.$emit("update:values",this.values))}}},Ws=(0,w.A)(Gs,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("FloatInput");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Us,[(0,r.createElementVNode)("div",Hs,[t[3]||(t[3]=(0,r.createElementVNode)("label",{style:{"font-size":"1.2em"}},"x",-1)),(0,r.createVNode)(i,{value:o.values.x,decimals:o.decimals,step:o.step,onChanged:t[0]||(t[0]=e=>a.updateValue("x",e))},null,8,["value","decimals","step"])]),(0,r.createElementVNode)("div",qs,[t[4]||(t[4]=(0,r.createElementVNode)("label",{style:{"font-size":"1.2em"}},"y",-1)),(0,r.createVNode)(i,{value:o.values.y,decimals:o.decimals,step:o.step,onChanged:t[1]||(t[1]=e=>a.updateValue("y",e))},null,8,["value","decimals","step"])]),(0,r.createElementVNode)("div",zs,[t[5]||(t[5]=(0,r.createElementVNode)("label",{style:{"font-size":"1.2em"}},"z",-1)),(0,r.createVNode)(i,{value:o.values.z,decimals:o.decimals,step:o.step,onChanged:t[2]||(t[2]=e=>a.updateValue("z",e))},null,8,["value","decimals","step"])])])}]]),Xs={style:{display:"flex","align-items":"center",gap:"1px","flex-direction":"column"}},Ys={key:0,class:"tools"},Ks={key:1,class:"titleinfo"},Js={data:()=>({expanded:!0}),props:{label:String,values:{type:Object,default:new Q.Vector3},decimals:{type:Number,default:2},step:{type:Number,default:1}},watch:{values(e,t){}}},Zs=(0,w.A)(Js,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("V3");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Xs,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["title",s.expanded?"":"min"])},[(0,r.createElementVNode)("div",{class:"label",onClick:t[0]||(t[0]=e=>s.expanded=!s.expanded)},(0,r.toDisplayString)(s.expanded?"▼":"▶")+" "+(0,r.toDisplayString)(o.label),1),s.expanded?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ys,[(0,r.renderSlot)(e.$slots,"tools",{},void 0,!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",Ks,"x:"+(0,r.toDisplayString)(o.values.x.toFixed(o.decimals))+",y:"+(0,r.toDisplayString)(o.values.y.toFixed(o.decimals))+",z:"+(0,r.toDisplayString)(o.values.z.toFixed(o.decimals)),1))],2),s.expanded?((0,r.openBlock)(),(0,r.createBlock)(i,{key:0,values:o.values,decimals:o.decimals,step:o.step,"onUpdate:values":t[1]||(t[1]=t=>e.$emit("update:values",t))},null,8,["values","decimals","step"])):(0,r.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-043ee8ac"]]),Qs={style:{display:"flex","align-items":"center",gap:"3px","flex-direction":"column"}},er={class:"label"},tr={key:0,class:"tools"},or={key:1,class:"titleinfo"},nr={data:()=>({expanded:!0}),props:{quaternion:Object,label:String,values:Object,decimals:{type:Number,default:2},step:{type:Number,default:1}},methods:{onChangeVal(e){e.x>359&&(e.x=0),e.x<-359&&(e.x=0),e.y>359&&(e.y=0),e.y<-359&&(e.y=0),e.z>359&&(e.z=0),e.z<-359&&(e.z=0),this.$emit("update:values",{x:ne(Math.round(e.x)),y:ne(Math.round(e.y)),z:ne(Math.round(e.z))})}},mounted(){},computed:{formattedValue:{get(){return{x:Math.round(oe(this.values.x)),y:Math.round(oe(this.values.y)),z:Math.round(oe(this.values.z))}},set(e){this.$emit("update:values",{x:ne(Math.round(e.x)),y:ne(Math.round(e.y)),z:ne(Math.round(e.z))})}}}},sr=(0,w.A)(nr,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("V3");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Qs,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["title",s.expanded?"":"min"]),onClick:t[0]||(t[0]=e=>s.expanded=!s.expanded)},[(0,r.createElementVNode)("div",er,(0,r.toDisplayString)(s.expanded?"▼":"▶")+" "+(0,r.toDisplayString)(o.label),1),s.expanded?((0,r.openBlock)(),(0,r.createElementBlock)("div",tr,[(0,r.renderSlot)(e.$slots,"tools",{},void 0,!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",or,"x:"+(0,r.toDisplayString)(a.formattedValue.x)+",y:"+(0,r.toDisplayString)(a.formattedValue.y)+",z:"+(0,r.toDisplayString)(a.formattedValue.z),1))],2),s.expanded?((0,r.openBlock)(),(0,r.createBlock)(i,{key:0,values:a.formattedValue,decimals:o.decimals,step:o.step,"onUpdate:values":a.onChangeVal},null,8,["values","decimals","step","onUpdate:values"])):(0,r.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-4c8a5658"]]),rr={class:"block_container"},ar={key:0,class:"editrow"},ir={class:"label"},lr={name:"LabelEditor",props:["value","editable","label","tooltip"],data:()=>({editMode:!1,val:""}),watch:{value(){this.editMode=!1}},methods:{endEdit(){return this.editMode?(this.editMode=!1,this.val):this.value}}},cr=(0,w.A)(lr,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",rr,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.label),1),e.editMode?((0,r.openBlock)(),(0,r.createElementBlock)("div",ar,[(0,r.withDirectives)((0,r.createElementVNode)("input",{class:"editinput","onUpdate:modelValue":t[0]||(t[0]=t=>e.val=t)},null,512),[[r.vModelText,e.val]]),(0,r.createVNode)(i,{class:"okicon",value:"checkmark",size:"1em",onClick:t[1]||(t[1]=t=>{e.$emit("update:value",e.val),e.editMode=!1})})])):(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"editrow",onClick:t[2]||(t[2]=t=>{e.val=o.value,e.editMode=!0}),key:"tooltip-"+o.value},[(0,r.createElementVNode)("span",ir,(0,r.toDisplayString)(o.value),1),(0,r.createVNode)(i,{value:"pencil",size:"1em"})])),[[l,o.tooltip||o.value]])])])}],["__scopeId","data-v-08a6e69f"]]),dr={style:{display:"grid","grid-template-columns":"96px 1fr"}},pr={style:{"text-align":"center"}},mr={name:"EditColor",props:{selected:{type:Object},label:{type:String},values:{type:Object,default:{property:"color"}}},watch:{selected(){this.val=`#${this.$app.project.readElementProp(this.selected.uid,this.values.property).getHexString()}`}},data:()=>({val:"#ffff00"}),mounted(){this.val=`#${this.$app.project.readElementProp(this.selected.uid,this.values.property).getHexString()}`},methods:{updateColor(e){this.selected.properties||(this.selected.properties={}),this.selected.properties[this.values.property]||(this.selected.properties[this.values.property]={type:"Color",args:[e.target.value]}),this.selected.properties[this.values.property]={type:"Color",args:[e.target.value]},this.$app.project.updateElementProps(this.selected.uid,{color:{type:"Color",args:[e.target.value]}}),this.val=`#${this.$app.project.readElementProp(this.selected.uid,this.values.property).getHexString()}`}}},ur=(0,w.A)(mr,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",dr,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.label),1),(0,r.createElementVNode)("div",pr,[(0,r.withDirectives)((0,r.createElementVNode)("input",{style:{width:"100%"},ref:"col",type:"color",id:"colorPicker","onUpdate:modelValue":t[0]||(t[0]=e=>s.val=e),onInput:t[1]||(t[1]=(...e)=>a.updateColor&&a.updateColor(...e))},null,544),[[r.vModelText,s.val]])])])}]]),hr={style:{display:"grid","grid-template-columns":"96px 1fr"}},fr={name:"Label",props:{label:{type:String},selected:{type:Object}}},vr=(0,w.A)(fr,[["render",function(e,t,o,n,s,a){return(0,r.openBlock)(),(0,r.createElementBlock)("div",hr,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.label),1),(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.selected.type),1)])}]]),yr={class:"container"},gr={class:"list-container"},Er={class:"grid"},br=["onClick"],kr={class:"textwrap w100 tcenter"},_r={class:"textwrap w100"},wr={style:{display:"flex","justify-content":"center"}},Sr={key:0,class:"info"},Nr={name:"ItemsLib",data:()=>({current:null}),props:{selected:{type:Object},list:{type:Array},options:{type:Object,default:{id:"uid",name:"name",icon:"icon",icontip:"tooltip"}}},watch:{selected:{handler(e,t){this.current=e},deep:!0}},methods:{selectItem(e){this.current=e,this.$emit("select",e)}}},xr=(0,w.A)(Nr,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("icon"),l=(0,r.resolveDirective)("tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",yr,[(0,r.createElementVNode)("div",gr,[(0,r.createElementVNode)("div",Er,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.list,((t,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{onClick:e=>a.selectItem(t),class:"grid-element"},[(0,r.renderSlot)(e.$slots,"item",{},(()=>[(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",kr,[(0,r.createTextVNode)((0,r.toDisplayString)(t.name||t.uid),1)])),[[l,t.name||t.uid]]),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",_r,[(0,r.createTextVNode)((0,r.toDisplayString)(t.url),1)])),[[l,t.url]]),(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",wr,[(0,r.createVNode)(i,{value:t.icon,size:"2em"},null,8,["value"])])),[[l,t.type]])]),!0)],8,br)))),256))])]),s.current?((0,r.openBlock)(),(0,r.createElementBlock)("div",Sr,[(0,r.renderSlot)(e.$slots,"edit",{current:s.current},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.$slots),1)]),!0)])):(0,r.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-f00e648a"]]),Br={class:"form-container"},Cr={class:"info"},Ir={class:"row"},$r={class:"rowvalue"},Vr={class:"row"},Ar={class:"rowvalue"},Tr={class:"row"},Mr={class:"rowvalue"},Rr={name:"ModuleEdit",props:{current:{type:Object,default:{name:"-"}}},methods:{onEdit(e,t){this.$emit("edit",e,t)}}},Dr=(0,w.A)(Rr,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("LabelEdit");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Br,[(0,r.createElementVNode)("div",Cr,[(0,r.createElementVNode)("div",Ir,[t[3]||(t[3]=(0,r.createElementVNode)("div",{class:"rowlabel"},"Имя",-1)),(0,r.createElementVNode)("div",$r,[(0,r.createVNode)(i,{style:{width:"100%"},"onUpdate:value":t[0]||(t[0]=e=>a.onEdit("name",e)),tooltip:"Имя модуля",value:o.current.name},null,8,["value"])])]),(0,r.createElementVNode)("div",Vr,[t[4]||(t[4]=(0,r.createElementVNode)("div",{class:"rowlabel"},"Ссылка",-1)),(0,r.createElementVNode)("div",Ar,[(0,r.createVNode)(i,{style:{width:"100%"},"onUpdate:value":t[1]||(t[1]=e=>a.onEdit("entry",e)),value:o.current.entry},null,8,["value"])])]),(0,r.createElementVNode)("div",Tr,[t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"rowlabel"},"Точка входа",-1)),(0,r.createElementVNode)("div",Mr,[(0,r.createVNode)(i,{style:{width:"100%"},"onUpdate:value":t[2]||(t[2]=t=>e.$emit("edit","index",t)),tooltip:"Имя основного блока",value:o.current.index},null,8,["value"])])])])])}]]),Or={class:"form-container"},Pr={class:"info"},Lr={class:"row"},Fr={class:"rowvalue"},jr={class:"row"},Ur={class:"rowvalue"},Hr=["value"],qr=["value"],zr={key:1},Gr={class:"row"},Wr={class:"rowvalue"},Xr={key:0},Yr={name:"AssetEdit",props:{current:{type:Object,default:{name:"-"}},progress:{type:Number}},computed:{types(){return this.$app.assets.types}},methods:{end(){this.$emit("edit","name",this.$refs.nameeditor.endEdit()),this.$emit("edit","url",this.$refs.urleditor.endEdit())}}},Kr=(0,w.A)(Yr,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("LabelEdit");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Or,[(0,r.createElementVNode)("div",Pr,[(0,r.createElementVNode)("div",Lr,[t[3]||(t[3]=(0,r.createElementVNode)("div",{class:"rowlabel"},"NAME",-1)),(0,r.createElementVNode)("div",Fr,[(0,r.createVNode)(i,{style:{width:"100%"},ref:"nameeditor","onUpdate:value":t[0]||(t[0]=t=>e.$emit("edit","name",t)),value:o.current.name},null,8,["value"])])]),(0,r.createElementVNode)("div",jr,[t[4]||(t[4]=(0,r.createElementVNode)("div",{class:"rowlabel"},"TYPE",-1)),(0,r.createElementVNode)("div",Ur,[o.current.uid?((0,r.openBlock)(),(0,r.createElementBlock)("div",zr,(0,r.toDisplayString)(o.current.type),1)):((0,r.openBlock)(),(0,r.createElementBlock)("select",{key:0,class:"typeslist",value:o.current.type,onChange:t[1]||(t[1]=t=>e.$emit("edit","type",t.target.value))},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.types,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{value:e},(0,r.toDisplayString)(e),9,qr)))),256))],40,Hr))])]),(0,r.createElementVNode)("div",Gr,[t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"rowlabel"},"URL",-1)),(0,r.createElementVNode)("div",Wr,[(0,r.createVNode)(i,{style:{width:"100%"},ref:"urleditor","onUpdate:value":t[2]||(t[2]=t=>e.$emit("edit","url",t)),value:o.current.url},null,8,["value"])])])]),o.progress>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",Xr,(0,r.toDisplayString)(o.progress),1)):(0,r.createCommentVNode)("v-if",!0)])}]]),Jr={class:"importer"},Zr={class:"row"},Qr={class:"row"},ea={class:"label"},ta={class:"row"},oa={class:"label"},na={class:"row"},sa={class:"label"},ra={name:"Importer",data:()=>({merge:!1,assets:new Set,elements:new Set,slides:new Set}),methods:{onChangeElements(e){e.isSelected?this.elements.add(e.path):this.elements.delete(e.path),this.$emit("changelist",{assets:this.assets,elements:this.elements,slides:this.slides})},onChangeSlides(e){e.isSelected?this.slides.add(e.uid):this.slides.delete(e.uid),this.$emit("changelist",{assets:this.assets,elements:this.elements,slides:this.slides})},onChangeAssets(e){e.isgroup?e.isSelected?e.children.map((e=>this.assets.add(e.uid))):this.assets.clear():e.isSelected?this.assets.add(e.uid):this.assets.delete(e.uid),this.$emit("changelist",{assets:this.assets,elements:this.elements,slides:this.slides})}},props:{project:{type:Object}},components:{TreeView:Yt},computed:{assetsTree(){return this.project.assets.reduce(((e,t)=>{let o=e.find((e=>e.type===t.type));return o||(o={isgroup:!0,type:t.type,children:[],uid:t.type},e.push(o)),o.children.push(t),e}),[])}}},aa=(0,w.A)(ra,[["render",function(e,t,o,n,s,a){const i=(0,r.resolveComponent)("TreeView");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Jr,[(0,r.createElementVNode)("div",Zr,[(0,r.createElementVNode)("div",null,[t[2]||(t[2]=(0,r.createTextVNode)("Импортировать в текущий проект ")),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox",onChange:t[0]||(t[0]=t=>e.$emit("options",{merge:s.merge})),"onUpdate:modelValue":t[1]||(t[1]=e=>s.merge=e)},null,544),[[r.vModelCheckbox,s.merge]])])]),(0,r.createElementVNode)("div",Qr,[t[3]||(t[3]=(0,r.createElementVNode)("div",{class:"title"},"Ресурсы",-1)),(0,r.createElementVNode)("div",null,[(0,r.createVNode)(i,{childsFiled:"children",tree:a.assetsTree,onChangeSelect:a.onChangeAssets},{label:(0,r.withCtx)((({node:e})=>[(0,r.createElementVNode)("div",ea,(0,r.toDisplayString)(e.name||e.uid),1)])),_:1},8,["tree","onChangeSelect"])])]),(0,r.createElementVNode)("div",ta,[t[4]||(t[4]=(0,r.createElementVNode)("div",{class:"title"},"Элементы",-1)),(0,r.createElementVNode)("div",null,[(0,r.createVNode)(i,{childsFiled:"childrenz",tree:o.project.elements,onChangeSelect:a.onChangeElements},{label:(0,r.withCtx)((({node:e})=>[(0,r.createElementVNode)("div",oa,(0,r.toDisplayString)(e.name||e.uid),1)])),_:1},8,["tree","onChangeSelect"])])]),(0,r.createElementVNode)("div",na,[t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"title"},"Слайды",-1)),(0,r.createElementVNode)("div",null,[(0,r.createVNode)(i,{childsFiled:"childrenz",tree:o.project.slides,onChangeSelect:a.onChangeSlides},{label:(0,r.withCtx)((({node:e})=>[(0,r.createElementVNode)("div",sa,(0,r.toDisplayString)(e.name||e.uid),1)])),_:1},8,["tree","onChangeSelect"])])])])}]]);let ia="defaultDB",la=null,ca=[],da="id";class pa{static Init(e,t,o="id"){ia=e,ca=t,da=o}static async openDatabase(e){return new Promise(((t,o)=>{const n=indexedDB.open(ia);n.onupgradeneeded=e=>{const t=e.target.result;for(let e=0;e<ca.length;e++)t.objectStoreNames.contains(ca[e])||t.createObjectStore(ca[e],{keyPath:da,autoIncrement:!1})},n.onsuccess=n=>{if(la=n.target.result,la.objectStoreNames.contains(e))t(la);else{la.close();const n=la.version+1,s=indexedDB.open(ia,n);s.onupgradeneeded=t=>{t.target.result.createObjectStore(e,{keyPath:"id",autoIncrement:!0})},s.onsuccess=e=>{la=e.target.result,t(la)},s.onerror=e=>{o(e.target.error)}}},n.onerror=e=>{o(e.target.error)}}))}static async addItem(e,t){const o=(await pa.openDatabase(e)).transaction(e,"readwrite");return o.objectStore(e).add(t),new Promise((e=>{o.oncomplete=()=>e(),o.onerror=()=>e()}))}static async addItems(e,t){const o=[];for(let n=0;n<t.length;n++)o.push(pa.addItem(e,t[n]));await Promise.all(o)}static async getItem(e,t){const o=(await pa.openDatabase(e)).transaction(e,"readonly").objectStore(e);return new Promise(((e,n)=>{const s=o.get(t);s.onsuccess=()=>e(s.result),s.onerror=()=>e()}))}static async deleteItem(e,t){const o=(await this.openDatabase(e)).transaction(e,"readwrite").objectStore(e);return new Promise(((e,n)=>{const s=o.delete(t);s.onsuccess=()=>e(),s.onerror=()=>n()}))}static async getAllItems(e){const t=(await pa.openDatabase(e)).transaction(e,"readonly").objectStore(e);return new Promise(((e,o)=>{const n=t.getAll();n.onsuccess=()=>e(n.result),n.onerror=()=>e()}))}static async updateItem(e,t){const o=(await pa.openDatabase(e)).transaction(e,"readwrite").objectStore(e);return new Promise(((e,n)=>{const s=o.put(t);s.onsuccess=()=>e(t),s.onerror=()=>n()}))}static async updateItemProperties(e,t,o){const n=(await pa.openDatabase(e)).transaction(e,"readwrite").objectStore(e);return new Promise(((e,s)=>{const r=n.get(t);r.onsuccess=()=>{const t=r.result;if(t){Object.assign(t,o);const r=n.put(t);r.onsuccess=()=>e(),r.onerror=()=>s()}else s("Item not found")},r.onerror=()=>s()}))}static async upsertItemProperties(e,t,o){const n=(await pa.openDatabase(e)).transaction(e,"readwrite").objectStore(e);return new Promise(((e,s)=>{const r=n.get(t);r.onsuccess=()=>{let a=r.result;if(a){Object.assign(a,o);const t=n.put(a);t.onsuccess=()=>e(),t.onerror=()=>s()}else{const r={...o,id:t},a=n.add(r);a.onsuccess=()=>e(),a.onerror=()=>s()}},r.onerror=()=>s()}))}}const ma=pa;var ua=o(949);let ha=0;const fa=(0,r.reactive)({list:[],add({message:e,icon:t,onclick:o,timehide:n=!0,type:s,...a},i=(0,r.markRaw)(Rn)){const l=(0,r.reactive)({id:ha++,data:{message:e,icon:t,type:s,...a},component:i});return n&&(l.timeout=setTimeout((()=>{fa.remove(l.id)}),3e3)),l.onclick=o||fa.remove.bind(this,l.id),fa.list.push(l),l},remove(e){for(let t=fa.list.length-1;t>=0;t--)fa.list[t].id===e&&fa.list.splice(t,1)}}),va=fa,ya=(0,r.ref)(!1),ga=(0,r.reactive)({isVisible:!1,header:null,content:null,footer:null,values:null,open({header:e,content:t,footer:o,...n}){ga.header=e||{},ga.content=t||{},ga.footer=o||{},ga.values={closable:!1,...n},ya.value=!0},close(e){e||(ya.value=!1)},get isVisible(){return ya.value}}),Ea=ga,ba=[{name:"engine",entry:"/editor/engine/mf.js",index:"engine"},{name:"tweens",entry:"../mods/tweens/mf.js",index:"tweens"}],ka=[];const _a=(0,r.reactive)({init:async function(){ka.length=0,await(0,ua.registerRemotes)([...ba,..._a.remotes.map((e=>({name:e.scope,entry:e.url})))]);const e=ba.map((e=>new Promise((t=>{(0,ua.loadRemote)(`${e.name}/${e.index}`).then((o=>{ka.push({module:o,name:e.name,index:e.index,entry:e.entry}),t()}))}))));await Promise.all(e),await async function(){const e=await ma.getAllItems("modules");await(0,ua.registerRemotes)(e);const t=e.map((e=>new Promise((t=>{(0,ua.loadRemote)(`${e.name}/${e.index}`).then((o=>{ka.push({module:o,name:e.name,index:e.index,entry:e.entry}),t()}))}))));await Promise.all(t)}()},openForm:function(){let e=(0,r.ref)(null);const t={label:"Сохранить",class:"secondary",handler:async()=>{try{await async function(e){(0,ua.registerRemotes)([e]),await(0,ua.loadRemote)(`${e.name}/${e.index}`),await async function(e){await ma.upsertItemProperties("modules",e.index,{id:e.index,...e})}(e)}(e.value)}catch(e){return void va.add({message:"Ошибка при загрузке модуля"})}va.add({message:"Модуль успешно загружен"}),Ea.close()}},o={label:"Регистрация",class:"secondary",handler:async()=>{n.splice(0,1),n.unshift(t),e.value={name:"ModuleName"}}},n=(0,r.reactive)([o,{label:"Отмена",class:"primary",handler:async()=>{Ea.close()}}]);Ea.open({header:{value:"Управление модулями",handler:()=>{Ea.close()}},content:{component:"ItemsLib",props:{list:ka,selected:e},events:{select:t=>e.value=t},slots:{edit:{component:"ModuleEdit",props:{selected:e.value},events:{edit:(t,o)=>{e.value[t]=o}}}}},footer:{buttons:n}})},remotes:[],async save(){await IndexedDBManager.updateItem(STORENAME_OPTS,{id:"extensions.remotes",value:JSON.parse(JSON.stringify(_a.remotes))})},async load(e,t){const o=await(0,ua.loadRemote)(`${e}/${t}`);return o.default||o},loads:async e=>(await Promise.allSettled(e.map((e=>(0,ua.loadRemote)(`${e.scope}/${e.module}`))))).map((e=>e.default||e))}),wa=_a;let Sa;const Na={},xa=[],Ba=(0,r.reactive)({ready:!1,getAssetsManager:()=>Na.AssetsManager,getSlidesManager:()=>Na.SlidesManager,getFactory:()=>Na.Factory,getManager:e=>Na[e]||Sa,async load(){const{AssetsManager:e,CssManager:t,MouseManager:o,ActionsManager:n,ElementModel:s,ProjectManager:r,SlidesManager:a,Factory:i,Manager:l,assets:c}=await wa.load("engine","engine");Na.AssetsManager=e,Na.SlidesManager=a,Na.Factory=i,Na.MouseManager=o,Na.ActionsManager=n,Na.CssManager=t,Sa=r,Ba.ready=!0;const d=[];for(let e=0;e<xa.length;e++)d.push(xa[e](Sa));return xa.length=0,await Promise.all(d),Sa},onload(e){xa.push(e)}}),Ca=Ba,Ia=ko.default||ko,$a=(0,r.reactive)({init:async function(){const e=await ma.getAllItems("actions");await Ca.getManager("ActionsManager").Init(e),$a.list=e},addAction(e){$a.list[e.uid]=e},parameters:{tween:[{type:"float",name:"delay",default:0},{type:"float",name:"time",default:0}]},list:{},get values(){return Object.values($a.list)},library:[],async registerActionComponent(e=[]){const t=Object.fromEntries(e.map((e=>[e.id,e.value]))),{name:o,entry:n,ui:s,action:r}=t;wa.add({name:o,entry:n}),await wa.load(o,o)},openLib(e){let t=(0,r.reactive)({selected:null});Ea.open({header:{value:"Создать новый исполнитель (action)",handler:()=>{Ea.close(),e()}},content:{component:"ActionsLib",props:t},footer:{buttons:[{label:"Регистрация",handler:()=>{t.selected={}}},{label:"Закрыть",handler:()=>{Ea.close(),e()}}]}})},exportData:()=>JSON.parse(JSON.stringify($a.list))});Ia.On("init",(()=>{}));const Va=$a;async function Aa(e,t,o,n){let s=n||function(){};const r=Ta.list.find((t=>t.uid===e.uid));if(r)Object.keys(e).forEach((t=>{r[t]=e[t]})),await Ca.getAssetsManager().UpdateAsset(e,o.prop,s),await ma.updateItem("assets",JSON.parse(JSON.stringify({id:e.uid,...e})));else{e.uid=`asset_${Date.now()}`;try{await Ca.getAssetsManager().AddAsset(e,s)}catch(e){return void va.add({message:"Ошибка при загрузке ресурса: "+e.message})}Ta.list.push(e),await ma.addItem("assets",JSON.parse(JSON.stringify({id:e.uid,...e}))),va.add({message:"Ресурс успешно загружен"})}}const Ta=(0,r.reactive)({init:async function(){const e=await ma.getAllItems("assets");await Ca.getManager("AssetsManager").Init(e),e.forEach((e=>e.isAsset=!0)),Ta.list.push(...e)},save:Aa,updateAsset:async function(e,t,o){await Ca.getAssetsManager().UpdateAsset(e,t,o),await ma.updateItem("assets",JSON.parse(JSON.stringify({id:e.uid,...e})))},selectAsset:function(e,t){const o=(0,r.reactive)({selected:null,list:Ta.list.filter((t=>!e.includes(t.type)))}),n={label:"Выбрать",class:"secondary",handler:async()=>{t(o.selected),Ea.close()}},s={label:"Регистрация",class:"secondary",handler:async()=>{a.splice(0,1),a.unshift(n),o.selected={name:"",type:Ta.list.filter((t=>!e.includes(t.type)))[0],url:""}}},a=(0,r.reactive)([s,{label:"Отмена",class:"primary",handler:async()=>{Ea.close()}}]);Ea.open({header:{value:"Выберите ресурс",handler:()=>{Ea.close()}},content:{component:"ItemsLib",props:o,events:{select:e=>{o.selected=e,2===a.length&&a.unshift(n)}},slots:{edit:{component:"AssetEdit",props:{selected:o.selected},events:{edit:(e,t)=>{o.selected[e]=t}}}}},footer:{buttons:a}})},editAsset:function(e){const t=(0,r.reactive)({current:e}),o=(0,r.reactive)([{label:"Сохранить",class:"secondary",handler:async()=>{await Aa(e,0,null,(({loaded:t,total:o})=>{e.progress=t/o*100})),Ea.close()}},{label:"Отмена",class:"primary",handler:async()=>{Ea.close()}}]);Ea.open({header:{value:"Выберите ресурс",handler:()=>{Ea.close()}},content:{component:"AssetEdit",props:t,events:{edit:(t,o)=>{e[t]=o}}},footer:{buttons:o}})},types:["gltf","texture","hdr"],list:[],get assetsTree(){return Ta.list.reduce(((e,t)=>{let o=e.find((e=>e.type===t.type));return o||(o={isgroup:!0,type:t.type,children:[],uid:t.type},e.push(o)),o.children.push(t),e}),[])},removeAsset(e){const t=Ta.list.findIndex((t=>t.uid===e.uid));if(t>=0){const e=Ta.list.splice(t,1);Ca.getAssetsManager().RemoveAsset(e[0])}},exportData:()=>JSON.parse(JSON.stringify(Ta.list))}),Ma=Ta,Ra=(0,r.reactive)({uid:"",selected:null,slide:{},select(e){if(Ra.selected=e,!Ra.selected)return le.Select(null),void(Ra.uid=null);Ra.uid=Ra.selected.uid,e.model?.isElement&&le.Select(Ra.selected.model)}}),Da=Ra;async function Oa(e){const t=Pa.list.find((t=>t.uid===e.paths[0])).exportData();await ma.updateItem("elements",{id:t.uid,...t})}const Pa=(0,r.reactive)({init:async function(){const e=await ma.getAllItems("elements");if(0===e.length){const t={uid:"camroot",type:"block",path:"camroot",paths:["camroot"],children:[{uid:"maincam",type:"PerspectiveCamera",path:"camroot.maincam",paths:["camroot","maincam"]}]};e.push(t),await ma.addItem("elements",{id:t.uid,...t})}const t=await Ca.getManager().Build(e);for(let e=0;e<t.length;e++){const o=t[e],n=(0,r.reactive)(o);Pa.list.push(n)}},create:async function(e,t){let o;if(t){let e=Pa.list;for(let n=0;n<t.paths.length;n++){const s=t.paths[n];o=e.find((e=>e.uid===s)),e=o.children}}const n=await Ca.getManager("Factory").BuildElement(e,o||Ca.getManager().Root),s=n.exportData();n.isBlock?(Pa.list.push(n),await ma.addItem("elements",{id:s.uid,...s})):(t.data.children.push(n.data),Oa(n.data))},edit:function(e,t,o){t in e||(e[t]=o,(0,r.watch)((()=>e[t]),(o=>{e.model[t]=o}))),e.data[t]=e[t]=e.model[t]=o,Oa(e)},remove:async function(e){if(Da.selected===e&&Da.select(null),e.isBlock){slides.removeState(e.uid);const t=Pa.list.findIndex((t=>t.uid===e.uid));t>=0&&Pa.list.splice(t,1),await ma.deleteItem("elements",e.uid)}else{const t=e.parent;t.remove(e);const o=t.data.children.findIndex((t=>t.uid===e.uid));o>=0&&t.data.children.splice(o,1),Oa(t)}},findElement:function(e){let t=Pa,o=Pa.list;for(let n=0;n<e.length;n++)t=o.find((t=>t.uid===e[n])),o=t.children;return t},save:Oa,exportData:function(){const e=Pa.list.map((e=>e.exportData()));return JSON.parse(JSON.stringify(e))},types:["block","model","camera","DirectionalLight","AmbientLight"],list:[]}),La=Pa,Fa={uid:null,path:"",type:"slide",name:"New Slide",children:[]};let ja;const Ua=(0,r.reactive)({init:async function(){const e=await ma.getAllItems("slides");if(0===e.length){const t={uid:"base",type:"slide",name:"Base",scene:{background:{},environment:{}},camera:{uid:"camroot.maincam"},children:[{uid:"camroot"}]};e.push(t),await ma.addItem("slides",{id:t.uid,...t})}Ua.list.length=0,ja=Ca.getSlidesManager(),ja.on("change",((e,t)=>{Ua.actived=Ua.list.find((t=>t.uid===e.uid))}));const t=ja.AddSlides(e);for(let e=0;e<t.length;e++){const o=(0,r.reactive)(t[e]);for(let e=0;e<o.children.length;e++){const t=(0,r.reactive)(o.children[e]);t.model=La.findElement(t.paths),t.model.state=t,o.children[e]=t}Ua.list.push(o)}},create:function(e){e.uid=`sl${Date.now()}`;const t={...structuredClone(Fa),...e},o=ja.AddSlide(t),n=(0,r.reactive)(o);return Ua.list.push(n),va.add({message:`Слайд ${n.name} добавлен`}),n},edit:function(e){},remove:function(e){},createState:function(){},editState:function(){},removeState:function(){},save:async function(e){const t=e.exportData();await ma.updateItem("slides",{id:t.uid,...t})},saveState:async function(e){const t=e.slide.exportData();await ma.updateItem("slides",{id:t.uid,...t})},actived:null,list:[],async goto(e){Ua.actived="number"==typeof e?Ua.list[e]:Ua.list.find((t=>t.uid===e)),await Ca.getSlidesManager().GoTo(e),Da.select(null)},update(){},remove(){},find:e=>Ua.list.find((t=>t.uid===e)),async addState(e,t){const o=Ua.list.find((t=>t.uid===e)),n=La.findElement(t),s={uid:n.uid,name:n.name||"",paths:n.paths},a=Ca.getSlidesManager().CreateState(s),i=(0,r.reactive)(a);i.model=La.findElement(n.paths),i.model.state=i,o.addState(i),a.activate(),await saveSlide(o)},removeState(e,t){for(let o=0;o<Ua.list.length;o++){const n=Ua.list[o];if(t&&n.uid!==t)continue;const s=n.children.findIndex((t=>t.path===e));s>=0&&n.children.splice(s,1).forEach((e=>{e.model.state=null,e.model.visible=!1}))}},exportData:()=>JSON.parse(JSON.stringify(Ua.list.map((e=>({...e.exportData(),children:e.children.map((e=>({...e.data})))})))))}),Ha=Ua,qa=o.p+"5f00000410434e1a50e7.json",za=ko.default||ko,Ga=[qa];let Wa;async function Xa(e,t,o){return/Mobi|Android/i.test(navigator.userAgent)?async function(e,t){t.getContext("2d").drawImage(document.documentElement,0,0,t.width,t.height);const o=t.toDataURL("image/png"),n=document.createElement("a");n.href=o,n.download=`${e}.png`,n.click()}(e,t):async function(e,t={}){try{const o=(await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"tabs"},audio:!1,selfBrowserSurface:"include",surfaceSwitching:"exclude",...t})).getVideoTracks()[0];let n=new ImageCapture(o);const s=await n.grabFrame(),r=document.createElement("canvas");r.width=s.width,r.height=s.height,r.getContext("2d").drawImage(s,0,0);const a=r.toDataURL("image/png"),i=document.createElement("a");i.href=a,i.download=`${e}.png`,i.click()}catch(e){console.warn(e)}}(e,o)}async function Ya(e){const t=document.createElement("video");t.height=window.height,t.width=window.width;const o=t.srcObject=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"tabs"},audio:!1,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),n=new MediaRecorder(o),s=[];n.ondataavailable=e=>s.push(e.data),n.onerror=e=>{console.warn(e.message)},n.onstop=()=>{const t=new Blob(s,{type:"mp4"});o.getVideoTracks()[0].stop();const n=`${e}.mp4`;if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(t,n);else{const e=window.document.createElement("a");e.href=window.URL.createObjectURL(t),e.download=n,e.style="display: none",e.click()}},n.start()}function Ka(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}async function Ja(){const e={uid:"currproject",id:"currproject",actions:Va.exportData(),assets:Ma.exportData(),elements:La.exportData(),slides:Ha.exportData()};return await ma.updateItem("projects",e),e.uid}const Za=(0,r.reactive)({switchScreen:Ka,captureVideo:Ya,captureImage:Xa,init:async function(e){Wa=e,await ma.Init(e,["projects","assets","elements","slides","actions","modules"],"uid"),await za.modules.init(),await za.engine.load()},load:async function(){await za.assets.init(),await za.actions.init(),await za.elements.init(),await za.slides.init()},save:Ja,ready:!1,cameras:[],player:null,header:{buttons:[{icon:"play3",tooltip:"Запуск",handler:async function(){Za.player=window.open(`../player?src=${Wa}`,"Player")}},{icon:"floppy-disk",tooltip:"Сохранить",handler:Ja},{icon:"upload",tooltip:"Экспорт проекта",handler:async function(){const e=await async function(){const e=await Va.exportData(),t=await Ma.exportData(),o=await La.exportData(),n=await Ha.exportData();return JSON.parse(JSON.stringify({actions:e,assets:t,elements:o,slides:n}))}(),t=new Blob([JSON.stringify(e)],{type:"application/json"}),o="project.json";if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(t,o);else{const e=window.document.createElement("a");e.href=window.URL.createObjectURL(t),e.download=o,e.style="display: none",e.click()}}},{icon:"download",tooltip:"Импорт проекта",handler:async function(){try{const e=await function(e=".json"){return new Promise((t=>{const o=document.createElement("input");o.type="file",o.accept=e,o.style.display="none",o.addEventListener("change",(()=>{o.files&&o.files[0]&&t(o.files[0]),document.body.removeChild(o)})),document.body.appendChild(o),o.click()}))}(),t=await function(e){return new Promise(((t,o)=>{if(!e.name.endsWith(".json"))return void o(new Error("Выберите файл с расширением .json"));const n=new FileReader;n.onload=e=>{try{const o=JSON.parse(e.target.result);t(o)}catch(e){o(new Error("Ошибка парсинга JSON: "+e.message))}},n.onerror=()=>{o(new Error("Ошибка чтения файла"))},n.readAsText(e)}))}(e);let o=!1;const n=(0,r.reactive)({assets:{},elements:{},slides:{}});return Ea.open({header:{value:"Импорт",handler:()=>{Ea.close()}},content:{component:"Importer",props:{project:t},events:{options:e=>{o=e.merge},changelist:e=>{Object.keys(e).forEach((t=>{n[t]=e[t]}))}}},footer:{buttons:[{label:"Импорт",class:"secondary",handler:async()=>{const e=`project${Date.now()}`;await ma.Init(e,["projects","assets","elements","slides","actions","modules"],"uid"),await ma.addItems("assets",t.assets),await ma.addItems("elements",t.elements),await ma.addItems("slides",t.slides);const o=new URL(window.location.href);o.searchParams.set("project",e),window.location.href=o.toString(),Ea.close()}},{label:"Отмена",class:"primary",handler:async()=>{Ea.close()}}]}}),t}catch(e){throw console.error("Ошибка:",e.message),e}}},{icon:"pacman",tooltip:"Пример 1",handler:async function(e){const t=Ga[e],o=await fetch(t),n=await o.json(),s=`project${e}`;await ma.Init(s,["projects","assets","elements","slides","actions","modules"],"uid"),await ma.addItems("assets",n.assets),await ma.addItems("elements",n.elements),await ma.addItems("slides",n.slides);const r=new URL(window.location.href);r.searchParams.set("project",s),window.location.href=r.toString()}.bind(null,0)}]},footer:{buttons:[{icon:"camera",tooltip:"Скриншот",handler:Xa},{icon:"film",tooltip:"Видео",handler:Ya},{icon:"books",tooltip:"Модули",handler:wa.openForm},{icon:"enlarge",tooltip:"Экран",handler:Ka},{icon:"cog",tooltip:"Настройки",handler:Xa}]}}),Qa=Za,ei=(0,r.reactive)({types:["enable.on","disable.on","slide.in","slide.out","mouse.in","mouse.over","mouse.out","mouse.click","tick"]}),ti=[{type:"float",component:js}],oi={gltf:[{label:"URL",prop:"url",component:"LabelEdit"},{label:"Клонировать",component:"BoolEdit",prop:"clone"},{label:"Создавать тень",component:"BoolEdit",prop:"shadow.cast"},{label:"Получать тень",component:"BoolEdit",prop:"shadow.receive"},{label:"Карта окружения",component:"asset",prop:"envMap"}],DirectLight:[{label:"Трансформ",component:"transformedit"},{label:"Цвет",component:"EditColor",values:{property:"color"}},{label:"Интенсивность",component:"FloatValue",values:{property:"intensity",step:.1,min:0}},{label:"События",component:"EventsList"},{label:"Видимость",prop:"view",component:"BoolEdit"}],AmbientLight:[{label:"Цвет",component:"EditColor",values:{property:"color"}},{label:"Интенсивность",component:"FloatValue",values:{property:"intensity",step:.1,min:0}},{label:"События",component:"EventsList"},{label:"Видимость",prop:"view",component:"BoolEdit"}],block:[{label:"Трансформ",component:"transformedit"},{label:"Видимость",prop:"view",component:"BoolEdit"}],model:[{label:"Трансформ",component:"transformedit"},{label:"Видимость",prop:"view",component:"BoolEdit"},{label:"Ресурсы",component:"assetsview"},{label:"События",component:"EventsList"}],PerspectiveCamera:[{label:"Трансформ",component:"transformedit"},{label:"Видимость",prop:"view",component:"BoolEdit"},{label:"FOV",prop:"fov",component:"Int",onupdate(e,t,o,n){e.fov=t,e.updateProjectionMatrix(),e.exportData=function(){return JSON.parse(JSON.stringify({properties:{fov:e.fov,visible:e.visible},name:e.name,uid:e.uid,path:e.path,paths:e.paths,type:e.type}))},n(e)}}]},ni=(0,r.reactive)({ready:!1,cameras:[],getFieldTypes:()=>ti,getTypesBlock:e=>oi[e]||[]}),si=document.createElement("div");let ri;si.className="tooltip",si.style.position="absolute",si.style.visibility="hidden",document.body.appendChild(si);const ai={beforeMount(e,t){const o=()=>{ri=e,si.textContent=t.value;const o=e.getBoundingClientRect();let n=o.left+window.scrollX+o.width/2-si.offsetWidth/2,s=o.top+window.scrollY-si.offsetHeight-5;n+si.offsetWidth>window.innerWidth&&(n=window.innerWidth-si.offsetWidth-10),n<0&&(n=10),s+si.offsetHeight>window.innerHeight&&(s=o.top+window.scrollY+o.height+5),s<0&&(s=o.top+window.scrollY+o.height+5),si.style.left=`${n}px`,si.style.top=`${s}px`,si.style.visibility="visible"},n=()=>{ri===e&&(si.style.visibility="hidden")};e.__tooltipHandlers__={mouseEnterHandler:o,mouseLeaveHandler:n},e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",n)},unmounted(e){const{mouseEnterHandler:t,mouseLeaveHandler:o}=e.__tooltipHandlers__||{};t&&e.removeEventListener("mouseenter",t),o&&e.removeEventListener("mouseleave",o),ri===e&&(si.style.visibility="hidden")}},ii=ko.default||ko;(0,ua.init)({name:"3d.editor",remotes:[]});const li=window.vue=(0,r.createApp)(Jo);li.use((e=>{e.config.globalProperties.$app=ii.Init(s)})),Object.keys(n).forEach((e=>{li.component(e,n[e])})),li.provide("globalComponents",li._context.components),li.directive("tooltip",ai),li.mount("#app"),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js",{scope:"/"}).then((e=>{})).catch((e=>{console.error("SW failed:",e)}))}))},870:(e,t,o)=>{var n=o(949),s=o(448);function r(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var a=r(n);function i(e){e.S&&!e.federation.hasAttachShareScopeMap&&e.federation.instance&&e.federation.instance.shareScopeMap&&(e.S=e.federation.instance.shareScopeMap,e.federation.hasAttachShareScopeMap=!0)}const l="@",c="-",d="/",p={[l]:"scope_",[c]:"_",[d]:"__"},m={[p[l]]:l,[p[c]]:c,[p[d]]:d},u={runtime:a,instance:void 0,initOptions:void 0,bundlerRuntime:{remotes:function(e){const{chunkId:t,promises:o,chunkMapping:n,idToExternalAndNameMapping:r,webpackRequire:a,idToRemoteMap:u}=e;i(a),a.o(n,t)&&n[t].forEach((e=>{let t=a.R;t||(t=[]);const n=r[e],i=u[e];if(t.indexOf(n)>=0)return;if(t.push(n),n.p)return o.push(n.p);const h=t=>{t||(t=new Error("Container missing")),"string"==typeof t.message&&(t.message+=`\nwhile loading "${n[1]}" from ${n[2]}`),a.m[e]=()=>{throw t},n.p=0},f=(e,t,s,r,a,i)=>{try{const l=e(t,s);if(!l||!l.then)return a(l,r,i);{const e=l.then((e=>a(e,r)),h);if(!i)return e;o.push(n.p=e)}}catch(e){h(e)}};var v=(e,o,s)=>f(o.get,n[1],t,0,y,s),y=t=>{n.p=1,a.m[e]=e=>{e.exports=t()}};1===i.length&&s.FEDERATION_SUPPORTED_TYPES.includes(i[0].externalType)&&i[0].name?f((()=>{try{const e=function(e,t){try{let o=e;if(t){if(!o.startsWith(t))return o;o=o.replace(new RegExp(t,"g"),"")}return o=o.replace(new RegExp(`${p[l]}`,"g"),m[p[l]]).replace(new RegExp(`${p[d]}`,"g"),m[p[d]]).replace(new RegExp(`${p[c]}`,"g"),m[p[c]]),o}catch(e){throw e}}(i[0].name,"ENCODE_NAME_PREFIX")+n[1].slice(1),t=a.federation.instance,o=()=>a.federation.instance.loadRemote(e,{loadFactory:!1,from:"build"});return"version-first"===t.options.shareStrategy?Promise.all(t.sharedHandler.initializeSharing(n[0])).then((()=>o())):o()}catch(e){h(e)}}),n[2],0,0,y,1):f(a,n[2],0,0,((e,t,o)=>e?f(a.I,n[0],0,e,v,o):h()),1)}))},consumes:function(e){const{chunkId:t,promises:o,chunkMapping:n,installedModules:s,moduleToHandlerMapping:r,webpackRequire:a}=e;i(a),a.o(n,t)&&n[t].forEach((e=>{if(a.o(s,e))return o.push(s[e]);const t=t=>{s[e]=0,a.m[e]=o=>{delete a.c[e],o.exports=t()}},n=t=>{delete s[e],a.m[e]=o=>{throw delete a.c[e],t}};try{const i=a.federation.instance;if(!i)throw new Error("Federation instance not found!");const{shareKey:l,getter:c,shareInfo:d}=r[e],p=i.loadShare(l,{customShareInfo:d}).then((e=>!1===e?c():e));p.then?o.push(s[e]=p.then(t).catch(n)):t(p)}catch(e){n(e)}}))},I:function({shareScopeName:e,webpackRequire:t,initPromises:o,initTokens:n,initScope:r}){r||(r=[]);const a=t.federation.instance;var l=n[e];if(l||(l=n[e]={from:a.name}),r.indexOf(l)>=0)return;r.push(l);const c=o[e];if(c)return c;var d=o=>{var n=e=>{return t="Initialization of sharing external failed: "+e,"undefined"!=typeof console&&console.warn&&console.warn(t);var t};try{var s=t(o);if(!s)return;var a=o=>o&&o.init&&o.init(t.S[e],r);if(s.then)return p.push(s.then(a,n));var i=a(s);if(i&&"boolean"!=typeof i&&i.then)return p.push(i.catch(n))}catch(e){n(e)}};const p=a.initializeSharing(e,{strategy:a.options.shareStrategy,initScope:r,from:"build"});i(t);const m=t.federation.bundlerRuntimeOptions.remotes;return m&&Object.keys(m.idToRemoteMap).forEach((e=>{const t=m.idToRemoteMap[e],o=m.idToExternalAndNameMapping[e][2];if(t.length>1)d(o);else if(1===t.length){const e=t[0];s.FEDERATION_SUPPORTED_TYPES.includes(e.externalType)||d(o)}})),p.length?o[e]=Promise.all(p).then((()=>o[e]=!0)):o[e]=!0},S:{},installInitialConsumes:function(e){const{moduleToHandlerMapping:t,webpackRequire:o,installedModules:n,initialConsumes:s}=e;s.forEach((e=>{o.m[e]=s=>{n[e]=0,delete o.c[e];const r=function(e){const{moduleId:t,moduleToHandlerMapping:o,webpackRequire:n}=e,s=n.federation.instance;if(!s)throw new Error("Federation instance not found!");const{shareKey:r,shareInfo:a}=o[t];try{return s.loadShareSync(r,{customShareInfo:a})}catch(e){throw console.error('loadShareSync failed! The function should not be called unless you set "eager:true". If you do not set it, and encounter this issue, you can check whether an async boundary is implemented.'),console.error("The original error message is as follows: "),e}}({moduleId:e,moduleToHandlerMapping:t,webpackRequire:o});if("function"!=typeof r)throw new Error(`Shared module is not available for eager consumption: ${e}`);s.exports=r()}}))},initContainerEntry:function(e){const{webpackRequire:t,shareScope:o,initScope:n,shareScopeKey:s,remoteEntryInitOptions:r}=e;if(!t.S)return;if(!t.federation||!t.federation.instance||!t.federation.initOptions)return;const a=t.federation.instance;var i=s||"default";return a.initOptions({name:t.federation.initOptions.name,remotes:[],...r}),a.initShareScopeMap(i,o,{hostShareScopeMap:r?.shareScopeMap||{}}),t.federation.attachShareScopeMap&&t.federation.attachShareScopeMap(t),"function"==typeof t.federation.prefetch&&t.federation.prefetch(),t.I(i,n)}},attachShareScopeMap:i,bundlerRuntimeOptions:{}};e.exports=u},874:(e,t)=>{const o="RUNTIME-001",n="RUNTIME-002",s="RUNTIME-003",r="RUNTIME-004",a="RUNTIME-005",i="RUNTIME-006",l="RUNTIME-007",c="RUNTIME-008",d="TYPE-001",p="BUILD-001";function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},m.apply(this,arguments)}const u={[o]:"Failed to get remoteEntry exports.",[n]:'The remote entry interface does not contain "init"',[s]:"Failed to get manifest.",[r]:"Failed to locate remote.",[a]:"Invalid loadShareSync function call from bundler runtime",[i]:"Invalid loadShareSync function call from runtime",[l]:"Failed to get remote snapshot.",[c]:"Failed to load script resources."},h={[d]:"Failed to generate type declaration."},f={[p]:"Failed to find expose module."},v=m({},u,h,f);t.BUILD_001=p,t.RUNTIME_001=o,t.RUNTIME_002=n,t.RUNTIME_003=s,t.RUNTIME_004=r,t.RUNTIME_005=a,t.RUNTIME_006=i,t.RUNTIME_007=l,t.RUNTIME_008=c,t.TYPE_001=d,t.buildDescMap=f,t.errorDescMap=v,t.getShortErrorMsg=(e,t,o,n)=>{const s=[`${[t[e]]} #${e}`];return o&&s.push(`args: ${JSON.stringify(o)}`),s.push((e=>`https://module-federation.io/guide/troubleshooting/${e.split("-")[0].toLowerCase()}/${e}`)(e)),n&&s.push(`Original Error Message:\n ${n}`),s.join("\n")},t.runtimeDescMap=u,t.typeDescMap=h},949:(e,t,o)=>{var n=o(361),s=o(683);let r=null;n.setGlobalFederationConstructor(n.FederationHost),Object.defineProperty(t,"FederationHost",{enumerable:!0,get:function(){return n.FederationHost}}),Object.defineProperty(t,"Module",{enumerable:!0,get:function(){return n.Module}}),Object.defineProperty(t,"getRemoteEntry",{enumerable:!0,get:function(){return n.getRemoteEntry}}),Object.defineProperty(t,"getRemoteInfo",{enumerable:!0,get:function(){return n.getRemoteInfo}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"loadScriptNode",{enumerable:!0,get:function(){return n.loadScriptNode}}),Object.defineProperty(t,"registerGlobalPlugins",{enumerable:!0,get:function(){return n.registerGlobalPlugins}}),t.getInstance=function(){return r},t.init=function(e){const t=s.getGlobalFederationInstance(e.name,e.version);if(t)return t.initOptions(e),r||(r=t),t;{const t=n.getGlobalFederationConstructor()||n.FederationHost;return r=new t(e),n.setGlobalFederationInstance(r),r}},t.loadRemote=function(...e){return n.assert(r,"Please call init first"),r.loadRemote.apply(r,e)},t.loadShare=function(...e){return n.assert(r,"Please call init first"),r.loadShare.apply(r,e)},t.loadShareSync=function(...e){return n.assert(r,"Please call init first"),r.loadShareSync.apply(r,e)},t.preloadRemote=function(...e){return n.assert(r,"Please call init first"),r.preloadRemote.apply(r,e)},t.registerPlugins=function(...e){return n.assert(r,"Please call init first"),r.registerPlugins.apply(r,e)},t.registerRemotes=function(...e){return n.assert(r,"Please call init first"),r.registerRemotes.apply(r,e)}}},__webpack_module_cache__={},deferred,installedModules,moduleToHandlerMapping,initialConsumes,oldStartup,hasRun;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}},n={id:e,module:o,factory:__webpack_modules__[e],require:__webpack_require__};return __webpack_require__.i.forEach((function(e){e(n)})),o=n.module,n.factory.call(o.exports,o,o.exports,n.require),o.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.c=__webpack_module_cache__,__webpack_require__.i=[],__webpack_require__.x=e=>{},__webpack_require__.federation||(__webpack_require__.federation={initOptions:{name:"3d.editor",remotes:[],shareStrategy:"version-first"},chunkMatcher:function(e){return!1},rootOutputDir:"",initialConsumes:void 0,bundlerRuntimeOptions:{}}),deferred=[],__webpack_require__.O=(e,t,o,n)=>{if(!t){var s=1/0;for(l=0;l<deferred.length;l++){for(var[t,o,n]=deferred[l],r=!0,a=0;a<t.length;a++)(!1&n||s>=n)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[a])))?t.splice(a--,1):(r=!1,n<s&&(s=n));if(r){deferred.splice(l--,1);var i=o();void 0!==i&&(e=i)}}return e}n=n||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>n;l--)deferred[l]=deferred[l-1];deferred[l]=[t,o,n]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{__webpack_require__.S={};var e={},t={};__webpack_require__.I=(o,n)=>{n||(n=[]);var s=t[o];if(s||(s=t[o]={}),!(n.indexOf(s)>=0)){if(n.push(s),e[o])return e[o];__webpack_require__.o(__webpack_require__.S,o)||(__webpack_require__.S[o]={});var r=__webpack_require__.S[o],a="@reneos/3d.editor",i=(e,t,o,n)=>{var s=r[e]=r[e]||{},i=s[t];(!i||!i.loaded&&(!n!=!i.eager?n:a>i.from))&&(s[t]={get:o,from:a,eager:!!n})},l=[];return"default"===o&&(i("@reneos/app","1.0.6",(()=>()=>__webpack_require__(302)),1),i("three","0.175.0",(()=>()=>__webpack_require__(815)),1),i("vue","3.5.13",(()=>()=>__webpack_require__(31)),1)),e[o]=l.length?Promise.all(l).then((()=>e[o]=1)):1}}})(),(()=>{__webpack_require__.federation.initOptions.shared={"@reneos/app":[{version:"1.0.6",get:()=>()=>__webpack_require__(302),scope:["default"],shareConfig:{eager:!0,requiredVersion:!1,strictVersion:!1,singleton:!0}}],three:[{version:"0.175.0",get:()=>()=>__webpack_require__(815),scope:["default"],shareConfig:{eager:!0,requiredVersion:!1,strictVersion:!1,singleton:!0}}],vue:[{version:"3.5.13",get:()=>()=>__webpack_require__(31),scope:["default"],shareConfig:{eager:!0,requiredVersion:!1,strictVersion:!1,singleton:!0}}]},__webpack_require__.S={};var e={},t={};__webpack_require__.I=(o,n)=>__webpack_require__.federation.bundlerRuntime.I({shareScopeName:o,webpackRequire:__webpack_require__,initPromises:e,initTokens:t,initScope:n})})(),__webpack_require__.p="/editor/",installedModules={},moduleToHandlerMapping={655:{getter:()=>()=>__webpack_require__(31),shareInfo:{shareConfig:{fixedDependencies:!1,requiredVersion:"3.5.13",strictVersion:!1,singleton:!0,eager:!0},scope:["default"]},shareKey:"vue"},125:{getter:()=>()=>__webpack_require__(815),shareInfo:{shareConfig:{fixedDependencies:!1,requiredVersion:"0.175.0",strictVersion:!1,singleton:!0,eager:!0},scope:["default"]},shareKey:"three"},173:{getter:()=>()=>__webpack_require__(815),shareInfo:{shareConfig:{fixedDependencies:!1,requiredVersion:!1,strictVersion:!1,singleton:!0,eager:!0},scope:["default"]},shareKey:"three"},64:{getter:()=>()=>__webpack_require__(302),shareInfo:{shareConfig:{fixedDependencies:!1,requiredVersion:"1.0.6",strictVersion:!1,singleton:!0,eager:!0},scope:["default"]},shareKey:"@reneos/app"}},initialConsumes=[655,125,173,64],__webpack_require__.federation.installInitialConsumes=()=>__webpack_require__.federation.bundlerRuntime.installInitialConsumes({initialConsumes,installedModules,moduleToHandlerMapping,webpackRequire:__webpack_require__}),oldStartup=__webpack_require__.x,hasRun=!1,__webpack_require__.x=()=>(hasRun||(hasRun=!0,__webpack_require__(762)),oldStartup()),(()=>{var e={792:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,o)=>{var n,s,[r,a,i]=o,l=0;if(r.some((t=>0!==e[t]))){for(n in a)__webpack_require__.o(a,n)&&(__webpack_require__.m[n]=a[n]);if(i)var c=i(__webpack_require__)}for(t&&t(o);l<r.length;l++)s=r[l],__webpack_require__.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return __webpack_require__.O(c)},o=self.webpackChunk_reneos_3d_editor=self.webpackChunk_reneos_3d_editor||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),__webpack_require__.x();var __webpack_exports__=__webpack_require__.O(void 0,[585],(()=>__webpack_require__(853)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();