"use strict";(self.webpackChunk_reneos_3d_player_engine=self.webpackChunk_reneos_3d_player_engine||[]).push([[740],{740:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var i=o(922),s=o(314),n=o(404);const{Tween:a,Group:r,Easing:d}=window.TWEEN;let c=0,h=0,l=window.innerWidth/2,m=window.innerHeight/2;const p=new r;class u extends s.default{constructor(e){super(e),this.isCameraRoot=!0,this.camera=new i.ubm(e.fov||60,window.innerWidth/window.innerHeight,e.near||.01,e.far||300),this.camera.name="Main",this.add(this.camera),this.camera.position.set(0,0,1),n.A.Canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this._look=new i.Pq0(0,0,-2),this.activate()}async moveFocus(e,t={}){return new Promise((o=>{const i=this._look.clone(),s=new window.TWEEN.Tween(i).to(e,t.time||700).easing(d.Quadratic.InOut).delay(t.delay||0).onUpdate((()=>{this._look.copy(i)})).onComplete((()=>{p.remove(s),o()}));p.add(s),s.start()}))}moveCam(e,t={}){return new Promise((o=>{const i=this.position.clone(),s=new a(i).to(e,t.time||500).easing(d.Quadratic.InOut).delay(t.delay||0).onUpdate((()=>{this.position.copy(i)})).onComplete((async()=>{p.remove(s),o()}));p.add(s),s.start()}))}async setTo({focus:e,camera:t},o){const s=[];if(e){const{offset:t,position:n,paths:a}=e;let r=new i.Pq0;if(a){let e=o.slide;for(let t=0;t<a.length;t++)e=e.children.find((e=>e.uid===a[t]));e.model.getWorldPosition(r)}else r.set(n.x,n.y,n.z);r.add(t||{x:0,y:0,z:0}),s.push(this.moveFocus(r,e.options))}if(t){const{position:e}=t;s.push(this.moveCam(e,t.options))}await Promise.all(s)}onMouseMove(e){c=.001*(e.clientX-l),h=.001*(e.clientY-m)}update(e){p.update(e),this.camera.position.x+=.01*(c-this.camera.position.x),this.camera.position.y+=.01*(-h-this.camera.position.y),this.camera.lookAt(this._look)}activate(...e){n.A.SetCamera(this.camera),n.A.AddToUpdate(this.update.bind(this))}}const w=u}}]);