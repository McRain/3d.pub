"use strict";(self.webpackChunk_reneos_3d_player_engine=self.webpackChunk_reneos_3d_player_engine||[]).push([[614],{30:(t,s,e)=>{e.d(s,{A:()=>r});var i=e(922),n=e(475);class o extends i.B69{static get IsElement(){return!0}constructor(t){super(),this.isElement=!0,this.isBase=!0,this.uid=t.uid,this.data=t,this.type="element",this.actions=t.actions||[],this.transform=new n.A(this,!1),this.transform.parent=this,t.transform&&Object.keys(t.transform).forEach((s=>{this.transform[s]=t.transform[s]}))}addAction(t){this.actions.push(t)}get model(){return this}addElement(t,s,e,i){e===this?(this.add(s),t.transform?.position&&s.position.copy(i[t.transform.position]||t.transform.position),t.transform?.scale&&s.scale.copy(i[t.transform.scale]||t.transform.scale)):e.addElement(t,s,e,i)}}const r=o},614:(t,s,e)=>{e.r(s),e.d(s,{default:()=>o});var i=e(30);class n extends i.A{constructor(t){super(t),this.isModel=!0,this.type="model"}setAssets(t,s){for(let e=0;e<s.length;e++)this.add(...t.map((t=>t.resource.clone())))}removeAsset(t){const s=this.children.find((s=>s.uid===t));s&&this.remove(s)}addAsset(t,s){s.position.copy(t.transform?.position||{x:0,y:0,z:0}),s.rotation.setFromVector3(t.transform?.rotation||{x:0,y:0,z:0},"XYZ"),s.scale.copy(t.transform?.scale||{x:1,y:1,z:1}),t.transform?.quaternion&&s.quaternion.copy(t.transform?.quaternion),s.traverse((t=>{t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0,t.geometry.computeBoundingBox())})),this.add(s)}find(t){const s=t.split(".");let e=this;for(let t=0;t<s.length;t++)e=this.children.find((e=>e.uid===s[t])),list=e.children;return e}}const o=n},475:(t,s,e)=>{e.d(s,{A:()=>r});var i=e(351),n=e(922);class o extends i.A{constructor(t){super(),this.model=t}create(t,s){this[`_${t}`]=s}clean(t){delete this[`_${t}`]}update({position:t,rotation:s,scale:e,quaternion:i}){this.position=t,this.rotation=s,this.quaternion=i,this.scale=e,this.emit("change",this,["position","rotation","scale"])}get position(){return this._position}set position(t){this._position=this._position?this._position.copy(t):(new n.Pq0).copy(t),this.model.position.copy(this._position),this.emit("change",this,["position"])}get rotation(){return this._rotation}set rotation(t){this._rotation=this._rotation?this._rotation.set(t.x,t.y,t.z,"XYZ"):new n.O9p(t.x,t.y,t.z,"XYZ"),this.model.rotation.set(this._rotation.x,this._rotation.y,this._rotation.z,"XYZ"),this.emit("change",this,["rotation"])}get quaternion(){return this._quaternion}set quaternion(t){this._quaternion=this._quaternion?this.quaternion.copy(t):new n.PTz(t.x,t.y,t.z,t.w),this.model.quaternion.set(this._quaternion.x,this._quaternion.y,this._quaternion.z,this._quaternion.w),this.emit("change",this,["rotation"])}get scale(){return this._scale}set scale(t){this._scale=this._scale?this._scale.copy(t):(new n.Pq0).copy(t),this.model.scale.copy(this._scale),this.emit("change",this,["scale"])}}const r=o},351:(t,s,e)=>{e.d(s,{A:()=>i});const i=class{constructor(){this._events={"*":[]}}subs(t,s,e){null==this._events[t]&&(this._events[t]=[]),this._events[t].push({handler:e,once:s})}on(t,s){this.subs(t,!1,s)}once(t,s){this.subs(t,!0,s)}off(t,s){const e=this._events[t];if(e){for(let t=e.length-1;t>=0;t--)e[t].handler===s&&e.splice(t,1);0===e.length&&delete this._events[t]}}clear(t){this._events[t]=[]}clearAll(){this._events={"*":[]}}emit(t,...s){const e=[];this._events[t]&&e.push(...this._events[t]),this._events["*"].length&&e.push(...this._events["*"].map((s=>({handler:s.handler.bind(this,t),once:s.once}))));for(let t=e.length-1;t>=0;t--){const i=e[t];i.handler.apply(null,s),i.once&&e.splice(t,1)}}addEventListener(t,s){this.on(t,s)}removeEventListener(t,s){this.off(t,s)}}}}]);